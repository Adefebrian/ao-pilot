var Ks=Object.create;var Sn=Object.defineProperty;var Xs=Object.getOwnPropertyDescriptor;var Js=Object.getOwnPropertyNames;var Qs=Object.getPrototypeOf,eu=Object.prototype.hasOwnProperty;var ye=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),tu=(r,e)=>{for(var t in e)Sn(r,t,{get:e[t],enumerable:!0})},ru=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Js(e))!eu.call(r,i)&&i!==t&&Sn(r,i,{get:()=>e[i],enumerable:!(n=Xs(e,i))||n.enumerable});return r};var Tn=(r,e,t)=>(t=r!=null?Ks(Qs(r)):{},ru(e||!r||!r.__esModule?Sn(t,"default",{value:r,enumerable:!0}):t,r));var jo=ye((ad,Fo)=>{function Le(r){if(typeof r!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=r}typeof Symbol<"u"&&(Le.prototype[Symbol.iterator]=function(){return this});Le.of=function(){var r=arguments,e=r.length,t=0;return new Le(function(){return t>=e?{done:!0}:{done:!1,value:r[t++]}})};Le.empty=function(){var r=new Le(function(){return{done:!0}});return r};Le.fromSequence=function(r){var e=0,t=r.length;return new Le(function(){return e>=t?{done:!0}:{done:!1,value:r[e++]}})};Le.is=function(r){return r instanceof Le?!0:typeof r=="object"&&r!==null&&typeof r.next=="function"};Fo.exports=Le});var Lo=ye(Nn=>{Nn.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";Nn.SYMBOL_SUPPORT=typeof Symbol<"u"});var zr=ye((ud,No)=>{var Po=Lo(),Mf=Po.ARRAY_BUFFER_SUPPORT,Df=Po.SYMBOL_SUPPORT;No.exports=function(e,t){var n,i,o,s,u;if(!e)throw new Error("obliterator/forEach: invalid iterable.");if(typeof t!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(e)||Mf&&ArrayBuffer.isView(e)||typeof e=="string"||e.toString()==="[object Arguments]"){for(o=0,s=e.length;o<s;o++)t(e[o],o);return}if(typeof e.forEach=="function"){e.forEach(t);return}if(Df&&Symbol.iterator in e&&typeof e.next!="function"&&(e=e[Symbol.iterator]()),typeof e.next=="function"){for(n=e,o=0;u=n.next(),u.done!==!0;)t(u.value,o),o++;return}for(i in e)e.hasOwnProperty(i)&&t(e[i],i)}});var Zr=ye(Pe=>{var Wf=Math.pow(2,8)-1,$f=Math.pow(2,16)-1,zf=Math.pow(2,32)-1,Zf=Math.pow(2,7)-1,qf=Math.pow(2,15)-1,Vf=Math.pow(2,31)-1;Pe.getPointerArray=function(r){var e=r-1;if(e<=Wf)return Uint8Array;if(e<=$f)return Uint16Array;if(e<=zf)return Uint32Array;throw new Error("mnemonist: Pointer Array of size > 4294967295 is not supported.")};Pe.getSignedPointerArray=function(r){var e=r-1;return e<=Zf?Int8Array:e<=qf?Int16Array:e<=Vf?Int32Array:Float64Array};Pe.getNumberType=function(r){return r===(r|0)?Math.sign(r)===-1?r<=127&&r>=-128?Int8Array:r<=32767&&r>=-32768?Int16Array:Int32Array:r<=255?Uint8Array:r<=65535?Uint16Array:Uint32Array:Float64Array};var Gf={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8};Pe.getMinimalRepresentation=function(r,e){var t=null,n=0,i,o,s,u,l;for(u=0,l=r.length;u<l;u++)s=e?e(r[u]):r[u],o=Pe.getNumberType(s),i=Gf[o.name],i>n&&(n=i,t=o);return t};Pe.isTypedArray=function(r){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView(r)};Pe.concat=function(){var r=0,e,t,n;for(e=0,n=arguments.length;e<n;e++)r+=arguments[e].length;var i=new arguments[0].constructor(r);for(e=0,t=0;e<n;e++)i.set(arguments[e],t),t+=arguments[e].length;return i};Pe.indices=function(r){for(var e=Pe.getPointerArray(r),t=new e(r),n=0;n<r;n++)t[n]=n;return t}});var Dn=ye(wr=>{var Mo=zr(),Do=Zr();function Yf(r){return Array.isArray(r)||Do.isTypedArray(r)}function Mn(r){if(typeof r.length=="number")return r.length;if(typeof r.size=="number")return r.size}function Hf(r){var e=Mn(r),t=typeof e=="number"?new Array(e):[],n=0;return Mo(r,function(i){t[n++]=i}),t}function Kf(r){var e=Mn(r),t=typeof e=="number"?Do.getPointerArray(e):Array,n=typeof e=="number"?new Array(e):[],i=typeof e=="number"?new t(e):[],o=0;return Mo(r,function(s){n[o]=s,i[o]=o++}),[n,i]}wr.isArrayLike=Yf;wr.guessLength=Mn;wr.toArray=Hf;wr.toArrayWithIndices=Kf});var $o=ye((ld,Wo)=>{var Wn=jo(),Xf=zr(),Jf=Zr(),Qf=Dn();function J(r,e,t){if(arguments.length<2&&(t=r,r=null,e=null),this.capacity=t,typeof this.capacity!="number"||this.capacity<=0)throw new Error("mnemonist/lru-cache: capacity should be positive number.");if(!isFinite(this.capacity)||Math.floor(this.capacity)!==this.capacity)throw new Error("mnemonist/lru-cache: capacity should be a finite positive integer.");var n=Jf.getPointerArray(t);this.forward=new n(t),this.backward=new n(t),this.K=typeof r=="function"?new r(t):new Array(t),this.V=typeof e=="function"?new e(t):new Array(t),this.size=0,this.head=0,this.tail=0,this.items={}}J.prototype.clear=function(){this.size=0,this.head=0,this.tail=0,this.items={}};J.prototype.splayOnTop=function(r){var e=this.head;if(this.head===r)return this;var t=this.backward[r],n=this.forward[r];return this.tail===r?this.tail=t:this.backward[n]=t,this.forward[t]=n,this.backward[e]=r,this.head=r,this.forward[r]=e,this};J.prototype.set=function(r,e){var t=this.items[r];if(typeof t<"u"){this.splayOnTop(t),this.V[t]=e;return}this.size<this.capacity?t=this.size++:(t=this.tail,this.tail=this.backward[t],delete this.items[this.K[t]]),this.items[r]=t,this.K[t]=r,this.V[t]=e,this.forward[t]=this.head,this.backward[this.head]=t,this.head=t};J.prototype.setpop=function(r,e){var t=null,n=null,i=this.items[r];return typeof i<"u"?(this.splayOnTop(i),t=this.V[i],this.V[i]=e,{evicted:!1,key:r,value:t}):(this.size<this.capacity?i=this.size++:(i=this.tail,this.tail=this.backward[i],t=this.V[i],n=this.K[i],delete this.items[n]),this.items[r]=i,this.K[i]=r,this.V[i]=e,this.forward[i]=this.head,this.backward[this.head]=i,this.head=i,n?{evicted:!0,key:n,value:t}:null)};J.prototype.has=function(r){return r in this.items};J.prototype.get=function(r){var e=this.items[r];if(!(typeof e>"u"))return this.splayOnTop(e),this.V[e]};J.prototype.peek=function(r){var e=this.items[r];if(!(typeof e>"u"))return this.V[e]};J.prototype.forEach=function(r,e){e=arguments.length>1?e:this;for(var t=0,n=this.size,i=this.head,o=this.K,s=this.V,u=this.forward;t<n;)r.call(e,s[i],o[i],this),i=u[i],t++};J.prototype.keys=function(){var r=0,e=this.size,t=this.head,n=this.K,i=this.forward;return new Wn(function(){if(r>=e)return{done:!0};var o=n[t];return r++,r<e&&(t=i[t]),{done:!1,value:o}})};J.prototype.values=function(){var r=0,e=this.size,t=this.head,n=this.V,i=this.forward;return new Wn(function(){if(r>=e)return{done:!0};var o=n[t];return r++,r<e&&(t=i[t]),{done:!1,value:o}})};J.prototype.entries=function(){var r=0,e=this.size,t=this.head,n=this.K,i=this.V,o=this.forward;return new Wn(function(){if(r>=e)return{done:!0};var s=n[t],u=i[t];return r++,r<e&&(t=o[t]),{done:!1,value:[s,u]}})};typeof Symbol<"u"&&(J.prototype[Symbol.iterator]=J.prototype.entries);J.prototype.inspect=function(){for(var r=new Map,e=this.entries(),t;t=e.next(),!t.done;)r.set(t.value[0],t.value[1]);return Object.defineProperty(r,"constructor",{value:J,enumerable:!1}),r};typeof Symbol<"u"&&(J.prototype[Symbol.for("nodejs.util.inspect.custom")]=J.prototype.inspect);J.from=function(r,e,t,n){if(arguments.length<2){if(n=Qf.guessLength(r),typeof n!="number")throw new Error("mnemonist/lru-cache.from: could not guess iterable length. Please provide desired capacity as last argument.")}else arguments.length===2&&(n=e,e=null,t=null);var i=new J(e,t,n);return Xf(r,function(o,s){i.set(s,o)}),i};Wo.exports=J});var Zo=ye((hd,zo)=>{var qt=$o(),ec=zr(),tc=Zr(),rc=Dn();function re(r,e,t){if(arguments.length<2&&(t=r,r=null,e=null),this.capacity=t,typeof this.capacity!="number"||this.capacity<=0)throw new Error("mnemonist/lru-map: capacity should be positive number.");if(!isFinite(this.capacity)||Math.floor(this.capacity)!==this.capacity)throw new Error("mnemonist/lru-map: capacity should be a finite positive integer.");var n=tc.getPointerArray(t);this.forward=new n(t),this.backward=new n(t),this.K=typeof r=="function"?new r(t):new Array(t),this.V=typeof e=="function"?new e(t):new Array(t),this.size=0,this.head=0,this.tail=0,this.items=new Map}re.prototype.clear=function(){this.size=0,this.head=0,this.tail=0,this.items.clear()};re.prototype.set=function(r,e){var t=this.items.get(r);if(typeof t<"u"){this.splayOnTop(t),this.V[t]=e;return}this.size<this.capacity?t=this.size++:(t=this.tail,this.tail=this.backward[t],this.items.delete(this.K[t])),this.items.set(r,t),this.K[t]=r,this.V[t]=e,this.forward[t]=this.head,this.backward[this.head]=t,this.head=t};re.prototype.setpop=function(r,e){var t=null,n=null,i=this.items.get(r);return typeof i<"u"?(this.splayOnTop(i),t=this.V[i],this.V[i]=e,{evicted:!1,key:r,value:t}):(this.size<this.capacity?i=this.size++:(i=this.tail,this.tail=this.backward[i],t=this.V[i],n=this.K[i],this.items.delete(n)),this.items.set(r,i),this.K[i]=r,this.V[i]=e,this.forward[i]=this.head,this.backward[this.head]=i,this.head=i,n?{evicted:!0,key:n,value:t}:null)};re.prototype.has=function(r){return this.items.has(r)};re.prototype.get=function(r){var e=this.items.get(r);if(!(typeof e>"u"))return this.splayOnTop(e),this.V[e]};re.prototype.peek=function(r){var e=this.items.get(r);if(!(typeof e>"u"))return this.V[e]};re.prototype.splayOnTop=qt.prototype.splayOnTop;re.prototype.forEach=qt.prototype.forEach;re.prototype.keys=qt.prototype.keys;re.prototype.values=qt.prototype.values;re.prototype.entries=qt.prototype.entries;typeof Symbol<"u"&&(re.prototype[Symbol.iterator]=re.prototype.entries);re.prototype.inspect=qt.prototype.inspect;re.from=function(r,e,t,n){if(arguments.length<2){if(n=rc.guessLength(r),typeof n!="number")throw new Error("mnemonist/lru-cache.from: could not guess iterable length. Please provide desired capacity as last argument.")}else arguments.length===2&&(n=e,e=null,t=null);var i=new re(e,t,n);return ec(r,function(o,s){i.set(s,o)}),i};zo.exports=re});var Ea=ye((Rw,ba)=>{var rr=1e3,nr=rr*60,ir=nr*60,Lt=ir*24,uh=Lt*7,fh=Lt*365.25;ba.exports=function(r,e){e=e||{};var t=typeof r;if(t==="string"&&r.length>0)return ch(r);if(t==="number"&&isFinite(r))return e.long?hh(r):lh(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function ch(r){if(r=String(r),!(r.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(e){var t=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*fh;case"weeks":case"week":case"w":return t*uh;case"days":case"day":case"d":return t*Lt;case"hours":case"hour":case"hrs":case"hr":case"h":return t*ir;case"minutes":case"minute":case"mins":case"min":case"m":return t*nr;case"seconds":case"second":case"secs":case"sec":case"s":return t*rr;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function lh(r){var e=Math.abs(r);return e>=Lt?Math.round(r/Lt)+"d":e>=ir?Math.round(r/ir)+"h":e>=nr?Math.round(r/nr)+"m":e>=rr?Math.round(r/rr)+"s":r+"ms"}function hh(r){var e=Math.abs(r);return e>=Lt?hn(r,e,Lt,"day"):e>=ir?hn(r,e,ir,"hour"):e>=nr?hn(r,e,nr,"minute"):e>=rr?hn(r,e,rr,"second"):r+" ms"}function hn(r,e,t,n){var i=e>=t*1.5;return Math.round(r/t)+" "+n+(i?"s":"")}});var Sa=ye((Uw,Aa)=>{function ph(r){t.debug=t,t.default=t,t.coerce=l,t.disable=o,t.enable=i,t.enabled=s,t.humanize=Ea(),t.destroy=p,Object.keys(r).forEach(m=>{t[m]=r[m]}),t.names=[],t.skips=[],t.formatters={};function e(m){let y=0;for(let x=0;x<m.length;x++)y=(y<<5)-y+m.charCodeAt(x),y|=0;return t.colors[Math.abs(y)%t.colors.length]}t.selectColor=e;function t(m){let y,x=null,E,S;function A(...T){if(!A.enabled)return;let C=A,M=Number(new Date),D=M-(y||M);C.diff=D,C.prev=y,C.curr=M,y=M,T[0]=t.coerce(T[0]),typeof T[0]!="string"&&T.unshift("%O");let P=0;T[0]=T[0].replace(/%([a-zA-Z%])/g,(Z,me)=>{if(Z==="%%")return"%";P++;let pt=t.formatters[me];if(typeof pt=="function"){let Dt=T[P];Z=pt.call(C,Dt),T.splice(P,1),P--}return Z}),t.formatArgs.call(C,T),(C.log||t.log).apply(C,T)}return A.namespace=m,A.useColors=t.useColors(),A.color=t.selectColor(m),A.extend=n,A.destroy=t.destroy,Object.defineProperty(A,"enabled",{enumerable:!0,configurable:!1,get:()=>x!==null?x:(E!==t.namespaces&&(E=t.namespaces,S=t.enabled(m)),S),set:T=>{x=T}}),typeof t.init=="function"&&t.init(A),A}function n(m,y){let x=t(this.namespace+(typeof y>"u"?":":y)+m);return x.log=this.log,x}function i(m){t.save(m),t.namespaces=m,t.names=[],t.skips=[];let y,x=(typeof m=="string"?m:"").split(/[\s,]+/),E=x.length;for(y=0;y<E;y++)x[y]&&(m=x[y].replace(/\*/g,".*?"),m[0]==="-"?t.skips.push(new RegExp("^"+m.slice(1)+"$")):t.names.push(new RegExp("^"+m+"$")))}function o(){let m=[...t.names.map(u),...t.skips.map(u).map(y=>"-"+y)].join(",");return t.enable(""),m}function s(m){if(m[m.length-1]==="*")return!0;let y,x;for(y=0,x=t.skips.length;y<x;y++)if(t.skips[y].test(m))return!1;for(y=0,x=t.names.length;y<x;y++)if(t.names[y].test(m))return!0;return!1}function u(m){return m.toString().substring(2,m.toString().length-2).replace(/\.\*\?$/,"*")}function l(m){return m instanceof Error?m.stack||m.message:m}function p(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}Aa.exports=ph});var Ta=ye((xe,pn)=>{xe.formatArgs=mh;xe.save=yh;xe.load=gh;xe.useColors=dh;xe.storage=wh();xe.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();xe.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function dh(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function mh(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+pn.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;r.splice(1,0,e,"color: inherit");let t=0,n=0;r[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(t++,i==="%c"&&(n=t))}),r.splice(n,0,e)}xe.log=console.debug||console.log||(()=>{});function yh(r){try{r?xe.storage.setItem("debug",r):xe.storage.removeItem("debug")}catch{}}function gh(){let r;try{r=xe.storage.getItem("debug")}catch{}return!r&&typeof process<"u"&&"env"in process&&(r=process.env.DEBUG),r}function wh(){try{return localStorage}catch{}}pn.exports=Sa()(xe);var{formatters:vh}=pn.exports;vh.j=function(r){try{return JSON.stringify(r)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var ns=ye(yn=>{"use strict";yn.byteLength=Mh;yn.toByteArray=Wh;yn.fromByteArray=Zh;var We=[],Se=[],Nh=typeof Uint8Array<"u"?Uint8Array:Array,Ai="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Pt=0,ts=Ai.length;Pt<ts;++Pt)We[Pt]=Ai[Pt],Se[Ai.charCodeAt(Pt)]=Pt;var Pt,ts;Se[45]=62;Se[95]=63;function rs(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function Mh(r){var e=rs(r),t=e[0],n=e[1];return(t+n)*3/4-n}function Dh(r,e,t){return(e+t)*3/4-t}function Wh(r){var e,t=rs(r),n=t[0],i=t[1],o=new Nh(Dh(r,n,i)),s=0,u=i>0?n-4:n,l;for(l=0;l<u;l+=4)e=Se[r.charCodeAt(l)]<<18|Se[r.charCodeAt(l+1)]<<12|Se[r.charCodeAt(l+2)]<<6|Se[r.charCodeAt(l+3)],o[s++]=e>>16&255,o[s++]=e>>8&255,o[s++]=e&255;return i===2&&(e=Se[r.charCodeAt(l)]<<2|Se[r.charCodeAt(l+1)]>>4,o[s++]=e&255),i===1&&(e=Se[r.charCodeAt(l)]<<10|Se[r.charCodeAt(l+1)]<<4|Se[r.charCodeAt(l+2)]>>2,o[s++]=e>>8&255,o[s++]=e&255),o}function $h(r){return We[r>>18&63]+We[r>>12&63]+We[r>>6&63]+We[r&63]}function zh(r,e,t){for(var n,i=[],o=e;o<t;o+=3)n=(r[o]<<16&16711680)+(r[o+1]<<8&65280)+(r[o+2]&255),i.push($h(n));return i.join("")}function Zh(r){for(var e,t=r.length,n=t%3,i=[],o=16383,s=0,u=t-n;s<u;s+=o)i.push(zh(r,s,s+o>u?u:s+o));return n===1?(e=r[t-1],i.push(We[e>>2]+We[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push(We[e>>10]+We[e>>4&63]+We[e<<2&63]+"=")),i.join("")}});var is=ye(Si=>{Si.read=function(r,e,t,n,i){var o,s,u=i*8-n-1,l=(1<<u)-1,p=l>>1,m=-7,y=t?i-1:0,x=t?-1:1,E=r[e+y];for(y+=x,o=E&(1<<-m)-1,E>>=-m,m+=u;m>0;o=o*256+r[e+y],y+=x,m-=8);for(s=o&(1<<-m)-1,o>>=-m,m+=n;m>0;s=s*256+r[e+y],y+=x,m-=8);if(o===0)o=1-p;else{if(o===l)return s?NaN:(E?-1:1)*(1/0);s=s+Math.pow(2,n),o=o-p}return(E?-1:1)*s*Math.pow(2,o-n)};Si.write=function(r,e,t,n,i,o){var s,u,l,p=o*8-i-1,m=(1<<p)-1,y=m>>1,x=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,E=n?0:o-1,S=n?1:-1,A=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,s=m):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),s+y>=1?e+=x/l:e+=x*Math.pow(2,1-y),e*l>=2&&(s++,l/=2),s+y>=m?(u=0,s=m):s+y>=1?(u=(e*l-1)*Math.pow(2,i),s=s+y):(u=e*Math.pow(2,y-1)*Math.pow(2,i),s=0));i>=8;r[t+E]=u&255,E+=S,u/=256,i-=8);for(s=s<<i|u,p+=i;p>0;r[t+E]=s&255,E+=S,s/=256,p-=8);r[t+E-S]|=A*128}});var _s=ye(cr=>{"use strict";var Ti=ns(),ur=is(),os=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;cr.Buffer=w;cr.SlowBuffer=Kh;cr.INSPECT_MAX_BYTES=50;var gn=2147483647;cr.kMaxLength=gn;w.TYPED_ARRAY_SUPPORT=qh();!w.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function qh(){try{let r=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(r,e),r.foo()===42}catch{return!1}}Object.defineProperty(w.prototype,"parent",{enumerable:!0,get:function(){if(w.isBuffer(this))return this.buffer}});Object.defineProperty(w.prototype,"offset",{enumerable:!0,get:function(){if(w.isBuffer(this))return this.byteOffset}});function Je(r){if(r>gn)throw new RangeError('The value "'+r+'" is invalid for option "size"');let e=new Uint8Array(r);return Object.setPrototypeOf(e,w.prototype),e}function w(r,e,t){if(typeof r=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Oi(r)}return fs(r,e,t)}w.poolSize=8192;function fs(r,e,t){if(typeof r=="string")return Gh(r,e);if(ArrayBuffer.isView(r))return Yh(r);if(r==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if($e(r,ArrayBuffer)||r&&$e(r.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&($e(r,SharedArrayBuffer)||r&&$e(r.buffer,SharedArrayBuffer)))return Bi(r,e,t);if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=r.valueOf&&r.valueOf();if(n!=null&&n!==r)return w.from(n,e,t);let i=Hh(r);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof r[Symbol.toPrimitive]=="function")return w.from(r[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}w.from=function(r,e,t){return fs(r,e,t)};Object.setPrototypeOf(w.prototype,Uint8Array.prototype);Object.setPrototypeOf(w,Uint8Array);function cs(r){if(typeof r!="number")throw new TypeError('"size" argument must be of type number');if(r<0)throw new RangeError('The value "'+r+'" is invalid for option "size"')}function Vh(r,e,t){return cs(r),r<=0?Je(r):e!==void 0?typeof t=="string"?Je(r).fill(e,t):Je(r).fill(e):Je(r)}w.alloc=function(r,e,t){return Vh(r,e,t)};function Oi(r){return cs(r),Je(r<0?0:ki(r)|0)}w.allocUnsafe=function(r){return Oi(r)};w.allocUnsafeSlow=function(r){return Oi(r)};function Gh(r,e){if((typeof e!="string"||e==="")&&(e="utf8"),!w.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let t=ls(r,e)|0,n=Je(t),i=n.write(r,e);return i!==t&&(n=n.slice(0,i)),n}function Ii(r){let e=r.length<0?0:ki(r.length)|0,t=Je(e);for(let n=0;n<e;n+=1)t[n]=r[n]&255;return t}function Yh(r){if($e(r,Uint8Array)){let e=new Uint8Array(r);return Bi(e.buffer,e.byteOffset,e.byteLength)}return Ii(r)}function Bi(r,e,t){if(e<0||r.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(r.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&t===void 0?n=new Uint8Array(r):t===void 0?n=new Uint8Array(r,e):n=new Uint8Array(r,e,t),Object.setPrototypeOf(n,w.prototype),n}function Hh(r){if(w.isBuffer(r)){let e=ki(r.length)|0,t=Je(e);return t.length===0||r.copy(t,0,0,e),t}if(r.length!==void 0)return typeof r.length!="number"||Ui(r.length)?Je(0):Ii(r);if(r.type==="Buffer"&&Array.isArray(r.data))return Ii(r.data)}function ki(r){if(r>=gn)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+gn.toString(16)+" bytes");return r|0}function Kh(r){return+r!=r&&(r=0),w.alloc(+r)}w.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==w.prototype};w.compare=function(e,t){if($e(e,Uint8Array)&&(e=w.from(e,e.offset,e.byteLength)),$e(t,Uint8Array)&&(t=w.from(t,t.offset,t.byteLength)),!w.isBuffer(e)||!w.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,i=t.length;for(let o=0,s=Math.min(n,i);o<s;++o)if(e[o]!==t[o]){n=e[o],i=t[o];break}return n<i?-1:i<n?1:0};w.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};w.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return w.alloc(0);let n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;let i=w.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){let s=e[n];if($e(s,Uint8Array))o+s.length>i.length?(w.isBuffer(s)||(s=w.from(s)),s.copy(i,o)):Uint8Array.prototype.set.call(i,s,o);else if(w.isBuffer(s))s.copy(i,o);else throw new TypeError('"list" argument must be an Array of Buffers');o+=s.length}return i};function ls(r,e){if(w.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||$e(r,ArrayBuffer))return r.byteLength;if(typeof r!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);let t=r.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&t===0)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return Ci(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return xs(r).length;default:if(i)return n?-1:Ci(r).length;e=(""+e).toLowerCase(),i=!0}}w.byteLength=ls;function Xh(r,e,t){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(r||(r="utf8");;)switch(r){case"hex":return sp(this,e,t);case"utf8":case"utf-8":return ps(this,e,t);case"ascii":return op(this,e,t);case"latin1":case"binary":return ap(this,e,t);case"base64":return np(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return up(this,e,t);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}w.prototype._isBuffer=!0;function Nt(r,e,t){let n=r[e];r[e]=r[t],r[t]=n}w.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)Nt(this,t,t+1);return this};w.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)Nt(this,t,t+3),Nt(this,t+1,t+2);return this};w.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)Nt(this,t,t+7),Nt(this,t+1,t+6),Nt(this,t+2,t+5),Nt(this,t+3,t+4);return this};w.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?ps(this,0,e):Xh.apply(this,arguments)};w.prototype.toLocaleString=w.prototype.toString;w.prototype.equals=function(e){if(!w.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:w.compare(this,e)===0};w.prototype.inspect=function(){let e="",t=cr.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"};os&&(w.prototype[os]=w.prototype.inspect);w.prototype.compare=function(e,t,n,i,o){if($e(e,Uint8Array)&&(e=w.from(e,e.offset,e.byteLength)),!w.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),t<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&t>=n)return 0;if(i>=o)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,i>>>=0,o>>>=0,this===e)return 0;let s=o-i,u=n-t,l=Math.min(s,u),p=this.slice(i,o),m=e.slice(t,n);for(let y=0;y<l;++y)if(p[y]!==m[y]){s=p[y],u=m[y];break}return s<u?-1:u<s?1:0};function hs(r,e,t,n,i){if(r.length===0)return-1;if(typeof t=="string"?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,Ui(t)&&(t=i?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if(i)return-1;t=r.length-1}else if(t<0)if(i)t=0;else return-1;if(typeof e=="string"&&(e=w.from(e,n)),w.isBuffer(e))return e.length===0?-1:as(r,e,t,n,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):as(r,[e],t,n,i);throw new TypeError("val must be string, number or Buffer")}function as(r,e,t,n,i){let o=1,s=r.length,u=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||e.length<2)return-1;o=2,s/=2,u/=2,t/=2}function l(m,y){return o===1?m[y]:m.readUInt16BE(y*o)}let p;if(i){let m=-1;for(p=t;p<s;p++)if(l(r,p)===l(e,m===-1?0:p-m)){if(m===-1&&(m=p),p-m+1===u)return m*o}else m!==-1&&(p-=p-m),m=-1}else for(t+u>s&&(t=s-u),p=t;p>=0;p--){let m=!0;for(let y=0;y<u;y++)if(l(r,p+y)!==l(e,y)){m=!1;break}if(m)return p}return-1}w.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1};w.prototype.indexOf=function(e,t,n){return hs(this,e,t,n,!0)};w.prototype.lastIndexOf=function(e,t,n){return hs(this,e,t,n,!1)};function Jh(r,e,t,n){t=Number(t)||0;let i=r.length-t;n?(n=Number(n),n>i&&(n=i)):n=i;let o=e.length;n>o/2&&(n=o/2);let s;for(s=0;s<n;++s){let u=parseInt(e.substr(s*2,2),16);if(Ui(u))return s;r[t+s]=u}return s}function Qh(r,e,t,n){return wn(Ci(e,r.length-t),r,t,n)}function ep(r,e,t,n){return wn(hp(e),r,t,n)}function tp(r,e,t,n){return wn(xs(e),r,t,n)}function rp(r,e,t,n){return wn(pp(e,r.length-t),r,t,n)}w.prototype.write=function(e,t,n,i){if(t===void 0)i="utf8",n=this.length,t=0;else if(n===void 0&&typeof t=="string")i=t,n=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let o=this.length-t;if((n===void 0||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let s=!1;for(;;)switch(i){case"hex":return Jh(this,e,t,n);case"utf8":case"utf-8":return Qh(this,e,t,n);case"ascii":case"latin1":case"binary":return ep(this,e,t,n);case"base64":return tp(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return rp(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}};w.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function np(r,e,t){return e===0&&t===r.length?Ti.fromByteArray(r):Ti.fromByteArray(r.slice(e,t))}function ps(r,e,t){t=Math.min(r.length,t);let n=[],i=e;for(;i<t;){let o=r[i],s=null,u=o>239?4:o>223?3:o>191?2:1;if(i+u<=t){let l,p,m,y;switch(u){case 1:o<128&&(s=o);break;case 2:l=r[i+1],(l&192)===128&&(y=(o&31)<<6|l&63,y>127&&(s=y));break;case 3:l=r[i+1],p=r[i+2],(l&192)===128&&(p&192)===128&&(y=(o&15)<<12|(l&63)<<6|p&63,y>2047&&(y<55296||y>57343)&&(s=y));break;case 4:l=r[i+1],p=r[i+2],m=r[i+3],(l&192)===128&&(p&192)===128&&(m&192)===128&&(y=(o&15)<<18|(l&63)<<12|(p&63)<<6|m&63,y>65535&&y<1114112&&(s=y))}}s===null?(s=65533,u=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),i+=u}return ip(n)}var ss=4096;function ip(r){let e=r.length;if(e<=ss)return String.fromCharCode.apply(String,r);let t="",n=0;for(;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=ss));return t}function op(r,e,t){let n="";t=Math.min(r.length,t);for(let i=e;i<t;++i)n+=String.fromCharCode(r[i]&127);return n}function ap(r,e,t){let n="";t=Math.min(r.length,t);for(let i=e;i<t;++i)n+=String.fromCharCode(r[i]);return n}function sp(r,e,t){let n=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>n)&&(t=n);let i="";for(let o=e;o<t;++o)i+=dp[r[o]];return i}function up(r,e,t){let n=r.slice(e,t),i="";for(let o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+n[o+1]*256);return i}w.prototype.slice=function(e,t){let n=this.length;e=~~e,t=t===void 0?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);let i=this.subarray(e,t);return Object.setPrototypeOf(i,w.prototype),i};function ee(r,e,t){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}w.prototype.readUintLE=w.prototype.readUIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||ee(e,t,this.length);let i=this[e],o=1,s=0;for(;++s<t&&(o*=256);)i+=this[e+s]*o;return i};w.prototype.readUintBE=w.prototype.readUIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||ee(e,t,this.length);let i=this[e+--t],o=1;for(;t>0&&(o*=256);)i+=this[e+--t]*o;return i};w.prototype.readUint8=w.prototype.readUInt8=function(e,t){return e=e>>>0,t||ee(e,1,this.length),this[e]};w.prototype.readUint16LE=w.prototype.readUInt16LE=function(e,t){return e=e>>>0,t||ee(e,2,this.length),this[e]|this[e+1]<<8};w.prototype.readUint16BE=w.prototype.readUInt16BE=function(e,t){return e=e>>>0,t||ee(e,2,this.length),this[e]<<8|this[e+1]};w.prototype.readUint32LE=w.prototype.readUInt32LE=function(e,t){return e=e>>>0,t||ee(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};w.prototype.readUint32BE=w.prototype.readUInt32BE=function(e,t){return e=e>>>0,t||ee(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};w.prototype.readBigUInt64LE=lt(function(e){e=e>>>0,fr(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Fr(e,this.length-8);let i=t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,o=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(i)+(BigInt(o)<<BigInt(32))});w.prototype.readBigUInt64BE=lt(function(e){e=e>>>0,fr(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Fr(e,this.length-8);let i=t*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],o=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(i)<<BigInt(32))+BigInt(o)});w.prototype.readIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||ee(e,t,this.length);let i=this[e],o=1,s=0;for(;++s<t&&(o*=256);)i+=this[e+s]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i};w.prototype.readIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||ee(e,t,this.length);let i=t,o=1,s=this[e+--i];for(;i>0&&(o*=256);)s+=this[e+--i]*o;return o*=128,s>=o&&(s-=Math.pow(2,8*t)),s};w.prototype.readInt8=function(e,t){return e=e>>>0,t||ee(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};w.prototype.readInt16LE=function(e,t){e=e>>>0,t||ee(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};w.prototype.readInt16BE=function(e,t){e=e>>>0,t||ee(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};w.prototype.readInt32LE=function(e,t){return e=e>>>0,t||ee(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};w.prototype.readInt32BE=function(e,t){return e=e>>>0,t||ee(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};w.prototype.readBigInt64LE=lt(function(e){e=e>>>0,fr(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Fr(e,this.length-8);let i=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});w.prototype.readBigInt64BE=lt(function(e){e=e>>>0,fr(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Fr(e,this.length-8);let i=(t<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)});w.prototype.readFloatLE=function(e,t){return e=e>>>0,t||ee(e,4,this.length),ur.read(this,e,!0,23,4)};w.prototype.readFloatBE=function(e,t){return e=e>>>0,t||ee(e,4,this.length),ur.read(this,e,!1,23,4)};w.prototype.readDoubleLE=function(e,t){return e=e>>>0,t||ee(e,8,this.length),ur.read(this,e,!0,52,8)};w.prototype.readDoubleBE=function(e,t){return e=e>>>0,t||ee(e,8,this.length),ur.read(this,e,!1,52,8)};function de(r,e,t,n,i,o){if(!w.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(t+n>r.length)throw new RangeError("Index out of range")}w.prototype.writeUintLE=w.prototype.writeUIntLE=function(e,t,n,i){if(e=+e,t=t>>>0,n=n>>>0,!i){let u=Math.pow(2,8*n)-1;de(this,e,t,n,u,0)}let o=1,s=0;for(this[t]=e&255;++s<n&&(o*=256);)this[t+s]=e/o&255;return t+n};w.prototype.writeUintBE=w.prototype.writeUIntBE=function(e,t,n,i){if(e=+e,t=t>>>0,n=n>>>0,!i){let u=Math.pow(2,8*n)-1;de(this,e,t,n,u,0)}let o=n-1,s=1;for(this[t+o]=e&255;--o>=0&&(s*=256);)this[t+o]=e/s&255;return t+n};w.prototype.writeUint8=w.prototype.writeUInt8=function(e,t,n){return e=+e,t=t>>>0,n||de(this,e,t,1,255,0),this[t]=e&255,t+1};w.prototype.writeUint16LE=w.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||de(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2};w.prototype.writeUint16BE=w.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||de(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2};w.prototype.writeUint32LE=w.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||de(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4};w.prototype.writeUint32BE=w.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||de(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function ds(r,e,t,n,i){vs(e,n,i,r,t,7);let o=Number(e&BigInt(4294967295));r[t++]=o,o=o>>8,r[t++]=o,o=o>>8,r[t++]=o,o=o>>8,r[t++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return r[t++]=s,s=s>>8,r[t++]=s,s=s>>8,r[t++]=s,s=s>>8,r[t++]=s,t}function ms(r,e,t,n,i){vs(e,n,i,r,t,7);let o=Number(e&BigInt(4294967295));r[t+7]=o,o=o>>8,r[t+6]=o,o=o>>8,r[t+5]=o,o=o>>8,r[t+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return r[t+3]=s,s=s>>8,r[t+2]=s,s=s>>8,r[t+1]=s,s=s>>8,r[t]=s,t+8}w.prototype.writeBigUInt64LE=lt(function(e,t=0){return ds(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});w.prototype.writeBigUInt64BE=lt(function(e,t=0){return ms(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});w.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t=t>>>0,!i){let l=Math.pow(2,8*n-1);de(this,e,t,n,l-1,-l)}let o=0,s=1,u=0;for(this[t]=e&255;++o<n&&(s*=256);)e<0&&u===0&&this[t+o-1]!==0&&(u=1),this[t+o]=(e/s>>0)-u&255;return t+n};w.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t=t>>>0,!i){let l=Math.pow(2,8*n-1);de(this,e,t,n,l-1,-l)}let o=n-1,s=1,u=0;for(this[t+o]=e&255;--o>=0&&(s*=256);)e<0&&u===0&&this[t+o+1]!==0&&(u=1),this[t+o]=(e/s>>0)-u&255;return t+n};w.prototype.writeInt8=function(e,t,n){return e=+e,t=t>>>0,n||de(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1};w.prototype.writeInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||de(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2};w.prototype.writeInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||de(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2};w.prototype.writeInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||de(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4};w.prototype.writeInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||de(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};w.prototype.writeBigInt64LE=lt(function(e,t=0){return ds(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});w.prototype.writeBigInt64BE=lt(function(e,t=0){return ms(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ys(r,e,t,n,i,o){if(t+n>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function gs(r,e,t,n,i){return e=+e,t=t>>>0,i||ys(r,e,t,4,34028234663852886e22,-34028234663852886e22),ur.write(r,e,t,n,23,4),t+4}w.prototype.writeFloatLE=function(e,t,n){return gs(this,e,t,!0,n)};w.prototype.writeFloatBE=function(e,t,n){return gs(this,e,t,!1,n)};function ws(r,e,t,n,i){return e=+e,t=t>>>0,i||ys(r,e,t,8,17976931348623157e292,-17976931348623157e292),ur.write(r,e,t,n,52,8),t+8}w.prototype.writeDoubleLE=function(e,t,n){return ws(this,e,t,!0,n)};w.prototype.writeDoubleBE=function(e,t,n){return ws(this,e,t,!1,n)};w.prototype.copy=function(e,t,n,i){if(!w.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);let o=i-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(t,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),t),o};w.prototype.fill=function(e,t,n,i){if(typeof e=="string"){if(typeof t=="string"?(i=t,t=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!w.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){let s=e.charCodeAt(0);(i==="utf8"&&s<128||i==="latin1")&&(e=s)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t=t>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let o;if(typeof e=="number")for(o=t;o<n;++o)this[o]=e;else{let s=w.isBuffer(e)?e:w.from(e,i),u=s.length;if(u===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=s[o%u]}return this};var sr={};function Ri(r,e,t){sr[r]=class extends t{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${r}]`,this.stack,delete this.name}get code(){return r}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${r}]: ${this.message}`}}}Ri("ERR_BUFFER_OUT_OF_BOUNDS",function(r){return r?`${r} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);Ri("ERR_INVALID_ARG_TYPE",function(r,e){return`The "${r}" argument must be of type number. Received type ${typeof e}`},TypeError);Ri("ERR_OUT_OF_RANGE",function(r,e,t){let n=`The value of "${r}" is out of range.`,i=t;return Number.isInteger(t)&&Math.abs(t)>2**32?i=us(String(t)):typeof t=="bigint"&&(i=String(t),(t>BigInt(2)**BigInt(32)||t<-(BigInt(2)**BigInt(32)))&&(i=us(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n},RangeError);function us(r){let e="",t=r.length,n=r[0]==="-"?1:0;for(;t>=n+4;t-=3)e=`_${r.slice(t-3,t)}${e}`;return`${r.slice(0,t)}${e}`}function fp(r,e,t){fr(e,"offset"),(r[e]===void 0||r[e+t]===void 0)&&Fr(e,r.length-(t+1))}function vs(r,e,t,n,i,o){if(r>t||r<e){let s=typeof e=="bigint"?"n":"",u;throw o>3?e===0||e===BigInt(0)?u=`>= 0${s} and < 2${s} ** ${(o+1)*8}${s}`:u=`>= -(2${s} ** ${(o+1)*8-1}${s}) and < 2 ** ${(o+1)*8-1}${s}`:u=`>= ${e}${s} and <= ${t}${s}`,new sr.ERR_OUT_OF_RANGE("value",u,r)}fp(n,i,o)}function fr(r,e){if(typeof r!="number")throw new sr.ERR_INVALID_ARG_TYPE(e,"number",r)}function Fr(r,e,t){throw Math.floor(r)!==r?(fr(r,t),new sr.ERR_OUT_OF_RANGE(t||"offset","an integer",r)):e<0?new sr.ERR_BUFFER_OUT_OF_BOUNDS:new sr.ERR_OUT_OF_RANGE(t||"offset",`>= ${t?1:0} and <= ${e}`,r)}var cp=/[^+/0-9A-Za-z-_]/g;function lp(r){if(r=r.split("=")[0],r=r.trim().replace(cp,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function Ci(r,e){e=e||1/0;let t,n=r.length,i=null,o=[];for(let s=0;s<n;++s){if(t=r.charCodeAt(s),t>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&o.push(239,191,189),i=t;continue}t=(i-55296<<10|t-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;o.push(t)}else if(t<2048){if((e-=2)<0)break;o.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;o.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return o}function hp(r){let e=[];for(let t=0;t<r.length;++t)e.push(r.charCodeAt(t)&255);return e}function pp(r,e){let t,n,i,o=[];for(let s=0;s<r.length&&!((e-=2)<0);++s)t=r.charCodeAt(s),n=t>>8,i=t%256,o.push(i),o.push(n);return o}function xs(r){return Ti.toByteArray(lp(r))}function wn(r,e,t,n){let i;for(i=0;i<n&&!(i+t>=e.length||i>=r.length);++i)e[i+t]=r[i];return i}function $e(r,e){return r instanceof e||r!=null&&r.constructor!=null&&r.constructor.name!=null&&r.constructor.name===e.name}function Ui(r){return r!==r}var dp=function(){let r="0123456789abcdef",e=new Array(256);for(let t=0;t<16;++t){let n=t*16;for(let i=0;i<16;++i)e[n+i]=r[t]+r[i]}return e}();function lt(r){return typeof BigInt>"u"?mp:r}function mp(){throw new Error("BigInt not supported")}});function Y(r){return r!=null&&typeof r=="object"&&r["@@functional/placeholder"]===!0}function ae(r){return function e(t){return arguments.length===0||Y(t)?e:r.apply(this,arguments)}}function K(r){return function e(t,n){switch(arguments.length){case 0:return e;case 1:return Y(t)?e:ae(function(i){return r(t,i)});default:return Y(t)&&Y(n)?e:Y(t)?ae(function(i){return r(i,n)}):Y(n)?ae(function(i){return r(t,i)}):r(t,n)}}}function Wr(r,e){switch(r){case 0:return function(){return e.apply(this,arguments)};case 1:return function(t){return e.apply(this,arguments)};case 2:return function(t,n){return e.apply(this,arguments)};case 3:return function(t,n,i){return e.apply(this,arguments)};case 4:return function(t,n,i,o){return e.apply(this,arguments)};case 5:return function(t,n,i,o,s){return e.apply(this,arguments)};case 6:return function(t,n,i,o,s,u){return e.apply(this,arguments)};case 7:return function(t,n,i,o,s,u,l){return e.apply(this,arguments)};case 8:return function(t,n,i,o,s,u,l,p){return e.apply(this,arguments)};case 9:return function(t,n,i,o,s,u,l,p,m){return e.apply(this,arguments)};case 10:return function(t,n,i,o,s,u,l,p,m,y){return e.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function uo(r,e,t){return function(){for(var n=[],i=0,o=r,s=0,u=!1;s<e.length||i<arguments.length;){var l;s<e.length&&(!Y(e[s])||i>=arguments.length)?l=e[s]:(l=arguments[i],i+=1),n[s]=l,Y(l)?u=!0:o-=1,s+=1}return!u&&o<=0?t.apply(this,n):Wr(Math.max(0,o),uo(r,n,t))}}var nu=K(function(r,e){return r===1?ae(e):Wr(r,uo(r,[],e))}),fo=nu;function Un(r){return function e(t,n,i){switch(arguments.length){case 0:return e;case 1:return Y(t)?e:K(function(o,s){return r(t,o,s)});case 2:return Y(t)&&Y(n)?e:Y(t)?K(function(o,s){return r(o,n,s)}):Y(n)?K(function(o,s){return r(t,o,s)}):ae(function(o){return r(t,n,o)});default:return Y(t)&&Y(n)&&Y(i)?e:Y(t)&&Y(n)?K(function(o,s){return r(o,s,i)}):Y(t)&&Y(i)?K(function(o,s){return r(o,n,s)}):Y(n)&&Y(i)?K(function(o,s){return r(t,o,s)}):Y(t)?ae(function(o){return r(o,n,i)}):Y(n)?ae(function(o){return r(t,o,i)}):Y(i)?ae(function(o){return r(t,n,o)}):r(t,n,i)}}}var Fn=Array.isArray||function(r){return r!=null&&r.length>=0&&Object.prototype.toString.call(r)==="[object Array]"};function iu(r){return r!=null&&typeof r["@@transducer/step"]=="function"}function jn(r,e,t){return function(){if(arguments.length===0)return t();var n=arguments[arguments.length-1];if(!Fn(n)){for(var i=0;i<r.length;){if(typeof n[r[i]]=="function")return n[r[i]].apply(n,Array.prototype.slice.call(arguments,0,-1));i+=1}if(iu(n)){var o=e.apply(null,Array.prototype.slice.call(arguments,0,-1));return o(n)}}return t.apply(this,arguments)}}function ou(r){return r&&r["@@transducer/reduced"]?r:{"@@transducer/value":r,"@@transducer/reduced":!0}}var yr={init:function(){return this.xf["@@transducer/init"]()},result:function(r){return this.xf["@@transducer/result"](r)}};function Ji(r){for(var e=[],t;!(t=r.next()).done;)e.push(t.value);return e}function Qi(r,e,t){for(var n=0,i=t.length;n<i;){if(r(e,t[n]))return!0;n+=1}return!1}function au(r){var e=String(r).match(/^function (\w*)/);return e==null?"":e[1]}function Nr(r,e){return Object.prototype.hasOwnProperty.call(e,r)}function su(r,e){return r===e?r!==0||1/r===1/e:r!==r&&e!==e}var In=typeof Object.is=="function"?Object.is:su,eo=Object.prototype.toString,uu=function(){return eo.call(arguments)==="[object Arguments]"?function(r){return eo.call(r)==="[object Arguments]"}:function(r){return Nr("callee",r)}}(),fu=uu,cu=!{toString:null}.propertyIsEnumerable("toString"),to=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],ro=function(){"use strict";return arguments.propertyIsEnumerable("length")}(),lu=function(r,e){for(var t=0;t<r.length;){if(r[t]===e)return!0;t+=1}return!1},hu=ae(typeof Object.keys=="function"&&!ro?function(r){return Object(r)!==r?[]:Object.keys(r)}:function(r){if(Object(r)!==r)return[];var e,t,n=[],i=ro&&fu(r);for(e in r)Nr(e,r)&&(!i||e!=="length")&&(n[n.length]=e);if(cu)for(t=to.length-1;t>=0;)e=to[t],Nr(e,r)&&!lu(n,e)&&(n[n.length]=e),t-=1;return n}),Zt=hu,pu=ae(function(r){return r===null?"Null":r===void 0?"Undefined":Object.prototype.toString.call(r).slice(8,-1)}),no=pu;function io(r,e,t,n){var i=Ji(r),o=Ji(e);function s(u,l){return Ln(u,l,t.slice(),n.slice())}return!Qi(function(u,l){return!Qi(s,l,u)},o,i)}function Ln(r,e,t,n){if(In(r,e))return!0;var i=no(r);if(i!==no(e))return!1;if(typeof r["fantasy-land/equals"]=="function"||typeof e["fantasy-land/equals"]=="function")return typeof r["fantasy-land/equals"]=="function"&&r["fantasy-land/equals"](e)&&typeof e["fantasy-land/equals"]=="function"&&e["fantasy-land/equals"](r);if(typeof r.equals=="function"||typeof e.equals=="function")return typeof r.equals=="function"&&r.equals(e)&&typeof e.equals=="function"&&e.equals(r);switch(i){case"Arguments":case"Array":case"Object":if(typeof r.constructor=="function"&&au(r.constructor)==="Promise")return r===e;break;case"Boolean":case"Number":case"String":if(!(typeof r==typeof e&&In(r.valueOf(),e.valueOf())))return!1;break;case"Date":if(!In(r.valueOf(),e.valueOf()))return!1;break;case"Error":return r.name===e.name&&r.message===e.message;case"RegExp":if(!(r.source===e.source&&r.global===e.global&&r.ignoreCase===e.ignoreCase&&r.multiline===e.multiline&&r.sticky===e.sticky&&r.unicode===e.unicode))return!1;break}for(var o=t.length-1;o>=0;){if(t[o]===r)return n[o]===e;o-=1}switch(i){case"Map":return r.size!==e.size?!1:io(r.entries(),e.entries(),t.concat([r]),n.concat([e]));case"Set":return r.size!==e.size?!1:io(r.values(),e.values(),t.concat([r]),n.concat([e]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var s=Zt(r);if(s.length!==Zt(e).length)return!1;var u=t.concat([r]),l=n.concat([e]);for(o=s.length-1;o>=0;){var p=s[o];if(!(Nr(p,e)&&Ln(e[p],r[p],u,l)))return!1;o-=1}return!0}var du=K(function(r,e){return Ln(r,e,[],[])}),co=du;function mu(r,e,t){var n,i;if(typeof r.indexOf=="function")switch(typeof e){case"number":if(e===0){for(n=1/e;t<r.length;){if(i=r[t],i===0&&1/i===n)return t;t+=1}return-1}else if(e!==e){for(;t<r.length;){if(i=r[t],typeof i=="number"&&i!==i)return t;t+=1}return-1}return r.indexOf(e,t);case"string":case"boolean":case"function":case"undefined":return r.indexOf(e,t);case"object":if(e===null)return r.indexOf(e,t)}for(;t<r.length;){if(co(r[t],e))return t;t+=1}return-1}function yu(r,e){return mu(e,r,0)>=0}function mr(r,e){for(var t=0,n=e.length,i=Array(n);t<n;)i[t]=r(e[t]),t+=1;return i}function Bn(r){var e=r.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0");return'"'+e.replace(/"/g,'\\"')+'"'}var pr=function(r){return(r<10?"0":"")+r},gu=typeof Date.prototype.toISOString=="function"?function(r){return r.toISOString()}:function(r){return r.getUTCFullYear()+"-"+pr(r.getUTCMonth()+1)+"-"+pr(r.getUTCDate())+"T"+pr(r.getUTCHours())+":"+pr(r.getUTCMinutes())+":"+pr(r.getUTCSeconds())+"."+(r.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"},wu=gu;function vu(r){return function(){return!r.apply(this,arguments)}}function lo(r,e,t){for(var n=0,i=t.length;n<i;)e=r(e,t[n]),n+=1;return e}function xu(r,e){for(var t=0,n=e.length,i=[];t<n;)r(e[t])&&(i[i.length]=e[t]),t+=1;return i}function _u(r){return Object.prototype.toString.call(r)==="[object Object]"}var bu=function(){function r(e,t){this.xf=t,this.f=e}return r.prototype["@@transducer/init"]=yr.init,r.prototype["@@transducer/result"]=yr.result,r.prototype["@@transducer/step"]=function(e,t){return this.f(t)?this.xf["@@transducer/step"](e,t):e},r}();function Eu(r){return function(e){return new bu(r,e)}}var Au=K(jn(["fantasy-land/filter","filter"],Eu,function(r,e){return _u(e)?lo(function(t,n){return r(e[n])&&(t[n]=e[n]),t},{},Zt(e)):xu(r,e)})),Su=Au,Tu=K(function(r,e){return Su(vu(r),e)}),Iu=Tu;function ho(r,e){var t=function(o){var s=e.concat([r]);return yu(o,s)?"<Circular>":ho(o,s)},n=function(o,s){return mr(function(u){return Bn(u)+": "+t(o[u])},s.slice().sort())};switch(Object.prototype.toString.call(r)){case"[object Arguments]":return"(function() { return arguments; }("+mr(t,r).join(", ")+"))";case"[object Array]":return"["+mr(t,r).concat(n(r,Iu(function(o){return/^\d+$/.test(o)},Zt(r)))).join(", ")+"]";case"[object Boolean]":return typeof r=="object"?"new Boolean("+t(r.valueOf())+")":r.toString();case"[object Date]":return"new Date("+(isNaN(r.valueOf())?t(NaN):Bn(wu(r)))+")";case"[object Map]":return"new Map("+t(Array.from(r))+")";case"[object Null]":return"null";case"[object Number]":return typeof r=="object"?"new Number("+t(r.valueOf())+")":1/r===-1/0?"-0":r.toString(10);case"[object Set]":return"new Set("+t(Array.from(r).sort())+")";case"[object String]":return typeof r=="object"?"new String("+t(r.valueOf())+")":Bn(r);case"[object Undefined]":return"undefined";default:if(typeof r.toString=="function"){var i=r.toString();if(i!=="[object Object]")return i}return"{"+n(r,Zt(r)).join(", ")+"}"}}var Bu=ae(function(r){return ho(r,[])}),oo=Bu,Cu=K(function(r,e){if(r===e)return e;function t(u,l){if(u>l!=l>u)return l>u?l:u}var n=t(r,e);if(n!==void 0)return n;var i=t(typeof r,typeof e);if(i!==void 0)return i===typeof r?r:e;var o=oo(r),s=t(o,oo(e));return s!==void 0&&s===o?r:e}),Ou=Cu,ku=function(){function r(e,t){this.xf=t,this.f=e}return r.prototype["@@transducer/init"]=yr.init,r.prototype["@@transducer/result"]=yr.result,r.prototype["@@transducer/step"]=function(e,t){return this.xf["@@transducer/step"](e,this.f(t))},r}(),Ru=function(r){return function(e){return new ku(r,e)}},Uu=Ru,Fu=K(jn(["fantasy-land/map","map"],Uu,function(r,e){switch(Object.prototype.toString.call(e)){case"[object Function]":return fo(e.length,function(){return r.call(this,e.apply(this,arguments))});case"[object Object]":return lo(function(t,n){return t[n]=r(e[n]),t},{},Zt(e));default:return mr(r,e)}})),ju=Fu,po=Number.isInteger||function(r){return r<<0===r};function mo(r){return Object.prototype.toString.call(r)==="[object String]"}var Lu=K(function(r,e){var t=r<0?e.length+r:r;return mo(e)?e.charAt(t):e[t]}),yo=Lu,Pu=K(function(r,e){if(e!=null)return po(r)?yo(r,e):e[r]}),$r=Pu,Nu=K(function(r,e){return ju($r(r),e)}),Mu=Nu,Du=ae(function(r){return Fn(r)?!0:!r||typeof r!="object"||mo(r)?!1:r.length===0?!0:r.length>0?r.hasOwnProperty(0)&&r.hasOwnProperty(r.length-1):!1}),Wu=Du,ao=typeof Symbol<"u"?Symbol.iterator:"@@iterator";function $u(r,e,t){return function(n,i,o){if(Wu(o))return r(n,i,o);if(o==null)return i;if(typeof o["fantasy-land/reduce"]=="function")return e(n,i,o,"fantasy-land/reduce");if(o[ao]!=null)return t(n,i,o[ao]());if(typeof o.next=="function")return t(n,i,o);if(typeof o.reduce=="function")return e(n,i,o,"reduce");throw new TypeError("reduce: list must be array or iterable")}}function zu(r,e,t){for(var n=0,i=t.length;n<i;){if(e=r["@@transducer/step"](e,t[n]),e&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}n+=1}return r["@@transducer/result"](e)}var Zu=K(function(r,e){return Wr(r.length,function(){return r.apply(e,arguments)})}),qu=Zu;function Vu(r,e,t){for(var n=t.next();!n.done;){if(e=r["@@transducer/step"](e,n.value),e&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}n=t.next()}return r["@@transducer/result"](e)}function Gu(r,e,t,n){return r["@@transducer/result"](t[n](qu(r["@@transducer/step"],r),e))}var Yu=$u(zu,Gu,Vu),Hu=Yu,Ku=function(){function r(e){this.f=e}return r.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},r.prototype["@@transducer/result"]=function(e){return e},r.prototype["@@transducer/step"]=function(e,t){return this.f(e,t)},r}();function Xu(r){return new Ku(r)}var Ju=Un(function(r,e,t){return Hu(typeof r=="function"?Xu(r):r,e,t)}),go=Ju;function Qu(r,e){return function(){return e.call(this,r.apply(this,arguments))}}function wo(r,e){return function(){var t=arguments.length;if(t===0)return e();var n=arguments[t-1];return Fn(n)||typeof n[r]!="function"?e.apply(this,arguments):n[r].apply(n,Array.prototype.slice.call(arguments,0,t-1))}}var ef=Un(wo("slice",function(r,e,t){return Array.prototype.slice.call(t,r,e)})),tf=ef,rf=ae(wo("tail",tf(1,1/0))),nf=rf;function vo(){if(arguments.length===0)throw new Error("pipe requires at least one argument");return Wr(arguments[0].length,go(Qu,arguments[0],nf(arguments)))}var of=K(function(r,e){return fo(go(Ou,0,Mu("length",e)),function(){var t=arguments,n=this;return r.apply(n,mr(function(i){return i.apply(n,t)},e))})}),af=of,sf=K(function(r,e){return e==null||e!==e?r:e}),Cn=sf,uf=function(){function r(e,t){this.xf=t,this.f=e,this.found=!1}return r.prototype["@@transducer/init"]=yr.init,r.prototype["@@transducer/result"]=function(e){return this.found||(e=this.xf["@@transducer/step"](e,void 0)),this.xf["@@transducer/result"](e)},r.prototype["@@transducer/step"]=function(e,t){return this.f(t)&&(this.found=!0,e=ou(this.xf["@@transducer/step"](e,t))),e},r}();function ff(r){return function(e){return new uf(r,e)}}var cf=K(jn(["find"],ff,function(r,e){for(var t=0,n=e.length;t<n;){if(r(e[t]))return e[t];t+=1}})),lf=cf,hf=ae(function(r){return af(function(){return Array.prototype.slice.call(arguments,0)},r)}),pf=hf,df=K(function(r,e){return r.map(function(t){for(var n=e,i=0,o;i<t.length;){if(n==null)return;o=t[i],n=po(o)?yo(o,n):n[o],i+=1}return n})}),mf=df,yf=K(function(r,e){return mf([r],e)[0]}),xo=yf,gf=Un(function(r,e,t){return co(r,$r(e,t))}),wf=gf,Mr=class extends Error{},vf=class extends Error{},xf=class extends Error{},_f="Url",bf="Time-To-Live",Ef="Scheduler",On=r=>vo(Cn([]),lf(wf(r,"name")),Cn({}),$r("value")),_o=r=>vo(e=>{if(!e)throw new xf(r);return e},$r("tags"),Cn([]));function bo({fetch:r,GATEWAY_URL:e}){return async({query:t,variables:n})=>r(`${e}/graphql`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:t,variables:n})}).then(i=>i.json())}function Af({fetch:r,GATEWAY_URL:e}){let t=bo({fetch:r,GATEWAY_URL:e}),n=kn({fetch:r,GATEWAY_URL:e}),i=`
    query GetTransactions ($transactionIds: [ID!]!) {
      transactions(ids: $transactionIds) {
        edges {
          node {
            tags {
              name
              value
            }
          }
        }
      }
    }
  `;return async o=>t({query:i,variables:{transactionIds:[o]}}).then(xo(["data","transactions","edges","0","node"])).then(_o(`Process ${o} was not found on gateway ${e}`)).then(On(Ef)).then(s=>{if(!s)throw new vf('No "Scheduler" tag found on process');return n(s)})}function kn({fetch:r,GATEWAY_URL:e}){let t=bo({fetch:r,GATEWAY_URL:e}),n=`
    query GetSchedulerLocation ($owner: String!) {
      transactions (
        owners: [$owner]
        tags: [
          { name: "Data-Protocol", values: ["ao"] },
          { name: "Type", values: ["Scheduler-Location"] }
        ]
        # Only need the most recent Scheduler-Location
        sort: HEIGHT_DESC
        first: 1
      ) {
        edges {
          node {
            tags {
              name
              value
            }
          }
        }
      }
    }
  `;return async i=>t({query:n,variables:{owner:i}}).then(xo(["data","transactions","edges","0","node"])).then(_o(`Could not find 'Scheduler-Location' owner by wallet ${i}`)).then(pf([On(_f),On(bf)])).then(([o,s])=>{if(!o)throw new Mr('No "Url" tag found on Scheduler-Location');if(!s)throw new Mr('No "Time-To-Live" tag found on Scheduler-Location');return{url:o,ttl:s,owner:i}})}var zt=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,Eo=new Set,Rn=typeof process=="object"&&process?process:{},Ao=(r,e,t,n)=>{typeof Rn.emitWarning=="function"?Rn.emitWarning(r,e,t,n):console.error(`[${t}] ${e}: ${r}`)},Dr=globalThis.AbortController,so=globalThis.AbortSignal;if(typeof Dr>"u"){so=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(t,n){this._onabort.push(n)}},Dr=class{constructor(){e()}signal=new so;abort(t){if(!this.signal.aborted){this.signal.reason=t,this.signal.aborted=!0;for(let n of this.signal._onabort)n(t);this.signal.onabort?.(t)}}};let r=Rn.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{r&&(r=!1,Ao("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var Sf=r=>!Eo.has(r),Vp=Symbol("type"),rt=r=>r&&r===Math.floor(r)&&r>0&&isFinite(r),So=r=>rt(r)?r<=Math.pow(2,8)?Uint8Array:r<=Math.pow(2,16)?Uint16Array:r<=Math.pow(2,32)?Uint32Array:r<=Number.MAX_SAFE_INTEGER?Pr:null:null,Pr=class extends Array{constructor(r){super(r),this.fill(0)}},Tf=class dr{heap;length;static#u=!1;static create(e){let t=So(e);if(!t)return[];dr.#u=!0;let n=new dr(e,t);return dr.#u=!1,n}constructor(e,t){if(!dr.#u)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new t(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},If=class To{#u;#l;#m;#y;#C;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#i;#g;#n;#r;#e;#f;#h;#s;#o;#w;#a;#v;#x;#p;#_;#S;#c;static unsafeExposeInternals(e){return{starts:e.#x,ttls:e.#p,sizes:e.#v,keyMap:e.#n,keyList:e.#r,valList:e.#e,next:e.#f,prev:e.#h,get head(){return e.#s},get tail(){return e.#o},free:e.#w,isBackgroundFetch:t=>e.#t(t),backgroundFetch:(t,n,i,o)=>e.#R(t,n,i,o),moveToTail:t=>e.#B(t),indexes:t=>e.#b(t),rindexes:t=>e.#E(t),isStale:t=>e.#d(t)}}get max(){return this.#u}get maxSize(){return this.#l}get calculatedSize(){return this.#g}get size(){return this.#i}get fetchMethod(){return this.#C}get dispose(){return this.#m}get disposeAfter(){return this.#y}constructor(e){let{max:t=0,ttl:n,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:s,updateAgeOnHas:u,allowStale:l,dispose:p,disposeAfter:m,noDisposeOnSet:y,noUpdateTTL:x,maxSize:E=0,maxEntrySize:S=0,sizeCalculation:A,fetchMethod:T,noDeleteOnFetchRejection:C,noDeleteOnStaleGet:M,allowStaleOnFetchRejection:D,allowStaleOnFetchAbort:P,ignoreFetchAbort:q}=e;if(t!==0&&!rt(t))throw new TypeError("max option must be a nonnegative integer");let Z=t?So(t):Array;if(!Z)throw new Error("invalid max value: "+t);if(this.#u=t,this.#l=E,this.maxEntrySize=S||this.#l,this.sizeCalculation=A,this.sizeCalculation){if(!this.#l&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(T!==void 0&&typeof T!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#C=T,this.#S=!!T,this.#n=new Map,this.#r=new Array(t).fill(void 0),this.#e=new Array(t).fill(void 0),this.#f=new Z(t),this.#h=new Z(t),this.#s=0,this.#o=0,this.#w=Tf.create(t),this.#i=0,this.#g=0,typeof p=="function"&&(this.#m=p),typeof m=="function"?(this.#y=m,this.#a=[]):(this.#y=void 0,this.#a=void 0),this.#_=!!this.#m,this.#c=!!this.#y,this.noDisposeOnSet=!!y,this.noUpdateTTL=!!x,this.noDeleteOnFetchRejection=!!C,this.allowStaleOnFetchRejection=!!D,this.allowStaleOnFetchAbort=!!P,this.ignoreFetchAbort=!!q,this.maxEntrySize!==0){if(this.#l!==0&&!rt(this.#l))throw new TypeError("maxSize must be a positive integer if specified");if(!rt(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#N()}if(this.allowStale=!!l,this.noDeleteOnStaleGet=!!M,this.updateAgeOnGet=!!s,this.updateAgeOnHas=!!u,this.ttlResolution=rt(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=n||0,this.ttl){if(!rt(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#U()}if(this.#u===0&&this.ttl===0&&this.#l===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#u&&!this.#l){let me="LRU_CACHE_UNBOUNDED";Sf(me)&&(Eo.add(me),Ao("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",me,To))}}getRemainingTTL(e){return this.#n.has(e)?1/0:0}#U(){let e=new Pr(this.#u),t=new Pr(this.#u);this.#p=e,this.#x=t,this.#F=(o,s,u=zt.now())=>{if(t[o]=s!==0?u:0,e[o]=s,s!==0&&this.ttlAutopurge){let l=setTimeout(()=>{this.#d(o)&&this.delete(this.#r[o])},s+1);l.unref&&l.unref()}},this.#T=o=>{t[o]=e[o]!==0?zt.now():0},this.#A=(o,s)=>{if(e[s]){let u=e[s],l=t[s];if(!u||!l)return;o.ttl=u,o.start=l,o.now=n||i();let p=o.now-l;o.remainingTTL=u-p}};let n=0,i=()=>{let o=zt.now();if(this.ttlResolution>0){n=o;let s=setTimeout(()=>n=0,this.ttlResolution);s.unref&&s.unref()}return o};this.getRemainingTTL=o=>{let s=this.#n.get(o);if(s===void 0)return 0;let u=e[s],l=t[s];if(!u||!l)return 1/0;let p=(n||i())-l;return u-p},this.#d=o=>{let s=t[o],u=e[o];return!!u&&!!s&&(n||i())-s>u}}#T=()=>{};#A=()=>{};#F=()=>{};#d=()=>!1;#N(){let e=new Pr(this.#u);this.#g=0,this.#v=e,this.#I=t=>{this.#g-=e[t],e[t]=0},this.#j=(t,n,i,o)=>{if(this.#t(n))return 0;if(!rt(i))if(o){if(typeof o!="function")throw new TypeError("sizeCalculation must be a function");if(i=o(n,t),!rt(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#O=(t,n,i)=>{if(e[t]=n,this.#l){let o=this.#l-e[t];for(;this.#g>o;)this.#k(!0)}this.#g+=e[t],i&&(i.entrySize=n,i.totalCalculatedSize=this.#g)}}#I=e=>{};#O=(e,t,n)=>{};#j=(e,t,n,i)=>{if(n||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#b({allowStale:e=this.allowStale}={}){if(this.#i)for(let t=this.#o;!(!this.#L(t)||((e||!this.#d(t))&&(yield t),t===this.#s));)t=this.#h[t]}*#E({allowStale:e=this.allowStale}={}){if(this.#i)for(let t=this.#s;!(!this.#L(t)||((e||!this.#d(t))&&(yield t),t===this.#o));)t=this.#f[t]}#L(e){return e!==void 0&&this.#n.get(this.#r[e])===e}*entries(){for(let e of this.#b())this.#e[e]!==void 0&&this.#r[e]!==void 0&&!this.#t(this.#e[e])&&(yield[this.#r[e],this.#e[e]])}*rentries(){for(let e of this.#E())this.#e[e]!==void 0&&this.#r[e]!==void 0&&!this.#t(this.#e[e])&&(yield[this.#r[e],this.#e[e]])}*keys(){for(let e of this.#b()){let t=this.#r[e];t!==void 0&&!this.#t(this.#e[e])&&(yield t)}}*rkeys(){for(let e of this.#E()){let t=this.#r[e];t!==void 0&&!this.#t(this.#e[e])&&(yield t)}}*values(){for(let e of this.#b())this.#e[e]!==void 0&&!this.#t(this.#e[e])&&(yield this.#e[e])}*rvalues(){for(let e of this.#E())this.#e[e]!==void 0&&!this.#t(this.#e[e])&&(yield this.#e[e])}[Symbol.iterator](){return this.entries()}find(e,t={}){for(let n of this.#b()){let i=this.#e[n],o=this.#t(i)?i.__staleWhileFetching:i;if(o!==void 0&&e(o,this.#r[n],this))return this.get(this.#r[n],t)}}forEach(e,t=this){for(let n of this.#b()){let i=this.#e[n],o=this.#t(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(t,o,this.#r[n],this)}}rforEach(e,t=this){for(let n of this.#E()){let i=this.#e[n],o=this.#t(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(t,o,this.#r[n],this)}}purgeStale(){let e=!1;for(let t of this.#E({allowStale:!0}))this.#d(t)&&(this.delete(this.#r[t]),e=!0);return e}info(e){let t=this.#n.get(e);if(t===void 0)return;let n=this.#e[t],i=this.#t(n)?n.__staleWhileFetching:n;if(i===void 0)return;let o={value:i};if(this.#p&&this.#x){let s=this.#p[t],u=this.#x[t];if(s&&u){let l=s-(zt.now()-u);o.ttl=l,o.start=Date.now()}}return this.#v&&(o.size=this.#v[t]),o}dump(){let e=[];for(let t of this.#b({allowStale:!0})){let n=this.#r[t],i=this.#e[t],o=this.#t(i)?i.__staleWhileFetching:i;if(o===void 0||n===void 0)continue;let s={value:o};if(this.#p&&this.#x){s.ttl=this.#p[t];let u=zt.now()-this.#x[t];s.start=Math.floor(Date.now()-u)}this.#v&&(s.size=this.#v[t]),e.unshift([n,s])}return e}load(e){this.clear();for(let[t,n]of e){if(n.start){let i=Date.now()-n.start;n.start=zt.now()-i}this.set(t,n.value,n)}}set(e,t,n={}){if(t===void 0)return this.delete(e),this;let{ttl:i=this.ttl,start:o,noDisposeOnSet:s=this.noDisposeOnSet,sizeCalculation:u=this.sizeCalculation,status:l}=n,{noUpdateTTL:p=this.noUpdateTTL}=n,m=this.#j(e,t,n.size||0,u);if(this.maxEntrySize&&m>this.maxEntrySize)return l&&(l.set="miss",l.maxEntrySizeExceeded=!0),this.delete(e),this;let y=this.#i===0?void 0:this.#n.get(e);if(y===void 0)y=this.#i===0?this.#o:this.#w.length!==0?this.#w.pop():this.#i===this.#u?this.#k(!1):this.#i,this.#r[y]=e,this.#e[y]=t,this.#n.set(e,y),this.#f[this.#o]=y,this.#h[y]=this.#o,this.#o=y,this.#i++,this.#O(y,m,l),l&&(l.set="add"),p=!1;else{this.#B(y);let x=this.#e[y];if(t!==x){if(this.#S&&this.#t(x)){x.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:E}=x;E!==void 0&&!s&&(this.#_&&this.#m?.(E,e,"set"),this.#c&&this.#a?.push([E,e,"set"]))}else s||(this.#_&&this.#m?.(x,e,"set"),this.#c&&this.#a?.push([x,e,"set"]));if(this.#I(y),this.#O(y,m,l),this.#e[y]=t,l){l.set="replace";let E=x&&this.#t(x)?x.__staleWhileFetching:x;E!==void 0&&(l.oldValue=E)}}else l&&(l.set="update")}if(i!==0&&!this.#p&&this.#U(),this.#p&&(p||this.#F(y,i,o),l&&this.#A(l,y)),!s&&this.#c&&this.#a){let x=this.#a,E;for(;E=x?.shift();)this.#y?.(...E)}return this}pop(){try{for(;this.#i;){let e=this.#e[this.#s];if(this.#k(!0),this.#t(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#c&&this.#a){let e=this.#a,t;for(;t=e?.shift();)this.#y?.(...t)}}}#k(e){let t=this.#s,n=this.#r[t],i=this.#e[t];return this.#S&&this.#t(i)?i.__abortController.abort(new Error("evicted")):(this.#_||this.#c)&&(this.#_&&this.#m?.(i,n,"evict"),this.#c&&this.#a?.push([i,n,"evict"])),this.#I(t),e&&(this.#r[t]=void 0,this.#e[t]=void 0,this.#w.push(t)),this.#i===1?(this.#s=this.#o=0,this.#w.length=0):this.#s=this.#f[t],this.#n.delete(n),this.#i--,t}has(e,t={}){let{updateAgeOnHas:n=this.updateAgeOnHas,status:i}=t,o=this.#n.get(e);if(o!==void 0){let s=this.#e[o];if(this.#t(s)&&s.__staleWhileFetching===void 0)return!1;if(this.#d(o))i&&(i.has="stale",this.#A(i,o));else return n&&this.#T(o),i&&(i.has="hit",this.#A(i,o)),!0}else i&&(i.has="miss");return!1}peek(e,t={}){let{allowStale:n=this.allowStale}=t,i=this.#n.get(e);if(i===void 0||!n&&this.#d(i))return;let o=this.#e[i];return this.#t(o)?o.__staleWhileFetching:o}#R(e,t,n,i){let o=t===void 0?void 0:this.#e[t];if(this.#t(o))return o;let s=new Dr,{signal:u}=n;u?.addEventListener("abort",()=>s.abort(u.reason),{signal:s.signal});let l={signal:s.signal,options:n,context:i},p=(A,T=!1)=>{let{aborted:C}=s.signal,M=n.ignoreFetchAbort&&A!==void 0;if(n.status&&(C&&!T?(n.status.fetchAborted=!0,n.status.fetchError=s.signal.reason,M&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),C&&!M&&!T)return y(s.signal.reason);let D=E;return this.#e[t]===E&&(A===void 0?D.__staleWhileFetching?this.#e[t]=D.__staleWhileFetching:this.delete(e):(n.status&&(n.status.fetchUpdated=!0),this.set(e,A,l.options))),A},m=A=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=A),y(A)),y=A=>{let{aborted:T}=s.signal,C=T&&n.allowStaleOnFetchAbort,M=C||n.allowStaleOnFetchRejection,D=M||n.noDeleteOnFetchRejection,P=E;if(this.#e[t]===E&&(!D||P.__staleWhileFetching===void 0?this.delete(e):C||(this.#e[t]=P.__staleWhileFetching)),M)return n.status&&P.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),P.__staleWhileFetching;if(P.__returned===P)throw A},x=(A,T)=>{let C=this.#C?.(e,o,l);C&&C instanceof Promise&&C.then(M=>A(M===void 0?void 0:M),T),s.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(A(void 0),n.allowStaleOnFetchAbort&&(A=M=>p(M,!0)))})};n.status&&(n.status.fetchDispatched=!0);let E=new Promise(x).then(p,m),S=Object.assign(E,{__abortController:s,__staleWhileFetching:o,__returned:void 0});return t===void 0?(this.set(e,S,{...l.options,status:void 0}),t=this.#n.get(e)):this.#e[t]=S,S}#t(e){if(!this.#S)return!1;let t=e;return!!t&&t instanceof Promise&&t.hasOwnProperty("__staleWhileFetching")&&t.__abortController instanceof Dr}async fetch(e,t={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:s=this.ttl,noDisposeOnSet:u=this.noDisposeOnSet,size:l=0,sizeCalculation:p=this.sizeCalculation,noUpdateTTL:m=this.noUpdateTTL,noDeleteOnFetchRejection:y=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:x=this.allowStaleOnFetchRejection,ignoreFetchAbort:E=this.ignoreFetchAbort,allowStaleOnFetchAbort:S=this.allowStaleOnFetchAbort,context:A,forceRefresh:T=!1,status:C,signal:M}=t;if(!this.#S)return C&&(C.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,status:C});let D={allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,ttl:s,noDisposeOnSet:u,size:l,sizeCalculation:p,noUpdateTTL:m,noDeleteOnFetchRejection:y,allowStaleOnFetchRejection:x,allowStaleOnFetchAbort:S,ignoreFetchAbort:E,status:C,signal:M},P=this.#n.get(e);if(P===void 0){C&&(C.fetch="miss");let q=this.#R(e,P,D,A);return q.__returned=q}else{let q=this.#e[P];if(this.#t(q)){let Dt=n&&q.__staleWhileFetching!==void 0;return C&&(C.fetch="inflight",Dt&&(C.returnedStale=!0)),Dt?q.__staleWhileFetching:q.__returned=q}let Z=this.#d(P);if(!T&&!Z)return C&&(C.fetch="hit"),this.#B(P),i&&this.#T(P),C&&this.#A(C,P),q;let me=this.#R(e,P,D,A),pt=me.__staleWhileFetching!==void 0&&n;return C&&(C.fetch=Z?"stale":"refresh",pt&&Z&&(C.returnedStale=!0)),pt?me.__staleWhileFetching:me.__returned=me}}get(e,t={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,status:s}=t,u=this.#n.get(e);if(u!==void 0){let l=this.#e[u],p=this.#t(l);return s&&this.#A(s,u),this.#d(u)?(s&&(s.get="stale"),p?(s&&n&&l.__staleWhileFetching!==void 0&&(s.returnedStale=!0),n?l.__staleWhileFetching:void 0):(o||this.delete(e),s&&n&&(s.returnedStale=!0),n?l:void 0)):(s&&(s.get="hit"),p?l.__staleWhileFetching:(this.#B(u),i&&this.#T(u),l))}else s&&(s.get="miss")}#P(e,t){this.#h[t]=e,this.#f[e]=t}#B(e){e!==this.#o&&(e===this.#s?this.#s=this.#f[e]:this.#P(this.#h[e],this.#f[e]),this.#P(this.#o,e),this.#o=e)}delete(e){let t=!1;if(this.#i!==0){let n=this.#n.get(e);if(n!==void 0)if(t=!0,this.#i===1)this.clear();else{this.#I(n);let i=this.#e[n];if(this.#t(i)?i.__abortController.abort(new Error("deleted")):(this.#_||this.#c)&&(this.#_&&this.#m?.(i,e,"delete"),this.#c&&this.#a?.push([i,e,"delete"])),this.#n.delete(e),this.#r[n]=void 0,this.#e[n]=void 0,n===this.#o)this.#o=this.#h[n];else if(n===this.#s)this.#s=this.#f[n];else{let o=this.#h[n];this.#f[o]=this.#f[n];let s=this.#f[n];this.#h[s]=this.#h[n]}this.#i--,this.#w.push(n)}}if(this.#c&&this.#a?.length){let n=this.#a,i;for(;i=n?.shift();)this.#y?.(...i)}return t}clear(){for(let e of this.#E({allowStale:!0})){let t=this.#e[e];if(this.#t(t))t.__abortController.abort(new Error("deleted"));else{let n=this.#r[e];this.#_&&this.#m?.(t,n,"delete"),this.#c&&this.#a?.push([t,n,"delete"])}}if(this.#n.clear(),this.#e.fill(void 0),this.#r.fill(void 0),this.#p&&this.#x&&(this.#p.fill(0),this.#x.fill(0)),this.#v&&this.#v.fill(0),this.#s=0,this.#o=0,this.#w.length=0,this.#g=0,this.#i=0,this.#c&&this.#a){let e=this.#a,t;for(;t=e?.shift();)this.#y?.(...t)}}},dt,gr;function Bf({size:r}){return dt||(gr=r,dt=new If({max:r,maxSize:1e6*5,sizeCalculation:e=>JSON.stringify(e).length,allowStale:!0}),dt)}function Cf({cache:r=dt}){return async e=>{if(gr)return r.get(e)}}function Of({cache:r=dt}){return async(e,{url:t,address:n},i)=>{if(gr)return r.set(e,{url:t,address:n},{ttl:i})}}function kf({cache:r=dt}){return async e=>{if(gr)return r.get(e)}}function Rf({cache:r=dt}){return async(e,t,n)=>{if(gr)return r.set(e,{url:t,address:e},{ttl:n})}}function Uf({loadProcessScheduler:r,cache:e}){return t=>e.getByProcess(t).then(n=>n||r(t).then(i=>{let o={url:i.url,address:i.owner};return Promise.all([e.setByProcess(t,o,i.ttl),e.setByOwner(i.owner,i.url,i.ttl)]).then(()=>o)}))}function Ff({loadScheduler:r,cache:e}){return t=>e.getByOwner(t).then(n=>n?{url:n.url}:r(t).then(i=>e.setByOwner(t,i.url,i.ttl).then(()=>({url:i.url}))).catch(i=>{if(!(i instanceof Mr))throw i}))}function jf({loadScheduler:r,cache:e}){return t=>e.getByOwner(t).then(n=>n?!0:r(t).then(i=>e.setByOwner(t,i.url,i.ttl)).then(()=>!0).catch(i=>{if(i instanceof Mr)return!1;throw i}))}var Lf=globalThis.GATEWAY_URL||"https://arweave.net";function Pn({cacheSize:r=100,GATEWAY_URL:e=Lf}={}){let t=Bf({size:r}),n=kf({cache:t}),i=Cf({cache:t}),o=Rf({cache:t}),s=Of({cache:t}),u=Uf({loadProcessScheduler:Af({fetch,GATEWAY_URL:e}),cache:{getByProcess:i,getByOwner:n,setByProcess:s,setByOwner:o}}),l=jf({loadScheduler:kn({fetch,GATEWAY_URL:e}),cache:{getByProcess:i,getByOwner:n,setByProcess:s,setByOwner:o}}),p=Ff({loadScheduler:kn({fetch,GATEWAY_URL:e}),cache:{getByProcess:i,getByOwner:n,setByProcess:s,setByOwner:o}});return{locate:u,validate:l,raw:p}}var{locate:Gp,validate:Yp,raw:Hp}=Pn();var Ze=r=>({fork:r,toPromise:()=>new Promise((e,t)=>r(t,e)),map:e=>Ze((t,n)=>r(t,i=>n(e(i)))),bimap:(e,t)=>Ze((n,i)=>r(o=>n(e(o)),o=>i(t(o)))),chain:e=>Ze((t,n)=>r(t,i=>e(i).fork(t,n))),bichain:(e,t)=>Ze((n,i)=>r(o=>e(o).fork(n,i),o=>t(o).fork(n,i))),fold:(e,t)=>Ze((n,i)=>r(o=>e(o).fork(n,i),o=>t(o).fork(n,i)))}),O=r=>Ze((e,t)=>t(r)),_e=r=>Ze((e,t)=>t(r)),Te=r=>Ze((e,t)=>e(r)),N=r=>(...e)=>Ze((t,n)=>r(...e).then(n).catch(t));function Io({fetch:r,MU_URL:e,logger:t}){let n=t.child("deployMessage");return i=>O(i).chain(N(({processId:o,data:s,tags:u,anchor:l,signer:p})=>p({data:s,tags:u,target:o,anchor:l}))).chain(o=>O(o).chain(N(async s=>r(e,{method:"POST",headers:{"Content-Type":"application/octet-stream",Accept:"application/json"},body:s.raw}))).bichain(s=>Te(new Error(`Error while communicating with MU: ${JSON.stringify(s)}`)),N(async s=>{if(s.ok)return s.json();throw new Error(`${s.status}: ${await s.text()}`)})).bimap(n.tap("Error encountered when writing message via MU"),n.tap("Successfully wrote message via MU")).map(s=>({res:s,messageId:o.id}))).toPromise()}function Bo({fetch:r,MU_URL:e,logger:t}){let n=t.child("deployProcess");return i=>O(i).chain(N(({data:o,tags:s,signer:u})=>u({data:o,tags:s}))).chain(o=>O(o).chain(N(async s=>r(e,{method:"POST",headers:{"Content-Type":"application/octet-stream",Accept:"application/json"},body:s.raw}))).bichain(s=>Te(new Error(`Error while communicating with MU: ${JSON.stringify(s)}`)),N(async s=>{if(s.ok)return s.json();throw new Error(`${s.status}: ${await s.text()}`)})).bimap(n.tap("Error encountered when deploying process via MU"),n.tap("Successfully deployed process via MU")).map(s=>({res:s,processId:o.id}))).toPromise()}function Co({fetch:r,MU_URL:e,logger:t}){let n=t.child("deployMonitor");return i=>O(i).chain(N(({processId:o,data:s,tags:u,anchor:l,signer:p})=>p({data:s,tags:u,target:o,anchor:l}))).chain(o=>O(o).chain(N(async s=>r(e+"/monitor/"+i.processId,{method:"POST",headers:{"Content-Type":"application/octet-stream",Accept:"application/json"},body:s.raw}))).bichain(s=>Te(new Error(`Error while communicating with MU: ${JSON.stringify(s)}`)),N(async s=>{if(s.ok)return{ok:!0};throw new Error(`${s.status}: ${await s.text()}`)})).bimap(n.tap("Error encountered when subscribing to process via MU"),n.tap("Successfully subscribed to process via MU")).map(s=>({res:s,messageId:o.id}))).toPromise()}function Oo({fetch:r,MU_URL:e,logger:t}){let n=t.child("deployUnmonitor");return i=>O(i).chain(N(({processId:o,data:s,tags:u,anchor:l,signer:p})=>p({data:s,tags:u,target:o,anchor:l}))).chain(o=>O(o).chain(N(async s=>r(e+"/monitor/"+i.processId,{method:"DELETE",headers:{"Content-Type":"application/octet-stream",Accept:"application/json"},body:s.raw}))).bichain(s=>Te(new Error(`Error while communicating with MU: ${JSON.stringify(s)}`)),N(async s=>{if(s.ok)return{ok:!0};throw new Error(`${s.status}: ${await s.text()}`)})).bimap(n.tap("Error encountered when unsubscribing to process via MU"),n.tap("Successfully unsubscribed to process via MU")).map(s=>({res:s,messageId:o.id}))).toPromise()}function ko({fetch:r,CU_URL:e,logger:t}){return n=>O(n).map(t.tap("posting dryrun request to CU")).chain(N(i=>r(`${e}/dry-run?process-id=${i.Target}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(o=>o.json()))).toPromise()}function Ro({fetch:r,CU_URL:e,logger:t}){return({id:n,processId:i})=>O(`${e}/result/${n}?process-id=${i}`).map(t.tap("fetching message result from CU")).chain(N(async o=>r(o,{method:"GET",headers:{Accept:"application/json"}}).then(s=>s.json()))).toPromise()}function Uo({fetch:r,CU_URL:e,logger:t}){return({process:n,from:i,to:o,sort:s,limit:u})=>{let l=new URL(`${e}/results/${n}`),p=new URLSearchParams(l.search);return i&&p.append("from",i),o&&p.append("to",o),s&&p.append("sort",s),u&&p.append("limit",u),l.search=p,O(l.toString()).map(t.tap("fetching message result from CU")).chain(N(async m=>r(m,{method:"GET",headers:{Accept:"application/json"}}).then(y=>y.json()))).toPromise()}}var qo=Tn(Zo(),1),vr,Vo=({MAX_SIZE:r})=>vr||(vr=new qo.default(r),vr),qr=({logger:r,fetch:e,cache:t=vr})=>async({suUrl:n,processId:i})=>t.has(i)?t.get(i):e(`${n}/processes/${i}`,{method:"GET"}).then(async o=>{if(o.ok)return o.json();throw r("Error Encountered when fetching process meta from SU '%s' for process '%s'",n,i),new Error(`Encountered Error fetching scheduled messages from Scheduler Unit: ${o.status}: ${await o.text()}`)}).then(o=>(r("Caching process meta for process '%s'",i),t.set(i,{tags:o.tags}),o));var ic=function(){return!1},$n=ic;var oc=function(){return!0},xr=oc;var ge={"@@functional/placeholder":!0};function z(r){return r!=null&&typeof r=="object"&&r["@@functional/placeholder"]===!0}function W(r){return function e(t){return arguments.length===0||z(t)?e:r.apply(this,arguments)}}function R(r){return function e(t,n){switch(arguments.length){case 0:return e;case 1:return z(t)?e:W(function(i){return r(t,i)});default:return z(t)&&z(n)?e:z(t)?W(function(i){return r(i,n)}):z(n)?W(function(i){return r(t,i)}):r(t,n)}}}function zn(r,e){r=r||[],e=e||[];var t,n=r.length,i=e.length,o=[];for(t=0;t<n;)o[o.length]=r[t],t+=1;for(t=0;t<i;)o[o.length]=e[t],t+=1;return o}function Ie(r,e){switch(r){case 0:return function(){return e.apply(this,arguments)};case 1:return function(t){return e.apply(this,arguments)};case 2:return function(t,n){return e.apply(this,arguments)};case 3:return function(t,n,i){return e.apply(this,arguments)};case 4:return function(t,n,i,o){return e.apply(this,arguments)};case 5:return function(t,n,i,o,s){return e.apply(this,arguments)};case 6:return function(t,n,i,o,s,u){return e.apply(this,arguments)};case 7:return function(t,n,i,o,s,u,l){return e.apply(this,arguments)};case 8:return function(t,n,i,o,s,u,l,p){return e.apply(this,arguments)};case 9:return function(t,n,i,o,s,u,l,p,m){return e.apply(this,arguments)};case 10:return function(t,n,i,o,s,u,l,p,m,y){return e.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function Vr(r,e,t){return function(){for(var n=[],i=0,o=r,s=0,u=!1;s<e.length||i<arguments.length;){var l;s<e.length&&(!z(e[s])||i>=arguments.length)?l=e[s]:(l=arguments[i],i+=1),n[s]=l,z(l)?u=!0:o-=1,s+=1}return!u&&o<=0?t.apply(this,n):Ie(Math.max(0,o),Vr(r,n,t))}}var ac=R(function(e,t){return e===1?W(t):Ie(e,Vr(e,[],t))}),nt=ac;function se(r){return function e(t,n,i){switch(arguments.length){case 0:return e;case 1:return z(t)?e:R(function(o,s){return r(t,o,s)});case 2:return z(t)&&z(n)?e:z(t)?R(function(o,s){return r(o,n,s)}):z(n)?R(function(o,s){return r(t,o,s)}):W(function(o){return r(t,n,o)});default:return z(t)&&z(n)&&z(i)?e:z(t)&&z(n)?R(function(o,s){return r(o,s,i)}):z(t)&&z(i)?R(function(o,s){return r(o,n,s)}):z(n)&&z(i)?R(function(o,s){return r(t,o,s)}):z(t)?W(function(o){return r(o,n,i)}):z(n)?W(function(o){return r(t,o,i)}):z(i)?W(function(o){return r(t,n,o)}):r(t,n,i)}}}var Be=Array.isArray||function(e){return e!=null&&e.length>=0&&Object.prototype.toString.call(e)==="[object Array]"};function Zn(r){return r!=null&&typeof r["@@transducer/step"]=="function"}function qe(r,e,t){return function(){if(arguments.length===0)return t();var n=arguments[arguments.length-1];if(!Be(n)){for(var i=0;i<r.length;){if(typeof n[r[i]]=="function")return n[r[i]].apply(n,Array.prototype.slice.call(arguments,0,-1));i+=1}if(Zn(n)){var o=e.apply(null,Array.prototype.slice.call(arguments,0,-1));return o(n)}}return t.apply(this,arguments)}}var le={init:function(){return this.xf["@@transducer/init"]()},result:function(r){return this.xf["@@transducer/result"](r)}};function Gr(r){for(var e=[],t;!(t=r.next()).done;)e.push(t.value);return e}function Yr(r,e,t){for(var n=0,i=t.length;n<i;){if(r(e,t[n]))return!0;n+=1}return!1}function qn(r){var e=String(r).match(/^function (\w*)/);return e==null?"":e[1]}function be(r,e){return Object.prototype.hasOwnProperty.call(e,r)}function sc(r,e){return r===e?r!==0||1/r===1/e:r!==r&&e!==e}var Hr=typeof Object.is=="function"?Object.is:sc;var Go=Object.prototype.toString,uc=function(){return Go.call(arguments)==="[object Arguments]"?function(e){return Go.call(e)==="[object Arguments]"}:function(e){return be("callee",e)}}(),Yo=uc;var fc=!{toString:null}.propertyIsEnumerable("toString"),Ho=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Ko=function(){"use strict";return arguments.propertyIsEnumerable("length")}(),cc=function(e,t){for(var n=0;n<e.length;){if(e[n]===t)return!0;n+=1}return!1},lc=typeof Object.keys=="function"&&!Ko?W(function(e){return Object(e)!==e?[]:Object.keys(e)}):W(function(e){if(Object(e)!==e)return[];var t,n,i=[],o=Ko&&Yo(e);for(t in e)be(t,e)&&(!o||t!=="length")&&(i[i.length]=t);if(fc)for(n=Ho.length-1;n>=0;)t=Ho[n],be(t,e)&&!cc(i,t)&&(i[i.length]=t),n-=1;return i}),Ne=lc;var hc=W(function(e){return e===null?"Null":e===void 0?"Undefined":Object.prototype.toString.call(e).slice(8,-1)}),Vn=hc;function Xo(r,e,t,n){var i=Gr(r),o=Gr(e);function s(u,l){return _r(u,l,t.slice(),n.slice())}return!Yr(function(u,l){return!Yr(s,l,u)},o,i)}function _r(r,e,t,n){if(Hr(r,e))return!0;var i=Vn(r);if(i!==Vn(e))return!1;if(typeof r["fantasy-land/equals"]=="function"||typeof e["fantasy-land/equals"]=="function")return typeof r["fantasy-land/equals"]=="function"&&r["fantasy-land/equals"](e)&&typeof e["fantasy-land/equals"]=="function"&&e["fantasy-land/equals"](r);if(typeof r.equals=="function"||typeof e.equals=="function")return typeof r.equals=="function"&&r.equals(e)&&typeof e.equals=="function"&&e.equals(r);switch(i){case"Arguments":case"Array":case"Object":if(typeof r.constructor=="function"&&qn(r.constructor)==="Promise")return r===e;break;case"Boolean":case"Number":case"String":if(!(typeof r==typeof e&&Hr(r.valueOf(),e.valueOf())))return!1;break;case"Date":if(!Hr(r.valueOf(),e.valueOf()))return!1;break;case"Error":return r.name===e.name&&r.message===e.message;case"RegExp":if(!(r.source===e.source&&r.global===e.global&&r.ignoreCase===e.ignoreCase&&r.multiline===e.multiline&&r.sticky===e.sticky&&r.unicode===e.unicode))return!1;break}for(var o=t.length-1;o>=0;){if(t[o]===r)return n[o]===e;o-=1}switch(i){case"Map":return r.size!==e.size?!1:Xo(r.entries(),e.entries(),t.concat([r]),n.concat([e]));case"Set":return r.size!==e.size?!1:Xo(r.values(),e.values(),t.concat([r]),n.concat([e]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var s=Ne(r);if(s.length!==Ne(e).length)return!1;var u=t.concat([r]),l=n.concat([e]);for(o=s.length-1;o>=0;){var p=s[o];if(!(be(p,e)&&_r(e[p],r[p],u,l)))return!1;o-=1}return!0}var pc=R(function(e,t){return _r(e,t,[],[])}),Me=pc;function Gn(r,e,t){var n,i;if(typeof r.indexOf=="function")switch(typeof e){case"number":if(e===0){for(n=1/e;t<r.length;){if(i=r[t],i===0&&1/i===n)return t;t+=1}return-1}else if(e!==e){for(;t<r.length;){if(i=r[t],typeof i=="number"&&i!==i)return t;t+=1}return-1}return r.indexOf(e,t);case"string":case"boolean":case"function":case"undefined":return r.indexOf(e,t);case"object":if(e===null)return r.indexOf(e,t)}for(;t<r.length;){if(Me(r[t],e))return t;t+=1}return-1}function br(r,e){return Gn(e,r,0)>=0}function mt(r,e){for(var t=0,n=e.length,i=Array(n);t<n;)i[t]=r(e[t]),t+=1;return i}function Er(r){var e=r.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0");return'"'+e.replace(/"/g,'\\"')+'"'}var Ar=function(e){return(e<10?"0":"")+e},dc=typeof Date.prototype.toISOString=="function"?function(e){return e.toISOString()}:function(e){return e.getUTCFullYear()+"-"+Ar(e.getUTCMonth()+1)+"-"+Ar(e.getUTCDate())+"T"+Ar(e.getUTCHours())+":"+Ar(e.getUTCMinutes())+":"+Ar(e.getUTCSeconds())+"."+(e.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"},Jo=dc;function Yn(r){return function(){return!r.apply(this,arguments)}}function Sr(r,e,t){for(var n=0,i=t.length;n<i;)e=r(e,t[n]),n+=1;return e}function Hn(r,e){for(var t=0,n=e.length,i=[];t<n;)r(e[t])&&(i[i.length]=e[t]),t+=1;return i}function Kn(r){return Object.prototype.toString.call(r)==="[object Object]"}var mc=function(){function r(e,t){this.xf=t,this.f=e}return r.prototype["@@transducer/init"]=le.init,r.prototype["@@transducer/result"]=le.result,r.prototype["@@transducer/step"]=function(e,t){return this.f(t)?this.xf["@@transducer/step"](e,t):e},r}();function Xn(r){return function(e){return new mc(r,e)}}var yc=R(qe(["fantasy-land/filter","filter"],Xn,function(r,e){return Kn(e)?Sr(function(t,n){return r(e[n])&&(t[n]=e[n]),t},{},Ne(e)):Hn(r,e)})),Qo=yc;var gc=R(function(e,t){return Qo(Yn(e),t)}),Tr=gc;function Kr(r,e){var t=function(s){var u=e.concat([r]);return br(s,u)?"<Circular>":Kr(s,u)},n=function(o,s){return mt(function(u){return Er(u)+": "+t(o[u])},s.slice().sort())};switch(Object.prototype.toString.call(r)){case"[object Arguments]":return"(function() { return arguments; }("+mt(t,r).join(", ")+"))";case"[object Array]":return"["+mt(t,r).concat(n(r,Tr(function(o){return/^\d+$/.test(o)},Ne(r)))).join(", ")+"]";case"[object Boolean]":return typeof r=="object"?"new Boolean("+t(r.valueOf())+")":r.toString();case"[object Date]":return"new Date("+(isNaN(r.valueOf())?t(NaN):Er(Jo(r)))+")";case"[object Map]":return"new Map("+t(Array.from(r))+")";case"[object Null]":return"null";case"[object Number]":return typeof r=="object"?"new Number("+t(r.valueOf())+")":1/r===-1/0?"-0":r.toString(10);case"[object Set]":return"new Set("+t(Array.from(r).sort())+")";case"[object String]":return typeof r=="object"?"new String("+t(r.valueOf())+")":Er(r);case"[object Undefined]":return"undefined";default:if(typeof r.toString=="function"){var i=r.toString();if(i!=="[object Object]")return i}return"{"+n(r,Ne(r)).join(", ")+"}"}}var wc=W(function(e){return Kr(e,[])}),Ve=wc;var vc=R(function(e,t){if(e===t)return t;function n(l,p){if(l>p!=p>l)return p>l?p:l}var i=n(e,t);if(i!==void 0)return i;var o=n(typeof e,typeof t);if(o!==void 0)return o===typeof e?e:t;var s=Ve(e),u=n(s,Ve(t));return u!==void 0&&u===s?e:t}),Xr=vc;var xc=function(){function r(e,t){this.xf=t,this.f=e}return r.prototype["@@transducer/init"]=le.init,r.prototype["@@transducer/result"]=le.result,r.prototype["@@transducer/step"]=function(e,t){return this.xf["@@transducer/step"](e,this.f(t))},r}(),_c=function(e){return function(t){return new xc(e,t)}},Jr=_c;var bc=R(qe(["fantasy-land/map","map"],Jr,function(e,t){switch(Object.prototype.toString.call(t)){case"[object Function]":return nt(t.length,function(){return e.call(this,t.apply(this,arguments))});case"[object Object]":return Sr(function(n,i){return n[i]=e(t[i]),n},{},Ne(t));default:return mt(e,t)}})),Ge=bc;var it=Number.isInteger||function(e){return e<<0===e};function ot(r){return Object.prototype.toString.call(r)==="[object String]"}var Ec=R(function(e,t){var n=e<0?t.length+e:e;return ot(t)?t.charAt(n):t[n]}),Qr=Ec;var Ac=R(function(e,t){if(t!=null)return it(e)?Qr(e,t):t[e]}),ie=Ac;var Sc=R(function(e,t){return Ge(ie(e),t)}),ea=Sc;var Tc=W(function(e){return Be(e)?!0:!e||typeof e!="object"||ot(e)?!1:e.length===0?!0:e.length>0?e.hasOwnProperty(0)&&e.hasOwnProperty(e.length-1):!1}),Vt=Tc;var ta=typeof Symbol<"u"?Symbol.iterator:"@@iterator";function Jn(r,e,t){return function(i,o,s){if(Vt(s))return r(i,o,s);if(s==null)return o;if(typeof s["fantasy-land/reduce"]=="function")return e(i,o,s,"fantasy-land/reduce");if(s[ta]!=null)return t(i,o,s[ta]());if(typeof s.next=="function")return t(i,o,s);if(typeof s.reduce=="function")return e(i,o,s,"reduce");throw new TypeError("reduce: list must be array or iterable")}}function Ir(r,e,t){for(var n=0,i=t.length;n<i;){if(e=r["@@transducer/step"](e,t[n]),e&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}n+=1}return r["@@transducer/result"](e)}var Ic=R(function(e,t){return Ie(e.length,function(){return e.apply(t,arguments)})}),ra=Ic;function Bc(r,e,t){for(var n=t.next();!n.done;){if(e=r["@@transducer/step"](e,n.value),e&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}n=t.next()}return r["@@transducer/result"](e)}function Cc(r,e,t,n){return r["@@transducer/result"](t[n](ra(r["@@transducer/step"],r),e))}var Oc=Jn(Ir,Cc,Bc),en=Oc;var kc=function(){function r(e){this.f=e}return r.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},r.prototype["@@transducer/result"]=function(e){return e},r.prototype["@@transducer/step"]=function(e,t){return this.f(e,t)},r}();function Qn(r){return new kc(r)}var Rc=se(function(r,e,t){return en(typeof r=="function"?Qn(r):r,e,t)}),Ce=Rc;var Uc=W(function(e){return nt(Ce(Xr,0,ea("length",e)),function(){for(var t=0,n=e.length;t<n;){if(!e[t].apply(this,arguments))return!1;t+=1}return!0})}),ei=Uc;var Fc=W(function(e){return function(){return e}}),yt=Fc;var jc=R(function(e,t){return zn(t,[e])}),gt=jc;function ti(r,e,t){if(it(r)&&Be(t)){var n=[].concat(t);return n[r]=e,n}var i={};for(var o in t)i[o]=t[o];return i[r]=e,i}var Lc=W(function(e){return e==null}),wt=Lc;var Pc=se(function r(e,t,n){if(e.length===0)return t;var i=e[0];if(e.length>1){var o=!wt(n)&&be(i,n)&&typeof n[i]=="object"?n[i]:it(e[1])?[]:{};t=r(Array.prototype.slice.call(e,1),t,o)}return ti(i,t,n)}),na=Pc;var Nc=se(function(e,t,n){return na([e],t,n)}),ne=Nc;function Gt(r){var e=Object.prototype.toString.call(r);return e==="[object Function]"||e==="[object AsyncFunction]"||e==="[object GeneratorFunction]"||e==="[object AsyncGeneratorFunction]"}function ri(r){return function e(t){for(var n,i,o,s=[],u=0,l=t.length;u<l;){if(Vt(t[u]))for(n=r?e(t[u]):t[u],o=0,i=n.length;o<i;)s[s.length]=n[o],o+=1;else s[s.length]=t[u];u+=1}return s}}function ni(r){return{"@@transducer/value":r,"@@transducer/reduced":!0}}var ia="@@transducer/init",ii="@@transducer/step",oa="@@transducer/result",Mc=function(){function r(e){this.xf=e}return r.prototype[ia]=le.init,r.prototype[oa]=le.result,r.prototype[ii]=function(e,t){var n=this.xf[ii](e,t);return n["@@transducer/reduced"]?ni(n):n},r}(),Dc=function(){function r(e){this.xf=new Mc(e)}return r.prototype[ia]=le.init,r.prototype[oa]=le.result,r.prototype[ii]=function(e,t){return Vt(t)?en(this.xf,e,t):Ir(this.xf,e,[t])},r}(),Wc=function(e){return new Dc(e)},aa=Wc;function oi(r){return function(e){return Jr(r)(aa(e))}}var $c=R(qe(["fantasy-land/chain","chain"],oi,function(e,t){return typeof t=="function"?function(n){return e(t(n))(n)}:ri(!1)(Ge(e,t))})),ai=$c;function si(r,e){return function(){return e.call(this,r.apply(this,arguments))}}function Br(r,e){return function(){var t=arguments.length;if(t===0)return e();var n=arguments[t-1];return Be(n)||typeof n[r]!="function"?e.apply(this,arguments):n[r].apply(n,Array.prototype.slice.call(arguments,0,t-1))}}var zc=se(Br("slice",function(e,t,n){return Array.prototype.slice.call(n,e,t)})),sa=zc;var Zc=W(Br("tail",sa(1,1/0))),ua=Zc;function Oe(){if(arguments.length===0)throw new Error("pipe requires at least one argument");return Ie(arguments[0].length,Ce(si,arguments[0],ua(arguments)))}function ui(r){return r}var qc=W(ui),we=qc;var Vc=R(function(e,t){if(Be(e)){if(Be(t))return e.concat(t);throw new TypeError(Ve(t)+" is not an array")}if(ot(e)){if(ot(t))return e+t;throw new TypeError(Ve(t)+" is not a string")}if(e!=null&&Gt(e["fantasy-land/concat"]))return e["fantasy-land/concat"](t);if(e!=null&&Gt(e.concat))return e.concat(t);throw new TypeError(Ve(e)+' does not have a method named "concat" or "fantasy-land/concat"')}),vt=Vc;var Gc=W(function(e){var t=Ce(Xr,0,Ge(function(n){return n[0].length},e));return Ie(t,function(){for(var n=0;n<e.length;){if(e[n][0].apply(this,arguments))return e[n][1].apply(this,arguments);n+=1}})}),tn=Gc;var Yc=R(function(e,t){return t==null||t!==t?e:t}),Ye=Yc;var Hc=R(function(e,t){if(e.length===0||wt(t))return!1;for(var n=t,i=0;i<e.length;)if(!wt(n)&&be(e[i],n))n=n[e[i]],i+=1;else return!1;return!0}),fa=Hc;var Kc=R(function(e,t){return fa([e],t)}),fi=Kc;var Xc=se(function(e,t,n){return nt(Math.max(e.length,t.length,n.length),function(){return e.apply(this,arguments)?t.apply(this,arguments):n.apply(this,arguments)})}),xt=Xc;var Jc=R(br),ci=Jc;var Qc=R(function(e,t){return nt(e+1,function(){var n=arguments[e];if(n!=null&&Gt(n[t]))return n[t].apply(n,Array.prototype.slice.call(arguments,0,e));throw new TypeError(Ve(n)+' does not have a method named "'+t+'"')})}),ca=Qc;var el=R(function(e,t){return t instanceof e||t!=null&&(t.constructor===e||e.name==="Object"&&typeof t=="object")}),_t=el;var tl=W(function(e){return!wt(e)}),bt=tl;var rl=ca(1,"join"),li=rl;var nl=R(function(e,t){return e.map(function(n){for(var i=t,o=0,s;o<n.length;){if(i==null)return;s=n[o],i=it(s)?Qr(s,i):i[s],o+=1}return i})}),la=nl;var il=R(function(e,t){return la([e],t)[0]}),hi=il;var ol=se(function(e,t,n){return Me(e,ie(t,n))}),rn=ol;var al=se(function(e,t,n){return Ye(e,ie(t,n))}),pi=al;var sl=function(){function r(e,t){this.xf=t,this.f=e}return r.prototype["@@transducer/init"]=le.init,r.prototype["@@transducer/result"]=le.result,r.prototype["@@transducer/step"]=function(e,t){return this.f(t),this.xf["@@transducer/step"](e,t)},r}();function di(r){return function(e){return new sl(r,e)}}var ul=R(qe([],di,function(e,t){return e(t),t})),mi=ul;var $;(function(r){r.assertEqual=i=>i;function e(i){}r.assertIs=e;function t(i){throw new Error}r.assertNever=t,r.arrayToEnum=i=>{let o={};for(let s of i)o[s]=s;return o},r.getValidEnumValues=i=>{let o=r.objectKeys(i).filter(u=>typeof i[i[u]]!="number"),s={};for(let u of o)s[u]=i[u];return r.objectValues(s)},r.objectValues=i=>r.objectKeys(i).map(function(o){return i[o]}),r.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let o=[];for(let s in i)Object.prototype.hasOwnProperty.call(i,s)&&o.push(s);return o},r.find=(i,o)=>{for(let s of i)if(o(s))return s},r.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,o=" | "){return i.map(s=>typeof s=="string"?`'${s}'`:s).join(o)}r.joinValues=n,r.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})($||($={}));var gi;(function(r){r.mergeShapes=(e,t)=>({...e,...t})})(gi||(gi={}));var I=$.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),at=r=>{switch(typeof r){case"undefined":return I.undefined;case"string":return I.string;case"number":return isNaN(r)?I.nan:I.number;case"boolean":return I.boolean;case"function":return I.function;case"bigint":return I.bigint;case"symbol":return I.symbol;case"object":return Array.isArray(r)?I.array:r===null?I.null:r.then&&typeof r.then=="function"&&r.catch&&typeof r.catch=="function"?I.promise:typeof Map<"u"&&r instanceof Map?I.map:typeof Set<"u"&&r instanceof Set?I.set:typeof Date<"u"&&r instanceof Date?I.date:I.object;default:return I.unknown}},_=$.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),fl=r=>JSON.stringify(r,null,2).replace(/"([^"]+)":/g,"$1:"),ue=class extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let t=e||function(o){return o.message},n={_errors:[]},i=o=>{for(let s of o.issues)if(s.code==="invalid_union")s.unionErrors.map(i);else if(s.code==="invalid_return_type")i(s.returnTypeError);else if(s.code==="invalid_arguments")i(s.argumentsError);else if(s.path.length===0)n._errors.push(t(s));else{let u=n,l=0;for(;l<s.path.length;){let p=s.path[l];l===s.path.length-1?(u[p]=u[p]||{_errors:[]},u[p]._errors.push(t(s))):u[p]=u[p]||{_errors:[]},u=u[p],l++}}};return i(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,$.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){let t={},n=[];for(let i of this.issues)i.path.length>0?(t[i.path[0]]=t[i.path[0]]||[],t[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}};ue.create=r=>new ue(r);var Cr=(r,e)=>{let t;switch(r.code){case _.invalid_type:r.received===I.undefined?t="Required":t=`Expected ${r.expected}, received ${r.received}`;break;case _.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(r.expected,$.jsonStringifyReplacer)}`;break;case _.unrecognized_keys:t=`Unrecognized key(s) in object: ${$.joinValues(r.keys,", ")}`;break;case _.invalid_union:t="Invalid input";break;case _.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${$.joinValues(r.options)}`;break;case _.invalid_enum_value:t=`Invalid enum value. Expected ${$.joinValues(r.options)}, received '${r.received}'`;break;case _.invalid_arguments:t="Invalid function arguments";break;case _.invalid_return_type:t="Invalid function return type";break;case _.invalid_date:t="Invalid date";break;case _.invalid_string:typeof r.validation=="object"?"includes"in r.validation?(t=`Invalid input: must include "${r.validation.includes}"`,typeof r.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${r.validation.position}`)):"startsWith"in r.validation?t=`Invalid input: must start with "${r.validation.startsWith}"`:"endsWith"in r.validation?t=`Invalid input: must end with "${r.validation.endsWith}"`:$.assertNever(r.validation):r.validation!=="regex"?t=`Invalid ${r.validation}`:t="Invalid";break;case _.too_small:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at least":"more than"} ${r.minimum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at least":"over"} ${r.minimum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${r.minimum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(r.minimum))}`:t="Invalid input";break;case _.too_big:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at most":"less than"} ${r.maximum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at most":"under"} ${r.maximum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="bigint"?t=`BigInt must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly":r.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(r.maximum))}`:t="Invalid input";break;case _.custom:t="Invalid input";break;case _.invalid_intersection_types:t="Intersection results could not be merged";break;case _.not_multiple_of:t=`Number must be a multiple of ${r.multipleOf}`;break;case _.not_finite:t="Number must be finite";break;default:t=e.defaultError,$.assertNever(r)}return{message:t}},da=Cr;function cl(r){da=r}function on(){return da}var an=r=>{let{data:e,path:t,errorMaps:n,issueData:i}=r,o=[...t,...i.path||[]],s={...i,path:o},u="",l=n.filter(p=>!!p).slice().reverse();for(let p of l)u=p(s,{data:e,defaultError:u}).message;return{...i,path:o,message:i.message||u}},ll=[];function B(r,e){let t=an({issueData:e,data:r.data,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,on(),Cr].filter(n=>!!n)});r.common.issues.push(t)}var oe=class r{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){let n=[];for(let i of t){if(i.status==="aborted")return F;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){let n=[];for(let i of t)n.push({key:await i.key,value:await i.value});return r.mergeObjectSync(e,n)}static mergeObjectSync(e,t){let n={};for(let i of t){let{key:o,value:s}=i;if(o.status==="aborted"||s.status==="aborted")return F;o.status==="dirty"&&e.dirty(),s.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof s.value<"u"||i.alwaysSet)&&(n[o.value]=s.value)}return{status:e.value,value:n}}},F=Object.freeze({status:"aborted"}),ma=r=>({status:"dirty",value:r}),fe=r=>({status:"valid",value:r}),wi=r=>r.status==="aborted",vi=r=>r.status==="dirty",Or=r=>r.status==="valid",sn=r=>typeof Promise<"u"&&r instanceof Promise,k;(function(r){r.errToObj=e=>typeof e=="string"?{message:e}:e||{},r.toString=e=>typeof e=="string"?e:e?.message})(k||(k={}));var Ee=class{constructor(e,t,n,i){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},ha=(r,e)=>{if(Or(e))return{success:!0,data:e.value};if(!r.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new ue(r.common.issues);return this._error=t,this._error}}};function j(r){if(!r)return{};let{errorMap:e,invalid_type_error:t,required_error:n,description:i}=r;if(e&&(t||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(s,u)=>s.code!=="invalid_type"?{message:u.defaultError}:typeof u.data>"u"?{message:n??u.defaultError}:{message:t??u.defaultError},description:i}}var L=class{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return at(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:at(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new oe,ctx:{common:e.parent.common,data:e.data,parsedType:at(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(sn(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){let t=this._parse(e);return Promise.resolve(t)}parse(e,t){let n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;let i={common:{issues:[],async:(n=t?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:at(e)},o=this._parseSync({data:e,path:i.path,parent:i});return ha(i,o)}async parseAsync(e,t){let n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){let n={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:at(e)},i=this._parse({data:e,path:n.path,parent:n}),o=await(sn(i)?i:Promise.resolve(i));return ha(n,o)}refine(e,t){let n=i=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(i):t;return this._refinement((i,o)=>{let s=e(i),u=()=>o.addIssue({code:_.custom,...n(i)});return typeof Promise<"u"&&s instanceof Promise?s.then(l=>l?!0:(u(),!1)):s?!0:(u(),!1)})}refinement(e,t){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof t=="function"?t(n,i):t),!1))}_refinement(e){return new ve({schema:this,typeName:U.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return ke.create(this,this._def)}nullable(){return Xe.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ke.create(this,this._def)}promise(){return ft.create(this,this._def)}or(e){return Ct.create([this,e],this._def)}and(e){return Ot.create(this,e,this._def)}transform(e){return new ve({...j(this._def),schema:this,typeName:U.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let t=typeof e=="function"?e:()=>e;return new jt({...j(this._def),innerType:this,defaultValue:t,typeName:U.ZodDefault})}brand(){return new ln({typeName:U.ZodBranded,type:this,...j(this._def)})}catch(e){let t=typeof e=="function"?e:()=>e;return new Qt({...j(this._def),innerType:this,catchValue:t,typeName:U.ZodCatch})}describe(e){let t=this.constructor;return new t({...this._def,description:e})}pipe(e){return kr.create(this,e)}readonly(){return tr.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},hl=/^c[^\s-]{8,}$/i,pl=/^[a-z][a-z0-9]*$/,dl=/^[0-9A-HJKMNP-TV-Z]{26}$/,ml=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,yl=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,gl="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",yi,wl=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,vl=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,xl=r=>r.precision?r.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${r.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${r.precision}}Z$`):r.precision===0?r.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):r.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function _l(r,e){return!!((e==="v4"||!e)&&wl.test(r)||(e==="v6"||!e)&&vl.test(r))}var st=class r extends L{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==I.string){let o=this._getOrReturnCtx(e);return B(o,{code:_.invalid_type,expected:I.string,received:o.parsedType}),F}let n=new oe,i;for(let o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(i=this._getOrReturnCtx(e,i),B(i,{code:_.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="max")e.data.length>o.value&&(i=this._getOrReturnCtx(e,i),B(i,{code:_.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="length"){let s=e.data.length>o.value,u=e.data.length<o.value;(s||u)&&(i=this._getOrReturnCtx(e,i),s?B(i,{code:_.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):u&&B(i,{code:_.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),n.dirty())}else if(o.kind==="email")yl.test(e.data)||(i=this._getOrReturnCtx(e,i),B(i,{validation:"email",code:_.invalid_string,message:o.message}),n.dirty());else if(o.kind==="emoji")yi||(yi=new RegExp(gl,"u")),yi.test(e.data)||(i=this._getOrReturnCtx(e,i),B(i,{validation:"emoji",code:_.invalid_string,message:o.message}),n.dirty());else if(o.kind==="uuid")ml.test(e.data)||(i=this._getOrReturnCtx(e,i),B(i,{validation:"uuid",code:_.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid")hl.test(e.data)||(i=this._getOrReturnCtx(e,i),B(i,{validation:"cuid",code:_.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid2")pl.test(e.data)||(i=this._getOrReturnCtx(e,i),B(i,{validation:"cuid2",code:_.invalid_string,message:o.message}),n.dirty());else if(o.kind==="ulid")dl.test(e.data)||(i=this._getOrReturnCtx(e,i),B(i,{validation:"ulid",code:_.invalid_string,message:o.message}),n.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),B(i,{validation:"url",code:_.invalid_string,message:o.message}),n.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),B(i,{validation:"regex",code:_.invalid_string,message:o.message}),n.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(e,i),B(i,{code:_.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),n.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(i=this._getOrReturnCtx(e,i),B(i,{code:_.invalid_string,validation:{startsWith:o.value},message:o.message}),n.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(i=this._getOrReturnCtx(e,i),B(i,{code:_.invalid_string,validation:{endsWith:o.value},message:o.message}),n.dirty()):o.kind==="datetime"?xl(o).test(e.data)||(i=this._getOrReturnCtx(e,i),B(i,{code:_.invalid_string,validation:"datetime",message:o.message}),n.dirty()):o.kind==="ip"?_l(e.data,o.version)||(i=this._getOrReturnCtx(e,i),B(i,{validation:"ip",code:_.invalid_string,message:o.message}),n.dirty()):$.assertNever(o);return{status:n.value,value:e.data}}_regex(e,t,n){return this.refinement(i=>e.test(i),{validation:t,code:_.invalid_string,...k.errToObj(n)})}_addCheck(e){return new r({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...k.errToObj(e)})}url(e){return this._addCheck({kind:"url",...k.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...k.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...k.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...k.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...k.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...k.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...k.errToObj(e)})}datetime(e){var t;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(t=e?.offset)!==null&&t!==void 0?t:!1,...k.errToObj(e?.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...k.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...k.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...k.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...k.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...k.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...k.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...k.errToObj(t)})}nonempty(e){return this.min(1,k.errToObj(e))}trim(){return new r({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new r({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new r({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}};st.create=r=>{var e;return new st({checks:[],typeName:U.ZodString,coerce:(e=r?.coerce)!==null&&e!==void 0?e:!1,...j(r)})};function bl(r,e){let t=(r.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=t>n?t:n,o=parseInt(r.toFixed(i).replace(".","")),s=parseInt(e.toFixed(i).replace(".",""));return o%s/Math.pow(10,i)}var Et=class r extends L{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==I.number){let o=this._getOrReturnCtx(e);return B(o,{code:_.invalid_type,expected:I.number,received:o.parsedType}),F}let n,i=new oe;for(let o of this._def.checks)o.kind==="int"?$.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),B(n,{code:_.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),B(n,{code:_.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),B(n,{code:_.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?bl(e.data,o.value)!==0&&(n=this._getOrReturnCtx(e,n),B(n,{code:_.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),B(n,{code:_.not_finite,message:o.message}),i.dirty()):$.assertNever(o);return{status:i.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,k.toString(t))}gt(e,t){return this.setLimit("min",e,!1,k.toString(t))}lte(e,t){return this.setLimit("max",e,!0,k.toString(t))}lt(e,t){return this.setLimit("max",e,!1,k.toString(t))}setLimit(e,t,n,i){return new r({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:k.toString(i)}]})}_addCheck(e){return new r({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:k.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:k.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:k.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:k.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:k.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:k.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:k.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:k.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:k.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&$.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(t===null||n.value>t)&&(t=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}};Et.create=r=>new Et({checks:[],typeName:U.ZodNumber,coerce:r?.coerce||!1,...j(r)});var At=class r extends L{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==I.bigint){let o=this._getOrReturnCtx(e);return B(o,{code:_.invalid_type,expected:I.bigint,received:o.parsedType}),F}let n,i=new oe;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),B(n,{code:_.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),B(n,{code:_.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),B(n,{code:_.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):$.assertNever(o);return{status:i.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,k.toString(t))}gt(e,t){return this.setLimit("min",e,!1,k.toString(t))}lte(e,t){return this.setLimit("max",e,!0,k.toString(t))}lt(e,t){return this.setLimit("max",e,!1,k.toString(t))}setLimit(e,t,n,i){return new r({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:k.toString(i)}]})}_addCheck(e){return new r({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:k.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:k.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:k.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:k.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:k.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}};At.create=r=>{var e;return new At({checks:[],typeName:U.ZodBigInt,coerce:(e=r?.coerce)!==null&&e!==void 0?e:!1,...j(r)})};var St=class extends L{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==I.boolean){let n=this._getOrReturnCtx(e);return B(n,{code:_.invalid_type,expected:I.boolean,received:n.parsedType}),F}return fe(e.data)}};St.create=r=>new St({typeName:U.ZodBoolean,coerce:r?.coerce||!1,...j(r)});var Tt=class r extends L{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==I.date){let o=this._getOrReturnCtx(e);return B(o,{code:_.invalid_type,expected:I.date,received:o.parsedType}),F}if(isNaN(e.data.getTime())){let o=this._getOrReturnCtx(e);return B(o,{code:_.invalid_date}),F}let n=new oe,i;for(let o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(i=this._getOrReturnCtx(e,i),B(i,{code:_.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),n.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(i=this._getOrReturnCtx(e,i),B(i,{code:_.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),n.dirty()):$.assertNever(o);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new r({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:k.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:k.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}};Tt.create=r=>new Tt({checks:[],coerce:r?.coerce||!1,typeName:U.ZodDate,...j(r)});var Ht=class extends L{_parse(e){if(this._getType(e)!==I.symbol){let n=this._getOrReturnCtx(e);return B(n,{code:_.invalid_type,expected:I.symbol,received:n.parsedType}),F}return fe(e.data)}};Ht.create=r=>new Ht({typeName:U.ZodSymbol,...j(r)});var It=class extends L{_parse(e){if(this._getType(e)!==I.undefined){let n=this._getOrReturnCtx(e);return B(n,{code:_.invalid_type,expected:I.undefined,received:n.parsedType}),F}return fe(e.data)}};It.create=r=>new It({typeName:U.ZodUndefined,...j(r)});var Bt=class extends L{_parse(e){if(this._getType(e)!==I.null){let n=this._getOrReturnCtx(e);return B(n,{code:_.invalid_type,expected:I.null,received:n.parsedType}),F}return fe(e.data)}};Bt.create=r=>new Bt({typeName:U.ZodNull,...j(r)});var ut=class extends L{constructor(){super(...arguments),this._any=!0}_parse(e){return fe(e.data)}};ut.create=r=>new ut({typeName:U.ZodAny,...j(r)});var He=class extends L{constructor(){super(...arguments),this._unknown=!0}_parse(e){return fe(e.data)}};He.create=r=>new He({typeName:U.ZodUnknown,...j(r)});var Re=class extends L{_parse(e){let t=this._getOrReturnCtx(e);return B(t,{code:_.invalid_type,expected:I.never,received:t.parsedType}),F}};Re.create=r=>new Re({typeName:U.ZodNever,...j(r)});var Kt=class extends L{_parse(e){if(this._getType(e)!==I.undefined){let n=this._getOrReturnCtx(e);return B(n,{code:_.invalid_type,expected:I.void,received:n.parsedType}),F}return fe(e.data)}};Kt.create=r=>new Kt({typeName:U.ZodVoid,...j(r)});var Ke=class r extends L{_parse(e){let{ctx:t,status:n}=this._processInputParams(e),i=this._def;if(t.parsedType!==I.array)return B(t,{code:_.invalid_type,expected:I.array,received:t.parsedType}),F;if(i.exactLength!==null){let s=t.data.length>i.exactLength.value,u=t.data.length<i.exactLength.value;(s||u)&&(B(t,{code:s?_.too_big:_.too_small,minimum:u?i.exactLength.value:void 0,maximum:s?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&t.data.length<i.minLength.value&&(B(t,{code:_.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&t.data.length>i.maxLength.value&&(B(t,{code:_.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((s,u)=>i.type._parseAsync(new Ee(t,s,t.path,u)))).then(s=>oe.mergeArray(n,s));let o=[...t.data].map((s,u)=>i.type._parseSync(new Ee(t,s,t.path,u)));return oe.mergeArray(n,o)}get element(){return this._def.type}min(e,t){return new r({...this._def,minLength:{value:e,message:k.toString(t)}})}max(e,t){return new r({...this._def,maxLength:{value:e,message:k.toString(t)}})}length(e,t){return new r({...this._def,exactLength:{value:e,message:k.toString(t)}})}nonempty(e){return this.min(1,e)}};Ke.create=(r,e)=>new Ke({type:r,minLength:null,maxLength:null,exactLength:null,typeName:U.ZodArray,...j(e)});function Yt(r){if(r instanceof he){let e={};for(let t in r.shape){let n=r.shape[t];e[t]=ke.create(Yt(n))}return new he({...r._def,shape:()=>e})}else return r instanceof Ke?new Ke({...r._def,type:Yt(r.element)}):r instanceof ke?ke.create(Yt(r.unwrap())):r instanceof Xe?Xe.create(Yt(r.unwrap())):r instanceof De?De.create(r.items.map(e=>Yt(e))):r}var he=class r extends L{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),t=$.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==I.object){let p=this._getOrReturnCtx(e);return B(p,{code:_.invalid_type,expected:I.object,received:p.parsedType}),F}let{status:n,ctx:i}=this._processInputParams(e),{shape:o,keys:s}=this._getCached(),u=[];if(!(this._def.catchall instanceof Re&&this._def.unknownKeys==="strip"))for(let p in i.data)s.includes(p)||u.push(p);let l=[];for(let p of s){let m=o[p],y=i.data[p];l.push({key:{status:"valid",value:p},value:m._parse(new Ee(i,y,i.path,p)),alwaysSet:p in i.data})}if(this._def.catchall instanceof Re){let p=this._def.unknownKeys;if(p==="passthrough")for(let m of u)l.push({key:{status:"valid",value:m},value:{status:"valid",value:i.data[m]}});else if(p==="strict")u.length>0&&(B(i,{code:_.unrecognized_keys,keys:u}),n.dirty());else if(p!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let p=this._def.catchall;for(let m of u){let y=i.data[m];l.push({key:{status:"valid",value:m},value:p._parse(new Ee(i,y,i.path,m)),alwaysSet:m in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let p=[];for(let m of l){let y=await m.key;p.push({key:y,value:await m.value,alwaysSet:m.alwaysSet})}return p}).then(p=>oe.mergeObjectSync(n,p)):oe.mergeObjectSync(n,l)}get shape(){return this._def.shape()}strict(e){return k.errToObj,new r({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,n)=>{var i,o,s,u;let l=(s=(o=(i=this._def).errorMap)===null||o===void 0?void 0:o.call(i,t,n).message)!==null&&s!==void 0?s:n.defaultError;return t.code==="unrecognized_keys"?{message:(u=k.errToObj(e).message)!==null&&u!==void 0?u:l}:{message:l}}}:{}})}strip(){return new r({...this._def,unknownKeys:"strip"})}passthrough(){return new r({...this._def,unknownKeys:"passthrough"})}extend(e){return new r({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new r({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:U.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new r({...this._def,catchall:e})}pick(e){let t={};return $.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])}),new r({...this._def,shape:()=>t})}omit(e){let t={};return $.objectKeys(this.shape).forEach(n=>{e[n]||(t[n]=this.shape[n])}),new r({...this._def,shape:()=>t})}deepPartial(){return Yt(this)}partial(e){let t={};return $.objectKeys(this.shape).forEach(n=>{let i=this.shape[n];e&&!e[n]?t[n]=i:t[n]=i.optional()}),new r({...this._def,shape:()=>t})}required(e){let t={};return $.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])t[n]=this.shape[n];else{let o=this.shape[n];for(;o instanceof ke;)o=o._def.innerType;t[n]=o}}),new r({...this._def,shape:()=>t})}keyof(){return ya($.objectKeys(this.shape))}};he.create=(r,e)=>new he({shape:()=>r,unknownKeys:"strip",catchall:Re.create(),typeName:U.ZodObject,...j(e)});he.strictCreate=(r,e)=>new he({shape:()=>r,unknownKeys:"strict",catchall:Re.create(),typeName:U.ZodObject,...j(e)});he.lazycreate=(r,e)=>new he({shape:r,unknownKeys:"strip",catchall:Re.create(),typeName:U.ZodObject,...j(e)});var Ct=class extends L{_parse(e){let{ctx:t}=this._processInputParams(e),n=this._def.options;function i(o){for(let u of o)if(u.result.status==="valid")return u.result;for(let u of o)if(u.result.status==="dirty")return t.common.issues.push(...u.ctx.common.issues),u.result;let s=o.map(u=>new ue(u.ctx.common.issues));return B(t,{code:_.invalid_union,unionErrors:s}),F}if(t.common.async)return Promise.all(n.map(async o=>{let s={...t,common:{...t.common,issues:[]},parent:null};return{result:await o._parseAsync({data:t.data,path:t.path,parent:s}),ctx:s}})).then(i);{let o,s=[];for(let l of n){let p={...t,common:{...t.common,issues:[]},parent:null},m=l._parseSync({data:t.data,path:t.path,parent:p});if(m.status==="valid")return m;m.status==="dirty"&&!o&&(o={result:m,ctx:p}),p.common.issues.length&&s.push(p.common.issues)}if(o)return t.common.issues.push(...o.ctx.common.issues),o.result;let u=s.map(l=>new ue(l));return B(t,{code:_.invalid_union,unionErrors:u}),F}}get options(){return this._def.options}};Ct.create=(r,e)=>new Ct({options:r,typeName:U.ZodUnion,...j(e)});var nn=r=>r instanceof kt?nn(r.schema):r instanceof ve?nn(r.innerType()):r instanceof Rt?[r.value]:r instanceof Ut?r.options:r instanceof Ft?Object.keys(r.enum):r instanceof jt?nn(r._def.innerType):r instanceof It?[void 0]:r instanceof Bt?[null]:null,un=class r extends L{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==I.object)return B(t,{code:_.invalid_type,expected:I.object,received:t.parsedType}),F;let n=this.discriminator,i=t.data[n],o=this.optionsMap.get(i);return o?t.common.async?o._parseAsync({data:t.data,path:t.path,parent:t}):o._parseSync({data:t.data,path:t.path,parent:t}):(B(t,{code:_.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),F)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){let i=new Map;for(let o of t){let s=nn(o.shape[e]);if(!s)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let u of s){if(i.has(u))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(u)}`);i.set(u,o)}}return new r({typeName:U.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:i,...j(n)})}};function xi(r,e){let t=at(r),n=at(e);if(r===e)return{valid:!0,data:r};if(t===I.object&&n===I.object){let i=$.objectKeys(e),o=$.objectKeys(r).filter(u=>i.indexOf(u)!==-1),s={...r,...e};for(let u of o){let l=xi(r[u],e[u]);if(!l.valid)return{valid:!1};s[u]=l.data}return{valid:!0,data:s}}else if(t===I.array&&n===I.array){if(r.length!==e.length)return{valid:!1};let i=[];for(let o=0;o<r.length;o++){let s=r[o],u=e[o],l=xi(s,u);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return t===I.date&&n===I.date&&+r==+e?{valid:!0,data:r}:{valid:!1}}var Ot=class extends L{_parse(e){let{status:t,ctx:n}=this._processInputParams(e),i=(o,s)=>{if(wi(o)||wi(s))return F;let u=xi(o.value,s.value);return u.valid?((vi(o)||vi(s))&&t.dirty(),{status:t.value,value:u.data}):(B(n,{code:_.invalid_intersection_types}),F)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([o,s])=>i(o,s)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};Ot.create=(r,e,t)=>new Ot({left:r,right:e,typeName:U.ZodIntersection,...j(t)});var De=class r extends L{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==I.array)return B(n,{code:_.invalid_type,expected:I.array,received:n.parsedType}),F;if(n.data.length<this._def.items.length)return B(n,{code:_.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),F;!this._def.rest&&n.data.length>this._def.items.length&&(B(n,{code:_.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let o=[...n.data].map((s,u)=>{let l=this._def.items[u]||this._def.rest;return l?l._parse(new Ee(n,s,n.path,u)):null}).filter(s=>!!s);return n.common.async?Promise.all(o).then(s=>oe.mergeArray(t,s)):oe.mergeArray(t,o)}get items(){return this._def.items}rest(e){return new r({...this._def,rest:e})}};De.create=(r,e)=>{if(!Array.isArray(r))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new De({items:r,typeName:U.ZodTuple,rest:null,...j(e)})};var fn=class r extends L{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==I.object)return B(n,{code:_.invalid_type,expected:I.object,received:n.parsedType}),F;let i=[],o=this._def.keyType,s=this._def.valueType;for(let u in n.data)i.push({key:o._parse(new Ee(n,u,n.path,u)),value:s._parse(new Ee(n,n.data[u],n.path,u))});return n.common.async?oe.mergeObjectAsync(t,i):oe.mergeObjectSync(t,i)}get element(){return this._def.valueType}static create(e,t,n){return t instanceof L?new r({keyType:e,valueType:t,typeName:U.ZodRecord,...j(n)}):new r({keyType:st.create(),valueType:e,typeName:U.ZodRecord,...j(t)})}},Xt=class extends L{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==I.map)return B(n,{code:_.invalid_type,expected:I.map,received:n.parsedType}),F;let i=this._def.keyType,o=this._def.valueType,s=[...n.data.entries()].map(([u,l],p)=>({key:i._parse(new Ee(n,u,n.path,[p,"key"])),value:o._parse(new Ee(n,l,n.path,[p,"value"]))}));if(n.common.async){let u=new Map;return Promise.resolve().then(async()=>{for(let l of s){let p=await l.key,m=await l.value;if(p.status==="aborted"||m.status==="aborted")return F;(p.status==="dirty"||m.status==="dirty")&&t.dirty(),u.set(p.value,m.value)}return{status:t.value,value:u}})}else{let u=new Map;for(let l of s){let p=l.key,m=l.value;if(p.status==="aborted"||m.status==="aborted")return F;(p.status==="dirty"||m.status==="dirty")&&t.dirty(),u.set(p.value,m.value)}return{status:t.value,value:u}}}};Xt.create=(r,e,t)=>new Xt({valueType:e,keyType:r,typeName:U.ZodMap,...j(t)});var Jt=class r extends L{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==I.set)return B(n,{code:_.invalid_type,expected:I.set,received:n.parsedType}),F;let i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(B(n,{code:_.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),t.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(B(n,{code:_.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),t.dirty());let o=this._def.valueType;function s(l){let p=new Set;for(let m of l){if(m.status==="aborted")return F;m.status==="dirty"&&t.dirty(),p.add(m.value)}return{status:t.value,value:p}}let u=[...n.data.values()].map((l,p)=>o._parse(new Ee(n,l,n.path,p)));return n.common.async?Promise.all(u).then(l=>s(l)):s(u)}min(e,t){return new r({...this._def,minSize:{value:e,message:k.toString(t)}})}max(e,t){return new r({...this._def,maxSize:{value:e,message:k.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}};Jt.create=(r,e)=>new Jt({valueType:r,minSize:null,maxSize:null,typeName:U.ZodSet,...j(e)});var cn=class r extends L{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==I.function)return B(t,{code:_.invalid_type,expected:I.function,received:t.parsedType}),F;function n(u,l){return an({data:u,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,on(),Cr].filter(p=>!!p),issueData:{code:_.invalid_arguments,argumentsError:l}})}function i(u,l){return an({data:u,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,on(),Cr].filter(p=>!!p),issueData:{code:_.invalid_return_type,returnTypeError:l}})}let o={errorMap:t.common.contextualErrorMap},s=t.data;if(this._def.returns instanceof ft){let u=this;return fe(async function(...l){let p=new ue([]),m=await u._def.args.parseAsync(l,o).catch(E=>{throw p.addIssue(n(l,E)),p}),y=await Reflect.apply(s,this,m);return await u._def.returns._def.type.parseAsync(y,o).catch(E=>{throw p.addIssue(i(y,E)),p})})}else{let u=this;return fe(function(...l){let p=u._def.args.safeParse(l,o);if(!p.success)throw new ue([n(l,p.error)]);let m=Reflect.apply(s,this,p.data),y=u._def.returns.safeParse(m,o);if(!y.success)throw new ue([i(m,y.error)]);return y.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new r({...this._def,args:De.create(e).rest(He.create())})}returns(e){return new r({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new r({args:e||De.create([]).rest(He.create()),returns:t||He.create(),typeName:U.ZodFunction,...j(n)})}},kt=class extends L{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}};kt.create=(r,e)=>new kt({getter:r,typeName:U.ZodLazy,...j(e)});var Rt=class extends L{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return B(t,{received:t.data,code:_.invalid_literal,expected:this._def.value}),F}return{status:"valid",value:e.data}}get value(){return this._def.value}};Rt.create=(r,e)=>new Rt({value:r,typeName:U.ZodLiteral,...j(e)});function ya(r,e){return new Ut({values:r,typeName:U.ZodEnum,...j(e)})}var Ut=class r extends L{_parse(e){if(typeof e.data!="string"){let t=this._getOrReturnCtx(e),n=this._def.values;return B(t,{expected:$.joinValues(n),received:t.parsedType,code:_.invalid_type}),F}if(this._def.values.indexOf(e.data)===-1){let t=this._getOrReturnCtx(e),n=this._def.values;return B(t,{received:t.data,code:_.invalid_enum_value,options:n}),F}return fe(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e){return r.create(e)}exclude(e){return r.create(this.options.filter(t=>!e.includes(t)))}};Ut.create=ya;var Ft=class extends L{_parse(e){let t=$.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==I.string&&n.parsedType!==I.number){let i=$.objectValues(t);return B(n,{expected:$.joinValues(i),received:n.parsedType,code:_.invalid_type}),F}if(t.indexOf(e.data)===-1){let i=$.objectValues(t);return B(n,{received:n.data,code:_.invalid_enum_value,options:i}),F}return fe(e.data)}get enum(){return this._def.values}};Ft.create=(r,e)=>new Ft({values:r,typeName:U.ZodNativeEnum,...j(e)});var ft=class extends L{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==I.promise&&t.common.async===!1)return B(t,{code:_.invalid_type,expected:I.promise,received:t.parsedType}),F;let n=t.parsedType===I.promise?t.data:Promise.resolve(t.data);return fe(n.then(i=>this._def.type.parseAsync(i,{path:t.path,errorMap:t.common.contextualErrorMap})))}};ft.create=(r,e)=>new ft({type:r,typeName:U.ZodPromise,...j(e)});var ve=class extends L{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===U.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:n}=this._processInputParams(e),i=this._def.effect||null,o={addIssue:s=>{B(n,s),s.fatal?t.abort():t.dirty()},get path(){return n.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){let s=i.transform(n.data,o);return n.common.issues.length?{status:"dirty",value:n.data}:n.common.async?Promise.resolve(s).then(u=>this._def.schema._parseAsync({data:u,path:n.path,parent:n})):this._def.schema._parseSync({data:s,path:n.path,parent:n})}if(i.type==="refinement"){let s=u=>{let l=i.refinement(u,o);if(n.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return u};if(n.common.async===!1){let u=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return u.status==="aborted"?F:(u.status==="dirty"&&t.dirty(),s(u.value),{status:t.value,value:u.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(u=>u.status==="aborted"?F:(u.status==="dirty"&&t.dirty(),s(u.value).then(()=>({status:t.value,value:u.value}))))}if(i.type==="transform")if(n.common.async===!1){let s=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Or(s))return s;let u=i.transform(s.value,o);if(u instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:u}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(s=>Or(s)?Promise.resolve(i.transform(s.value,o)).then(u=>({status:t.value,value:u})):s);$.assertNever(i)}};ve.create=(r,e,t)=>new ve({schema:r,typeName:U.ZodEffects,effect:e,...j(t)});ve.createWithPreprocess=(r,e,t)=>new ve({schema:e,effect:{type:"preprocess",transform:r},typeName:U.ZodEffects,...j(t)});var ke=class extends L{_parse(e){return this._getType(e)===I.undefined?fe(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};ke.create=(r,e)=>new ke({innerType:r,typeName:U.ZodOptional,...j(e)});var Xe=class extends L{_parse(e){return this._getType(e)===I.null?fe(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Xe.create=(r,e)=>new Xe({innerType:r,typeName:U.ZodNullable,...j(e)});var jt=class extends L{_parse(e){let{ctx:t}=this._processInputParams(e),n=t.data;return t.parsedType===I.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}};jt.create=(r,e)=>new jt({innerType:r,typeName:U.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...j(e)});var Qt=class extends L{_parse(e){let{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return sn(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new ue(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ue(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};Qt.create=(r,e)=>new Qt({innerType:r,typeName:U.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...j(e)});var er=class extends L{_parse(e){if(this._getType(e)!==I.nan){let n=this._getOrReturnCtx(e);return B(n,{code:_.invalid_type,expected:I.nan,received:n.parsedType}),F}return{status:"valid",value:e.data}}};er.create=r=>new er({typeName:U.ZodNaN,...j(r)});var El=Symbol("zod_brand"),ln=class extends L{_parse(e){let{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}},kr=class r extends L{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let o=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?F:o.status==="dirty"?(t.dirty(),ma(o.value)):this._def.out._parseAsync({data:o.value,path:n.path,parent:n})})();{let i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?F:i.status==="dirty"?(t.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,t){return new r({in:e,out:t,typeName:U.ZodPipeline})}},tr=class extends L{_parse(e){let t=this._def.innerType._parse(e);return Or(t)&&(t.value=Object.freeze(t.value)),t}};tr.create=(r,e)=>new tr({innerType:r,typeName:U.ZodReadonly,...j(e)});var ga=(r,e={},t)=>r?ut.create().superRefine((n,i)=>{var o,s;if(!r(n)){let u=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,l=(s=(o=u.fatal)!==null&&o!==void 0?o:t)!==null&&s!==void 0?s:!0,p=typeof u=="string"?{message:u}:u;i.addIssue({code:"custom",...p,fatal:l})}}):ut.create(),Al={object:he.lazycreate},U;(function(r){r.ZodString="ZodString",r.ZodNumber="ZodNumber",r.ZodNaN="ZodNaN",r.ZodBigInt="ZodBigInt",r.ZodBoolean="ZodBoolean",r.ZodDate="ZodDate",r.ZodSymbol="ZodSymbol",r.ZodUndefined="ZodUndefined",r.ZodNull="ZodNull",r.ZodAny="ZodAny",r.ZodUnknown="ZodUnknown",r.ZodNever="ZodNever",r.ZodVoid="ZodVoid",r.ZodArray="ZodArray",r.ZodObject="ZodObject",r.ZodUnion="ZodUnion",r.ZodDiscriminatedUnion="ZodDiscriminatedUnion",r.ZodIntersection="ZodIntersection",r.ZodTuple="ZodTuple",r.ZodRecord="ZodRecord",r.ZodMap="ZodMap",r.ZodSet="ZodSet",r.ZodFunction="ZodFunction",r.ZodLazy="ZodLazy",r.ZodLiteral="ZodLiteral",r.ZodEnum="ZodEnum",r.ZodEffects="ZodEffects",r.ZodNativeEnum="ZodNativeEnum",r.ZodOptional="ZodOptional",r.ZodNullable="ZodNullable",r.ZodDefault="ZodDefault",r.ZodCatch="ZodCatch",r.ZodPromise="ZodPromise",r.ZodBranded="ZodBranded",r.ZodPipeline="ZodPipeline",r.ZodReadonly="ZodReadonly"})(U||(U={}));var Sl=(r,e={message:`Input not instance of ${r.name}`})=>ga(t=>t instanceof r,e),wa=st.create,va=Et.create,Tl=er.create,Il=At.create,xa=St.create,Bl=Tt.create,Cl=Ht.create,Ol=It.create,kl=Bt.create,Rl=ut.create,Ul=He.create,Fl=Re.create,jl=Kt.create,Ll=Ke.create,Pl=he.create,Nl=he.strictCreate,Ml=Ct.create,Dl=un.create,Wl=Ot.create,$l=De.create,zl=fn.create,Zl=Xt.create,ql=Jt.create,Vl=cn.create,Gl=kt.create,Yl=Rt.create,Hl=Ut.create,Kl=Ft.create,Xl=ft.create,pa=ve.create,Jl=ke.create,Ql=Xe.create,eh=ve.createWithPreprocess,th=kr.create,rh=()=>wa().optional(),nh=()=>va().optional(),ih=()=>xa().optional(),oh={string:r=>st.create({...r,coerce:!0}),number:r=>Et.create({...r,coerce:!0}),boolean:r=>St.create({...r,coerce:!0}),bigint:r=>At.create({...r,coerce:!0}),date:r=>Tt.create({...r,coerce:!0})},ah=F,g=Object.freeze({__proto__:null,defaultErrorMap:Cr,setErrorMap:cl,getErrorMap:on,makeIssue:an,EMPTY_PATH:ll,addIssueToContext:B,ParseStatus:oe,INVALID:F,DIRTY:ma,OK:fe,isAborted:wi,isDirty:vi,isValid:Or,isAsync:sn,get util(){return $},get objectUtil(){return gi},ZodParsedType:I,getParsedType:at,ZodType:L,ZodString:st,ZodNumber:Et,ZodBigInt:At,ZodBoolean:St,ZodDate:Tt,ZodSymbol:Ht,ZodUndefined:It,ZodNull:Bt,ZodAny:ut,ZodUnknown:He,ZodNever:Re,ZodVoid:Kt,ZodArray:Ke,ZodObject:he,ZodUnion:Ct,ZodDiscriminatedUnion:un,ZodIntersection:Ot,ZodTuple:De,ZodRecord:fn,ZodMap:Xt,ZodSet:Jt,ZodFunction:cn,ZodLazy:kt,ZodLiteral:Rt,ZodEnum:Ut,ZodNativeEnum:Ft,ZodPromise:ft,ZodEffects:ve,ZodTransformer:ve,ZodOptional:ke,ZodNullable:Xe,ZodDefault:jt,ZodCatch:Qt,ZodNaN:er,BRAND:El,ZodBranded:ln,ZodPipeline:kr,ZodReadonly:tr,custom:ga,Schema:L,ZodSchema:L,late:Al,get ZodFirstPartyTypeKind(){return U},coerce:oh,any:Rl,array:Ll,bigint:Il,boolean:xa,date:Bl,discriminatedUnion:Dl,effect:pa,enum:Hl,function:Vl,instanceof:Sl,intersection:Wl,lazy:Gl,literal:Yl,map:Zl,nan:Tl,nativeEnum:Kl,never:Fl,null:kl,nullable:Ql,number:va,object:Pl,oboolean:ih,onumber:nh,optional:Jl,ostring:rh,pipeline:th,preprocess:eh,promise:Xl,record:zl,set:ql,strictObject:Nl,string:wa,symbol:Cl,transformer:pa,tuple:$l,undefined:Ol,union:Ml,unknown:Ul,void:jl,NEVER:ah,ZodIssueCode:_,quotelessJson:fl,ZodError:ue});function _a({fetch:r,GATEWAY_URL:e}){let t=`
    query GetTransactions ($transactionIds: [ID!]!) {
      transactions(ids: $transactionIds) {
        edges {
          node {
            owner {
              address
            }
            tags {
              name
              value
            }
            block {
              id
              height
              timestamp
            }
          }
        }
      }
    }`,n=g.object({data:g.object({transactions:g.object({edges:g.array(g.object({node:g.record(g.any())}))})})});return i=>O(i).chain(N(o=>r(`${e}/graphql`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:t,variables:{transactionIds:[o]}})}).then(s=>s.json()).then(n.parse).then(hi(["data","transactions","edges","0","node"])))).toPromise()}var Ia=Tn(Ta(),1);var _i=(r="@permaweb/aoconnect")=>{let e=(0,Ia.default)(r);return e.child=t=>_i(`${e.namespace}:${t}`),e.tap=(t,...n)=>mi((...i)=>e(t,...n,...i)),e};function dn(r){return Oe(Ye([]),Ce((e,t)=>Oe(pi([],t.name),gt(t.value),ne(t.name,ge,e))(e),{}),Ge(e=>e.length>1?e:e[0]))(r)}function pe(r,e){return t=>Tr(ei([rn(r,"name"),xt(yt(e),rn(e,"value"),xr)]),t)}function or(r){return tn([[_t(String),Me(r)],[_t(Array),ci(r)],[xr,$n]])}function bi(r=""){return r.endsWith("/")?bi(r.slice(0,-1)):r}function Ae(r){let e;return _t(ue,r)?(e=new Error(xh(r)),e.stack+=r.stack):_t(Error,r)?e=r:fi("message",r)?e=new Error(r.message):_t(String,r)?e=new Error(r):e=new Error("An error occurred"),e}function xh(r){return Oe(e=>function t(n,i,o){return Ce((s,u)=>Oe(tn([[Me(_.invalid_arguments),()=>t(u.argumentsError,422,"Invalid Arguments")],[Me(_.invalid_return_type),()=>t(u.returnTypeError,500,"Invalid Return")],[Me(_.invalid_union),()=>ai(l=>t(l,400,"Invalid Union"),u.unionErrors)],[xr,()=>[{...u,status:i,contextCode:o}]]]),vt(s))(u.code),[],n.issues)}(e,400,""),e=>Ce((t,n)=>{let{message:i,path:o,contextCode:s}=n,u=o[1]||o[0],l=s?`${s} `:"";return t.push(`${l}'${u}': ${i}.`),t},[],e),li(" | "))(r)}var _h=g.object({id:g.string().min(1,{message:"message is required to be a message id"}),processId:g.string().min(1,{message:"process is required to be a process id"})});function Ba(){return r=>O(r).map(_h.parse).map(()=>r)}var Rr=g.object({name:g.string(),value:g.string()}),Ca=g.function().args(g.object({Id:g.string(),Target:g.string(),Owner:g.string(),Anchor:g.string().optional(),Data:g.any().default("1234"),Tags:g.array(g.object({name:g.string(),value:g.string()}))})).returns(g.promise(g.any())),Oa=g.function().args(g.object({id:g.string().min(1,{message:"message id is required"}),processId:g.string().min(1,{message:"process id is required"})})).returns(g.promise(g.any())),ka=g.function().args(g.object({process:g.string().min(1,{message:"process id is required"}),from:g.string().optional(),to:g.string().optional(),sort:g.enum(["ASC","DESC"]).default("ASC"),limit:g.string().optional()})).returns(g.promise(g.object({edges:g.array(g.object({cursor:g.string(),node:g.object({Output:g.any().optional(),Messages:g.array(g.any()).optional(),Spawns:g.array(g.any()).optional(),Error:g.any().optional()})}))}))),Ei=g.function().args(g.object({processId:g.string(),data:g.any(),tags:g.array(Rr),anchor:g.string().optional(),signer:g.any()})).returns(g.promise(g.object({messageId:g.string()}).passthrough())),Ra=g.function().args(g.object({data:g.any(),tags:g.array(Rr),signer:g.any()})).returns(g.promise(g.object({processId:g.string()}).passthrough())),mn=Ei,Ua=g.function().args(g.object({suUrl:g.string().url(),processId:g.string()})).returns(g.promise(g.object({tags:g.array(Rr)}).passthrough())),Fa=g.function().args(g.string()).returns(g.promise(g.object({url:g.string()}))),ja=g.function().args(g.string()).returns(g.promise(g.boolean())),La=g.function().args(g.string()).returns(g.promise(g.object({tags:g.array(Rr)}).passthrough())),ct=g.function().args(g.object({data:g.any(),tags:g.array(Rr),target:g.string().optional(),anchor:g.string().optional()})).returns(g.promise(g.object({id:g.string(),raw:g.any()})));function Pa({loadResult:r}){return r=N(Oa.implement(r)),e=>O({id:e.id,processId:e.processId}).chain(r)}function Na(r){let e=Ba(r),t=Pa(r);return({message:n,process:i})=>O({id:n,processId:i}).chain(e).chain(t).map(r.logger.tap('readResult result for message "%s": %O',n)).map(o=>o).bimap(Ae,we).toPromise()}function bh({loadProcessMeta:r,locateScheduler:e,logger:t}){let n=(i,o,s)=>u=>o(u[i])?_e(u):Te(`Tag '${i}': ${s}`);return r=N(Ua.implement(r)),e=N(Fa.implement(e)),i=>O(i).map(t.tap("Verifying Process")).map(t.tap("Locating Scheduler for Process to retrieve Process meta")).chain(e).chain(({url:o})=>r({suUrl:bi(o),processId:i})).map(ie("tags")).map(dn).chain(n("Data-Protocol",or("ao"),"value 'ao' was not found on process")).chain(n("Type",or("Process"),"value 'Process' was not found on process")).chain(n("Module",bt,"was not found on process"))}function ar(r){let e=bh(r);return t=>O(t.id).chain(e).map(()=>t)}var Eh=g.array(g.object({name:g.string(),value:g.string()}));function Ah(){return r=>O(r.tags).map(Ye([])).map(pe("Data-Protocol","ao")).map(pe("Variant")).map(pe("Type")).map(pe("SDK")).map(vt(ge,[{name:"Data-Protocol",value:"ao"},{name:"Variant",value:"ao.TN.1"},{name:"Type",value:"Message"},{name:"SDK",value:"aoconnect"}])).map(Eh.parse).map(ne("tags",ge,r))}function Sh({logger:r}){return e=>O(e).chain(xt(yt(e.data),()=>_e(e),()=>_e(Math.random().toString().slice(-4)).map(ne("data",ge,e)).map(t=>Oe(ie("tags"),pe("Content-Type"),gt({name:"Content-Type",value:"text/plain"}),ne("tags",ge,t))(t)).map(r.tap('added pseudo-random string as message "data"'))))}function Ma(r){let e=Ah(r),t=Sh(r),n=Ei.implement(r.deployMessage);return i=>O(i).chain(e).chain(t).chain(N(({id:o,data:s,tags:u,anchor:l,signer:p})=>n({processId:o,data:s,tags:u,anchor:l,signer:ct.implement(p)}))).map(o=>ne("messageId",o.messageId,i))}function Da(r){let e=ar(r),t=Ma(r);return({process:n,data:i,tags:o,anchor:s,signer:u})=>O({id:n,data:i,tags:o,anchor:s,signer:u}).chain(e).chain(t).map(l=>l.messageId).bimap(Ae,we).toPromise()}var Ur=(r,e,t)=>n=>e(n[r])?_e(n):Te(`Tag '${r}': ${t}`);function Th({loadTransactionMeta:r,logger:e}){return r=N(La.implement(r)),t=>O(t).chain(r).map(ie("tags")).map(dn).chain(Ur("Data-Protocol",or("ao"),"value 'ao' was not found on module")).chain(Ur("Type",or("Module"),"value 'Module' was not found on module")).chain(Ur("Module-Format",bt,"was not found on module")).chain(Ur("Input-Encoding",bt,"was not found on module")).chain(Ur("Output-Encoding",bt,"was not found on module")).bimap(e.tap("Verifying module source failed: %s"),e.tap("Verified module source"))}function Ih({logger:r,validateScheduler:e}){return e=N(ja.implement(e)),t=>O(t).chain(n=>e(n).chain(i=>i?_e(n):Te(`Valid Scheduler-Location owned by ${n} not found`))).bimap(r.tap("Verifying scheduler failed: %s"),r.tap("Verified scheduler"))}function Bh({logger:r}){return e=>O(e).map(r.tap("Checking for signer")).chain(t=>t?_e(t):Te("signer not found"))}function Wa(r){let e=r.logger.child("verifyInput");r={...r,logger:e};let t=Th(r),n=Ih(r),i=Bh(r);return o=>O(o).chain(s=>t(s.module).map(()=>s)).chain(s=>n(s.scheduler)).map(()=>o).chain(s=>i(s.signer).map(()=>s)).bimap(e.tap("Error when verify input: %s"),e.tap("Successfully verified inputs"))}var Ch=g.array(g.object({name:g.string(),value:g.string()}));function Oh(){return r=>O(r).map(ie("tags")).map(Ye([])).map(pe("Data-Protocol","ao")).map(pe("Variant")).map(pe("Type")).map(pe("Module")).map(pe("Scheduler")).map(pe("SDK")).map(vt(ge,[{name:"Data-Protocol",value:"ao"},{name:"Variant",value:"ao.TN.1"},{name:"Type",value:"Process"},{name:"Module",value:r.module},{name:"Scheduler",value:r.scheduler},{name:"SDK",value:"aoconnect"}])).map(Ch.parse).map(ne("tags",ge,r))}function kh({logger:r}){return e=>O(e).chain(xt(yt(e.data),()=>_e(e),()=>_e(Math.random().toString().slice(-4)).map(ne("data",ge,e)).map(t=>Oe(ie("tags"),pe("Content-Type"),gt({name:"Content-Type",value:"text/plain"}),ne("tags",ge,t))(t)).map(r.tap('added pseudo-random string as process "data"'))))}function $a(r){let e=r.logger.child("uploadProcess");r={...r,logger:e};let t=Oh(r),n=kh(r),i=Ra.implement(r.deployProcess);return o=>O(o).chain(t).chain(n).chain(N(({data:s,tags:u,signer:l})=>i({data:s,tags:u,signer:ct.implement(l)}))).map(s=>ne("processId",s.processId,o))}function za(r){let e=Wa(r),t=$a(r);return({module:n,scheduler:i,signer:o,tags:s,data:u})=>O({module:n,scheduler:i,signer:o,tags:s,data:u}).chain(e).chain(t).map(l=>l.processId).bimap(Ae,we).toPromise()}function Za(r){let e=mn.implement(r.deployMonitor);return t=>O(t).chain(N(({id:n,signer:i})=>e({processId:n,signer:ct.implement(i),data:Math.random().toString().slice(-4),tags:[]}))).map(n=>ne("monitorId",n.messageId,t))}function qa(r){let e=ar(r),t=Za(r);return({process:n,signer:i})=>O({id:n,signer:i}).chain(e).chain(t).map(o=>o.monitorId).bimap(Ae,we).toPromise()}function Va(r){let e=mn.implement(r.deployUnmonitor);return t=>O(t).chain(N(({id:n,signer:i})=>e({processId:n,signer:ct.implement(i),data:Math.random().toString().slice(-4),tags:[]}))).map(n=>ne("monitorId",n.messageId,t))}function Ga(r){let e=ar(r),t=Va(r);return({process:n,signer:i})=>O({id:n,signer:i}).chain(e).chain(t).map(o=>o.monitorId).bimap(Ae,we).toPromise()}var Rh=g.object({process:g.string().min(1,{message:"process identifier is required"}),from:g.string().optional(),to:g.string().optional(),sort:g.enum(["ASC","DESC"]).default("ASC"),limit:g.string().optional()});function Ya(){return r=>O(r).map(Rh.parse).map(()=>r)}function Ha({queryResults:r}){return r=N(ka.implement(r)),e=>O({process:e.process,from:e.from,to:e.to,sort:e.sort}).chain(r)}function Ka(r){let e=Ya(r),t=Ha(r);return({process:n,from:i,to:o,sort:s})=>O({process:n,from:i,to:o,sort:s}).chain(e).chain(t).map(r.logger.tap('readResults result for message "%s": %O',n)).map(u=>u).bimap(Ae,we).toPromise()}var Uh=g.object({Id:g.string(),Target:g.string(),Owner:g.string(),Anchor:g.string().optional(),Data:g.any().default("1234"),Tags:g.array(g.object({name:g.string(),value:g.string()}))});function Xa(){return r=>O(r).map(Uh.parse).map(e=>(e.Tags=e.Tags.concat([{name:"Data-Protocol",value:"ao"},{name:"Type",value:"Message"},{name:"Variant",value:"ao.TN.1"}]),e))}function Ja({dryrunFetch:r}){return N(Ca.implement(r))}function Qa(r){let e=Xa(r),t=Ja(r);return n=>O(n).map(Fh).chain(e).chain(t).toPromise()}function Fh({process:r,data:e,tags:t,anchor:n,...i}){return{Id:"1234",Owner:"1234",...i,Target:r,Data:e||"1234",Tags:t||[],Anchor:n||"0"}}var jh="https://arweave.net",Lh="https://mu.ao-testnet.xyz",Ph="https://cu.ao-testnet.xyz";function es({GATEWAY_URL:r=jh,MU_URL:e=Lh,CU_URL:t=Ph}={}){let n=_i(),{locate:i,validate:o}=Pn({cacheSize:100,GATEWAY_URL:r}),s=Vo({MAX_SIZE:25}),u=n.child("result"),l=Na({loadResult:Ro({fetch,CU_URL:t,logger:u}),logger:u}),p=n.child("message"),m=Da({loadProcessMeta:qr({fetch,cache:s,logger:p}),locateScheduler:i,deployMessage:Io({fetch,MU_URL:e,logger:p}),logger:p}),y=n.child("spawn"),x=za({loadTransactionMeta:_a({fetch,GATEWAY_URL:r}),validateScheduler:o,deployProcess:Bo({fetch,MU_URL:e,logger:y}),logger:y}),E=n.child("monitor"),S=qa({loadProcessMeta:qr({fetch,cache:s,logger:E}),locateScheduler:i,deployMonitor:Co({fetch,MU_URL:e,logger:E}),logger:E}),A=n.child("unmonitor"),T=Ga({loadProcessMeta:qr({fetch,cache:s,logger:A}),locateScheduler:i,deployUnmonitor:Oo({fetch,MU_URL:e,logger:A}),logger:E}),C=n.child("results"),M=Ka({queryResults:Uo({fetch,CU_URL:t,logger:C}),logger:C}),D=n.child("dryrun"),P=Qa({dryrunFetch:ko({fetch,CU_URL:t,logger:D}),logger:D});return{result:l,results:M,message:m,spawn:x,monitor:S,unmonitor:T,dryrun:P}}var _n={};tu(_n,{createDataItemSigner:()=>Wp});var Wi=Tn(_s(),1);var yp=Object.create,Ni=Object.defineProperty,gp=Object.getOwnPropertyDescriptor,wp=Object.getOwnPropertyNames,vp=Object.getPrototypeOf,xp=Object.prototype.hasOwnProperty,et=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),_p=(r,e)=>{for(var t in e)Ni(r,t,{get:e[t],enumerable:!0})},bp=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of wp(e))!xp.call(r,i)&&i!==t&&Ni(r,i,{get:()=>e[i],enumerable:!(n=gp(e,i))||n.enumerable});return r},Mt=(r,e,t)=>(t=r!=null?yp(vp(r)):{},bp(e||!r||!r.__esModule?Ni(t,"default",{value:r,enumerable:!0}):t,r)),Ep=et(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});function e(t){var n=4,i=t.length,o=i%n;if(!o)return t;var s=i,u=n-o,l=i+u,p=Buffer.alloc(l);for(p.write(t);u--;)p.write("=",s++);return p.toString()}r.default=e}),Ap=et(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var e=Ep();function t(l,p){return p===void 0&&(p="utf8"),Buffer.isBuffer(l)?o(l.toString("base64")):o(Buffer.from(l,p).toString("base64"))}function n(l,p){return p===void 0&&(p="utf8"),Buffer.from(i(l),"base64").toString(p)}function i(l){return l=l.toString(),e.default(l).replace(/\-/g,"+").replace(/_/g,"/")}function o(l){return l.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function s(l){return Buffer.from(i(l),"base64")}var u=t;u.encode=t,u.decode=n,u.toBase64=i,u.fromBase64=o,u.toBuffer=s,r.default=u}),Mi=et((r,e)=>{e.exports=Ap().default,e.exports.default=e.exports}),Es=et(r=>{"use strict";r.byteLength=l,r.toByteArray=m,r.fromByteArray=E;var e=[],t=[],n=typeof Uint8Array<"u"?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(o=0,s=i.length;o<s;++o)e[o]=i[o],t[i.charCodeAt(o)]=o;var o,s;t[45]=62,t[95]=63;function u(S){var A=S.length;if(A%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var T=S.indexOf("=");T===-1&&(T=A);var C=T===A?0:4-T%4;return[T,C]}function l(S){var A=u(S),T=A[0],C=A[1];return(T+C)*3/4-C}function p(S,A,T){return(A+T)*3/4-T}function m(S){var A,T=u(S),C=T[0],M=T[1],D=new n(p(S,C,M)),P=0,q=M>0?C-4:C,Z;for(Z=0;Z<q;Z+=4)A=t[S.charCodeAt(Z)]<<18|t[S.charCodeAt(Z+1)]<<12|t[S.charCodeAt(Z+2)]<<6|t[S.charCodeAt(Z+3)],D[P++]=A>>16&255,D[P++]=A>>8&255,D[P++]=A&255;return M===2&&(A=t[S.charCodeAt(Z)]<<2|t[S.charCodeAt(Z+1)]>>4,D[P++]=A&255),M===1&&(A=t[S.charCodeAt(Z)]<<10|t[S.charCodeAt(Z+1)]<<4|t[S.charCodeAt(Z+2)]>>2,D[P++]=A>>8&255,D[P++]=A&255),D}function y(S){return e[S>>18&63]+e[S>>12&63]+e[S>>6&63]+e[S&63]}function x(S,A,T){for(var C,M=[],D=A;D<T;D+=3)C=(S[D]<<16&16711680)+(S[D+1]<<8&65280)+(S[D+2]&255),M.push(y(C));return M.join("")}function E(S){for(var A,T=S.length,C=T%3,M=[],D=16383,P=0,q=T-C;P<q;P+=D)M.push(x(S,P,P+D>q?q:P+D));return C===1?(A=S[T-1],M.push(e[A>>2]+e[A<<4&63]+"==")):C===2&&(A=(S[T-2]<<8)+S[T-1],M.push(e[A>>10]+e[A>>4&63]+e[A<<2&63]+"=")),M.join("")}}),As=et(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.b64UrlDecode=r.b64UrlEncode=r.bufferTob64Url=r.bufferTob64=r.b64UrlToBuffer=r.stringToB64Url=r.stringToBuffer=r.bufferToString=r.b64UrlToString=r.concatBuffers=void 0;var e=Es();function t(x){let E=0;for(let T=0;T<x.length;T++)E+=x[T].byteLength;let S=new Uint8Array(E),A=0;S.set(new Uint8Array(x[0]),A),A+=x[0].byteLength;for(let T=1;T<x.length;T++)S.set(new Uint8Array(x[T]),A),A+=x[T].byteLength;return S}r.concatBuffers=t;function n(x){let E=u(x);return i(E)}r.b64UrlToString=n;function i(x){return new TextDecoder("utf-8",{fatal:!0}).decode(x)}r.bufferToString=i;function o(x){return new TextEncoder().encode(x)}r.stringToBuffer=o;function s(x){return p(o(x))}r.stringToB64Url=s;function u(x){return new Uint8Array(e.toByteArray(y(x)))}r.b64UrlToBuffer=u;function l(x){return e.fromByteArray(new Uint8Array(x))}r.bufferTob64=l;function p(x){return m(l(x))}r.bufferTob64Url=p;function m(x){return x.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}r.b64UrlEncode=m;function y(x){x=x.replace(/\-/g,"+").replace(/\_/g,"/");let E;return x.length%4==0?E=0:E=4-x.length%4,x.concat("=".repeat(E))}r.b64UrlDecode=y}),Sp=et(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var e=As(),t=class{keyLength=4096;publicExponent=65537;hashAlgorithm="sha256";driver;constructor(){if(!this.detectWebCrypto())throw new Error("SubtleCrypto not available!");this.driver=crypto.subtle}async generateJWK(){let n=await this.driver.generateKey({name:"RSA-PSS",modulusLength:4096,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign"]),i=await this.driver.exportKey("jwk",n.privateKey);return{kty:i.kty,e:i.e,n:i.n,d:i.d,p:i.p,q:i.q,dp:i.dp,dq:i.dq,qi:i.qi}}async sign(n,i,{saltLength:o}={}){let s=await this.driver.sign({name:"RSA-PSS",saltLength:32},await this.jwkToCryptoKey(n),i);return new Uint8Array(s)}async hash(n,i="SHA-256"){let o=await this.driver.digest(i,n);return new Uint8Array(o)}async verify(n,i,o){let s={kty:"RSA",e:"AQAB",n},u=await this.jwkToPublicCryptoKey(s),l=await this.driver.digest("SHA-256",i),p=await this.driver.verify({name:"RSA-PSS",saltLength:0},u,o,i),m=await this.driver.verify({name:"RSA-PSS",saltLength:32},u,o,i),y=await this.driver.verify({name:"RSA-PSS",saltLength:Math.ceil((u.algorithm.modulusLength-1)/8)-l.byteLength-2},u,o,i);return p||m||y}async jwkToCryptoKey(n){return this.driver.importKey("jwk",n,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["sign"])}async jwkToPublicCryptoKey(n){return this.driver.importKey("jwk",n,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["verify"])}detectWebCrypto(){if(typeof crypto>"u")return!1;let n=crypto?.subtle;return n===void 0?!1:["generateKey","importKey","exportKey","digest","sign"].every(i=>typeof n[i]=="function")}async encrypt(n,i,o){let s=await this.driver.importKey("raw",typeof i=="string"?e.stringToBuffer(i):i,{name:"PBKDF2",length:32},!1,["deriveKey"]),u=await this.driver.deriveKey({name:"PBKDF2",salt:o?e.stringToBuffer(o):e.stringToBuffer("salt"),iterations:1e5,hash:"SHA-256"},s,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),l=new Uint8Array(16);crypto.getRandomValues(l);let p=await this.driver.encrypt({name:"AES-CBC",iv:l},u,n);return e.concatBuffers([l,p])}async decrypt(n,i,o){let s=await this.driver.importKey("raw",typeof i=="string"?e.stringToBuffer(i):i,{name:"PBKDF2",length:32},!1,["deriveKey"]),u=await this.driver.deriveKey({name:"PBKDF2",salt:o?e.stringToBuffer(o):e.stringToBuffer("salt"),iterations:1e5,hash:"SHA-256"},s,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),l=n.slice(0,16),p=await this.driver.decrypt({name:"AES-CBC",iv:l},u,n.slice(16));return e.concatBuffers([p])}};r.default=t}),Tp=et(r=>{r.read=function(e,t,n,i,o){var s,u,l=o*8-i-1,p=(1<<l)-1,m=p>>1,y=-7,x=n?o-1:0,E=n?-1:1,S=e[t+x];for(x+=E,s=S&(1<<-y)-1,S>>=-y,y+=l;y>0;s=s*256+e[t+x],x+=E,y-=8);for(u=s&(1<<-y)-1,s>>=-y,y+=i;y>0;u=u*256+e[t+x],x+=E,y-=8);if(s===0)s=1-m;else{if(s===p)return u?NaN:(S?-1:1)*(1/0);u=u+Math.pow(2,i),s=s-m}return(S?-1:1)*u*Math.pow(2,s-i)},r.write=function(e,t,n,i,o,s){var u,l,p,m=s*8-o-1,y=(1<<m)-1,x=y>>1,E=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,S=i?0:s-1,A=i?1:-1,T=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(l=isNaN(t)?1:0,u=y):(u=Math.floor(Math.log(t)/Math.LN2),t*(p=Math.pow(2,-u))<1&&(u--,p*=2),u+x>=1?t+=E/p:t+=E*Math.pow(2,1-x),t*p>=2&&(u++,p/=2),u+x>=y?(l=0,u=y):u+x>=1?(l=(t*p-1)*Math.pow(2,o),u=u+x):(l=t*Math.pow(2,x-1)*Math.pow(2,o),u=0));o>=8;e[n+S]=l&255,S+=A,l/=256,o-=8);for(u=u<<o|l,m+=o;m>0;e[n+S]=u&255,S+=A,u/=256,m-=8);e[n+S-A]|=T*128}}),ji=et(r=>{"use strict";var e=Es(),t=Tp(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=u,r.SlowBuffer=M,r.INSPECT_MAX_BYTES=50;var i=2147483647;r.kMaxLength=i,u.TYPED_ARRAY_SUPPORT=o(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{let a=new Uint8Array(1),f={foo:function(){return 42}};return Object.setPrototypeOf(f,Uint8Array.prototype),Object.setPrototypeOf(a,f),a.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function s(a){if(a>i)throw new RangeError('The value "'+a+'" is invalid for option "size"');let f=new Uint8Array(a);return Object.setPrototypeOf(f,u.prototype),f}function u(a,f,c){if(typeof a=="number"){if(typeof f=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return y(a)}return l(a,f,c)}u.poolSize=8192;function l(a,f,c){if(typeof a=="string")return x(a,f);if(ArrayBuffer.isView(a))return S(a);if(a==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a);if(je(a,ArrayBuffer)||a&&je(a.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(je(a,SharedArrayBuffer)||a&&je(a.buffer,SharedArrayBuffer)))return A(a,f,c);if(typeof a=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let h=a.valueOf&&a.valueOf();if(h!=null&&h!==a)return u.from(h,f,c);let d=T(a);if(d)return d;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof a[Symbol.toPrimitive]=="function")return u.from(a[Symbol.toPrimitive]("string"),f,c);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a)}u.from=function(a,f,c){return l(a,f,c)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function p(a){if(typeof a!="number")throw new TypeError('"size" argument must be of type number');if(a<0)throw new RangeError('The value "'+a+'" is invalid for option "size"')}function m(a,f,c){return p(a),a<=0?s(a):f!==void 0?typeof c=="string"?s(a).fill(f,c):s(a).fill(f):s(a)}u.alloc=function(a,f,c){return m(a,f,c)};function y(a){return p(a),s(a<0?0:C(a)|0)}u.allocUnsafe=function(a){return y(a)},u.allocUnsafeSlow=function(a){return y(a)};function x(a,f){if((typeof f!="string"||f==="")&&(f="utf8"),!u.isEncoding(f))throw new TypeError("Unknown encoding: "+f);let c=D(a,f)|0,h=s(c),d=h.write(a,f);return d!==c&&(h=h.slice(0,d)),h}function E(a){let f=a.length<0?0:C(a.length)|0,c=s(f);for(let h=0;h<f;h+=1)c[h]=a[h]&255;return c}function S(a){if(je(a,Uint8Array)){let f=new Uint8Array(a);return A(f.buffer,f.byteOffset,f.byteLength)}return E(a)}function A(a,f,c){if(f<0||a.byteLength<f)throw new RangeError('"offset" is outside of buffer bounds');if(a.byteLength<f+(c||0))throw new RangeError('"length" is outside of buffer bounds');let h;return f===void 0&&c===void 0?h=new Uint8Array(a):c===void 0?h=new Uint8Array(a,f):h=new Uint8Array(a,f,c),Object.setPrototypeOf(h,u.prototype),h}function T(a){if(u.isBuffer(a)){let f=C(a.length)|0,c=s(f);return c.length===0||a.copy(c,0,0,f),c}if(a.length!==void 0)return typeof a.length!="number"||An(a.length)?s(0):E(a);if(a.type==="Buffer"&&Array.isArray(a.data))return E(a.data)}function C(a){if(a>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return a|0}function M(a){return+a!=a&&(a=0),u.alloc(+a)}u.isBuffer=function(a){return a!=null&&a._isBuffer===!0&&a!==u.prototype},u.compare=function(a,f){if(je(a,Uint8Array)&&(a=u.from(a,a.offset,a.byteLength)),je(f,Uint8Array)&&(f=u.from(f,f.offset,f.byteLength)),!u.isBuffer(a)||!u.isBuffer(f))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(a===f)return 0;let c=a.length,h=f.length;for(let d=0,v=Math.min(c,h);d<v;++d)if(a[d]!==f[d]){c=a[d],h=f[d];break}return c<h?-1:h<c?1:0},u.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(a,f){if(!Array.isArray(a))throw new TypeError('"list" argument must be an Array of Buffers');if(a.length===0)return u.alloc(0);let c;if(f===void 0)for(f=0,c=0;c<a.length;++c)f+=a[c].length;let h=u.allocUnsafe(f),d=0;for(c=0;c<a.length;++c){let v=a[c];if(je(v,Uint8Array))d+v.length>h.length?(u.isBuffer(v)||(v=u.from(v)),v.copy(h,d)):Uint8Array.prototype.set.call(h,v,d);else if(u.isBuffer(v))v.copy(h,d);else throw new TypeError('"list" argument must be an Array of Buffers');d+=v.length}return h};function D(a,f){if(u.isBuffer(a))return a.length;if(ArrayBuffer.isView(a)||je(a,ArrayBuffer))return a.byteLength;if(typeof a!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof a);let c=a.length,h=arguments.length>2&&arguments[2]===!0;if(!h&&c===0)return 0;let d=!1;for(;;)switch(f){case"ascii":case"latin1":case"binary":return c;case"utf8":case"utf-8":return En(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c*2;case"hex":return c>>>1;case"base64":return Xi(a).length;default:if(d)return h?-1:En(a).length;f=(""+f).toLowerCase(),d=!0}}u.byteLength=D;function P(a,f,c){let h=!1;if((f===void 0||f<0)&&(f=0),f>this.length||((c===void 0||c>this.length)&&(c=this.length),c<=0)||(c>>>=0,f>>>=0,c<=f))return"";for(a||(a="utf8");;)switch(a){case"hex":return Ws(this,f,c);case"utf8":case"utf-8":return $i(this,f,c);case"ascii":return Ms(this,f,c);case"latin1":case"binary":return Ds(this,f,c);case"base64":return Ps(this,f,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $s(this,f,c);default:if(h)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),h=!0}}u.prototype._isBuffer=!0;function q(a,f,c){let h=a[f];a[f]=a[c],a[c]=h}u.prototype.swap16=function(){let a=this.length;if(a%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let f=0;f<a;f+=2)q(this,f,f+1);return this},u.prototype.swap32=function(){let a=this.length;if(a%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let f=0;f<a;f+=4)q(this,f,f+3),q(this,f+1,f+2);return this},u.prototype.swap64=function(){let a=this.length;if(a%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let f=0;f<a;f+=8)q(this,f,f+7),q(this,f+1,f+6),q(this,f+2,f+5),q(this,f+3,f+4);return this},u.prototype.toString=function(){let a=this.length;return a===0?"":arguments.length===0?$i(this,0,a):P.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(a){if(!u.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a?!0:u.compare(this,a)===0},u.prototype.inspect=function(){let a="",f=r.INSPECT_MAX_BYTES;return a=this.toString("hex",0,f).replace(/(.{2})/g,"$1 ").trim(),this.length>f&&(a+=" ... "),"<Buffer "+a+">"},n&&(u.prototype[n]=u.prototype.inspect),u.prototype.compare=function(a,f,c,h,d){if(je(a,Uint8Array)&&(a=u.from(a,a.offset,a.byteLength)),!u.isBuffer(a))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof a);if(f===void 0&&(f=0),c===void 0&&(c=a?a.length:0),h===void 0&&(h=0),d===void 0&&(d=this.length),f<0||c>a.length||h<0||d>this.length)throw new RangeError("out of range index");if(h>=d&&f>=c)return 0;if(h>=d)return-1;if(f>=c)return 1;if(f>>>=0,c>>>=0,h>>>=0,d>>>=0,this===a)return 0;let v=d-h,b=c-f,V=Math.min(v,b),te=this.slice(h,d),H=a.slice(f,c);for(let G=0;G<V;++G)if(te[G]!==H[G]){v=te[G],b=H[G];break}return v<b?-1:b<v?1:0};function Z(a,f,c,h,d){if(a.length===0)return-1;if(typeof c=="string"?(h=c,c=0):c>2147483647?c=2147483647:c<-2147483648&&(c=-2147483648),c=+c,An(c)&&(c=d?0:a.length-1),c<0&&(c=a.length+c),c>=a.length){if(d)return-1;c=a.length-1}else if(c<0)if(d)c=0;else return-1;if(typeof f=="string"&&(f=u.from(f,h)),u.isBuffer(f))return f.length===0?-1:me(a,f,c,h,d);if(typeof f=="number")return f=f&255,typeof Uint8Array.prototype.indexOf=="function"?d?Uint8Array.prototype.indexOf.call(a,f,c):Uint8Array.prototype.lastIndexOf.call(a,f,c):me(a,[f],c,h,d);throw new TypeError("val must be string, number or Buffer")}function me(a,f,c,h,d){let v=1,b=a.length,V=f.length;if(h!==void 0&&(h=String(h).toLowerCase(),h==="ucs2"||h==="ucs-2"||h==="utf16le"||h==="utf-16le")){if(a.length<2||f.length<2)return-1;v=2,b/=2,V/=2,c/=2}function te(G,X){return v===1?G[X]:G.readUInt16BE(X*v)}let H;if(d){let G=-1;for(H=c;H<b;H++)if(te(a,H)===te(f,G===-1?0:H-G)){if(G===-1&&(G=H),H-G+1===V)return G*v}else G!==-1&&(H-=H-G),G=-1}else for(c+V>b&&(c=b-V),H=c;H>=0;H--){let G=!0;for(let X=0;X<V;X++)if(te(a,H+X)!==te(f,X)){G=!1;break}if(G)return H}return-1}u.prototype.includes=function(a,f,c){return this.indexOf(a,f,c)!==-1},u.prototype.indexOf=function(a,f,c){return Z(this,a,f,c,!0)},u.prototype.lastIndexOf=function(a,f,c){return Z(this,a,f,c,!1)};function pt(a,f,c,h){c=Number(c)||0;let d=a.length-c;h?(h=Number(h),h>d&&(h=d)):h=d;let v=f.length;h>v/2&&(h=v/2);let b;for(b=0;b<h;++b){let V=parseInt(f.substr(b*2,2),16);if(An(V))return b;a[c+b]=V}return b}function Dt(a,f,c,h){return Lr(En(f,a.length-c),a,c,h)}function Fs(a,f,c,h){return Lr(Vs(f),a,c,h)}function js(a,f,c,h){return Lr(Xi(f),a,c,h)}function Ls(a,f,c,h){return Lr(Gs(f,a.length-c),a,c,h)}u.prototype.write=function(a,f,c,h){if(f===void 0)h="utf8",c=this.length,f=0;else if(c===void 0&&typeof f=="string")h=f,c=this.length,f=0;else if(isFinite(f))f=f>>>0,isFinite(c)?(c=c>>>0,h===void 0&&(h="utf8")):(h=c,c=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let d=this.length-f;if((c===void 0||c>d)&&(c=d),a.length>0&&(c<0||f<0)||f>this.length)throw new RangeError("Attempt to write outside buffer bounds");h||(h="utf8");let v=!1;for(;;)switch(h){case"hex":return pt(this,a,f,c);case"utf8":case"utf-8":return Dt(this,a,f,c);case"ascii":case"latin1":case"binary":return Fs(this,a,f,c);case"base64":return js(this,a,f,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ls(this,a,f,c);default:if(v)throw new TypeError("Unknown encoding: "+h);h=(""+h).toLowerCase(),v=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Ps(a,f,c){return f===0&&c===a.length?e.fromByteArray(a):e.fromByteArray(a.slice(f,c))}function $i(a,f,c){c=Math.min(a.length,c);let h=[],d=f;for(;d<c;){let v=a[d],b=null,V=v>239?4:v>223?3:v>191?2:1;if(d+V<=c){let te,H,G,X;switch(V){case 1:v<128&&(b=v);break;case 2:te=a[d+1],(te&192)===128&&(X=(v&31)<<6|te&63,X>127&&(b=X));break;case 3:te=a[d+1],H=a[d+2],(te&192)===128&&(H&192)===128&&(X=(v&15)<<12|(te&63)<<6|H&63,X>2047&&(X<55296||X>57343)&&(b=X));break;case 4:te=a[d+1],H=a[d+2],G=a[d+3],(te&192)===128&&(H&192)===128&&(G&192)===128&&(X=(v&15)<<18|(te&63)<<12|(H&63)<<6|G&63,X>65535&&X<1114112&&(b=X))}}b===null?(b=65533,V=1):b>65535&&(b-=65536,h.push(b>>>10&1023|55296),b=56320|b&1023),h.push(b),d+=V}return Ns(h)}var zi=4096;function Ns(a){let f=a.length;if(f<=zi)return String.fromCharCode.apply(String,a);let c="",h=0;for(;h<f;)c+=String.fromCharCode.apply(String,a.slice(h,h+=zi));return c}function Ms(a,f,c){let h="";c=Math.min(a.length,c);for(let d=f;d<c;++d)h+=String.fromCharCode(a[d]&127);return h}function Ds(a,f,c){let h="";c=Math.min(a.length,c);for(let d=f;d<c;++d)h+=String.fromCharCode(a[d]);return h}function Ws(a,f,c){let h=a.length;(!f||f<0)&&(f=0),(!c||c<0||c>h)&&(c=h);let d="";for(let v=f;v<c;++v)d+=Ys[a[v]];return d}function $s(a,f,c){let h=a.slice(f,c),d="";for(let v=0;v<h.length-1;v+=2)d+=String.fromCharCode(h[v]+h[v+1]*256);return d}u.prototype.slice=function(a,f){let c=this.length;a=~~a,f=f===void 0?c:~~f,a<0?(a+=c,a<0&&(a=0)):a>c&&(a=c),f<0?(f+=c,f<0&&(f=0)):f>c&&(f=c),f<a&&(f=a);let h=this.subarray(a,f);return Object.setPrototypeOf(h,u.prototype),h};function Q(a,f,c){if(a%1!==0||a<0)throw new RangeError("offset is not uint");if(a+f>c)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(a,f,c){a=a>>>0,f=f>>>0,c||Q(a,f,this.length);let h=this[a],d=1,v=0;for(;++v<f&&(d*=256);)h+=this[a+v]*d;return h},u.prototype.readUintBE=u.prototype.readUIntBE=function(a,f,c){a=a>>>0,f=f>>>0,c||Q(a,f,this.length);let h=this[a+--f],d=1;for(;f>0&&(d*=256);)h+=this[a+--f]*d;return h},u.prototype.readUint8=u.prototype.readUInt8=function(a,f){return a=a>>>0,f||Q(a,1,this.length),this[a]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(a,f){return a=a>>>0,f||Q(a,2,this.length),this[a]|this[a+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(a,f){return a=a>>>0,f||Q(a,2,this.length),this[a]<<8|this[a+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(a,f){return a=a>>>0,f||Q(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+this[a+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(a,f){return a=a>>>0,f||Q(a,4,this.length),this[a]*16777216+(this[a+1]<<16|this[a+2]<<8|this[a+3])},u.prototype.readBigUInt64LE=tt(function(a){a=a>>>0,$t(a,"offset");let f=this[a],c=this[a+7];(f===void 0||c===void 0)&&hr(a,this.length-8);let h=f+this[++a]*2**8+this[++a]*2**16+this[++a]*2**24,d=this[++a]+this[++a]*2**8+this[++a]*2**16+c*2**24;return BigInt(h)+(BigInt(d)<<BigInt(32))}),u.prototype.readBigUInt64BE=tt(function(a){a=a>>>0,$t(a,"offset");let f=this[a],c=this[a+7];(f===void 0||c===void 0)&&hr(a,this.length-8);let h=f*2**24+this[++a]*2**16+this[++a]*2**8+this[++a],d=this[++a]*2**24+this[++a]*2**16+this[++a]*2**8+c;return(BigInt(h)<<BigInt(32))+BigInt(d)}),u.prototype.readIntLE=function(a,f,c){a=a>>>0,f=f>>>0,c||Q(a,f,this.length);let h=this[a],d=1,v=0;for(;++v<f&&(d*=256);)h+=this[a+v]*d;return d*=128,h>=d&&(h-=Math.pow(2,8*f)),h},u.prototype.readIntBE=function(a,f,c){a=a>>>0,f=f>>>0,c||Q(a,f,this.length);let h=f,d=1,v=this[a+--h];for(;h>0&&(d*=256);)v+=this[a+--h]*d;return d*=128,v>=d&&(v-=Math.pow(2,8*f)),v},u.prototype.readInt8=function(a,f){return a=a>>>0,f||Q(a,1,this.length),this[a]&128?(255-this[a]+1)*-1:this[a]},u.prototype.readInt16LE=function(a,f){a=a>>>0,f||Q(a,2,this.length);let c=this[a]|this[a+1]<<8;return c&32768?c|4294901760:c},u.prototype.readInt16BE=function(a,f){a=a>>>0,f||Q(a,2,this.length);let c=this[a+1]|this[a]<<8;return c&32768?c|4294901760:c},u.prototype.readInt32LE=function(a,f){return a=a>>>0,f||Q(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},u.prototype.readInt32BE=function(a,f){return a=a>>>0,f||Q(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},u.prototype.readBigInt64LE=tt(function(a){a=a>>>0,$t(a,"offset");let f=this[a],c=this[a+7];(f===void 0||c===void 0)&&hr(a,this.length-8);let h=this[a+4]+this[a+5]*2**8+this[a+6]*2**16+(c<<24);return(BigInt(h)<<BigInt(32))+BigInt(f+this[++a]*2**8+this[++a]*2**16+this[++a]*2**24)}),u.prototype.readBigInt64BE=tt(function(a){a=a>>>0,$t(a,"offset");let f=this[a],c=this[a+7];(f===void 0||c===void 0)&&hr(a,this.length-8);let h=(f<<24)+this[++a]*2**16+this[++a]*2**8+this[++a];return(BigInt(h)<<BigInt(32))+BigInt(this[++a]*2**24+this[++a]*2**16+this[++a]*2**8+c)}),u.prototype.readFloatLE=function(a,f){return a=a>>>0,f||Q(a,4,this.length),t.read(this,a,!0,23,4)},u.prototype.readFloatBE=function(a,f){return a=a>>>0,f||Q(a,4,this.length),t.read(this,a,!1,23,4)},u.prototype.readDoubleLE=function(a,f){return a=a>>>0,f||Q(a,8,this.length),t.read(this,a,!0,52,8)},u.prototype.readDoubleBE=function(a,f){return a=a>>>0,f||Q(a,8,this.length),t.read(this,a,!1,52,8)};function ce(a,f,c,h,d,v){if(!u.isBuffer(a))throw new TypeError('"buffer" argument must be a Buffer instance');if(f>d||f<v)throw new RangeError('"value" argument is out of bounds');if(c+h>a.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(a,f,c,h){if(a=+a,f=f>>>0,c=c>>>0,!h){let b=Math.pow(2,8*c)-1;ce(this,a,f,c,b,0)}let d=1,v=0;for(this[f]=a&255;++v<c&&(d*=256);)this[f+v]=a/d&255;return f+c},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(a,f,c,h){if(a=+a,f=f>>>0,c=c>>>0,!h){let b=Math.pow(2,8*c)-1;ce(this,a,f,c,b,0)}let d=c-1,v=1;for(this[f+d]=a&255;--d>=0&&(v*=256);)this[f+d]=a/v&255;return f+c},u.prototype.writeUint8=u.prototype.writeUInt8=function(a,f,c){return a=+a,f=f>>>0,c||ce(this,a,f,1,255,0),this[f]=a&255,f+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(a,f,c){return a=+a,f=f>>>0,c||ce(this,a,f,2,65535,0),this[f]=a&255,this[f+1]=a>>>8,f+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(a,f,c){return a=+a,f=f>>>0,c||ce(this,a,f,2,65535,0),this[f]=a>>>8,this[f+1]=a&255,f+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(a,f,c){return a=+a,f=f>>>0,c||ce(this,a,f,4,4294967295,0),this[f+3]=a>>>24,this[f+2]=a>>>16,this[f+1]=a>>>8,this[f]=a&255,f+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(a,f,c){return a=+a,f=f>>>0,c||ce(this,a,f,4,4294967295,0),this[f]=a>>>24,this[f+1]=a>>>16,this[f+2]=a>>>8,this[f+3]=a&255,f+4};function Zi(a,f,c,h,d){Ki(f,h,d,a,c,7);let v=Number(f&BigInt(4294967295));a[c++]=v,v=v>>8,a[c++]=v,v=v>>8,a[c++]=v,v=v>>8,a[c++]=v;let b=Number(f>>BigInt(32)&BigInt(4294967295));return a[c++]=b,b=b>>8,a[c++]=b,b=b>>8,a[c++]=b,b=b>>8,a[c++]=b,c}function qi(a,f,c,h,d){Ki(f,h,d,a,c,7);let v=Number(f&BigInt(4294967295));a[c+7]=v,v=v>>8,a[c+6]=v,v=v>>8,a[c+5]=v,v=v>>8,a[c+4]=v;let b=Number(f>>BigInt(32)&BigInt(4294967295));return a[c+3]=b,b=b>>8,a[c+2]=b,b=b>>8,a[c+1]=b,b=b>>8,a[c]=b,c+8}u.prototype.writeBigUInt64LE=tt(function(a,f=0){return Zi(this,a,f,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=tt(function(a,f=0){return qi(this,a,f,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(a,f,c,h){if(a=+a,f=f>>>0,!h){let V=Math.pow(2,8*c-1);ce(this,a,f,c,V-1,-V)}let d=0,v=1,b=0;for(this[f]=a&255;++d<c&&(v*=256);)a<0&&b===0&&this[f+d-1]!==0&&(b=1),this[f+d]=(a/v>>0)-b&255;return f+c},u.prototype.writeIntBE=function(a,f,c,h){if(a=+a,f=f>>>0,!h){let V=Math.pow(2,8*c-1);ce(this,a,f,c,V-1,-V)}let d=c-1,v=1,b=0;for(this[f+d]=a&255;--d>=0&&(v*=256);)a<0&&b===0&&this[f+d+1]!==0&&(b=1),this[f+d]=(a/v>>0)-b&255;return f+c},u.prototype.writeInt8=function(a,f,c){return a=+a,f=f>>>0,c||ce(this,a,f,1,127,-128),a<0&&(a=255+a+1),this[f]=a&255,f+1},u.prototype.writeInt16LE=function(a,f,c){return a=+a,f=f>>>0,c||ce(this,a,f,2,32767,-32768),this[f]=a&255,this[f+1]=a>>>8,f+2},u.prototype.writeInt16BE=function(a,f,c){return a=+a,f=f>>>0,c||ce(this,a,f,2,32767,-32768),this[f]=a>>>8,this[f+1]=a&255,f+2},u.prototype.writeInt32LE=function(a,f,c){return a=+a,f=f>>>0,c||ce(this,a,f,4,2147483647,-2147483648),this[f]=a&255,this[f+1]=a>>>8,this[f+2]=a>>>16,this[f+3]=a>>>24,f+4},u.prototype.writeInt32BE=function(a,f,c){return a=+a,f=f>>>0,c||ce(this,a,f,4,2147483647,-2147483648),a<0&&(a=4294967295+a+1),this[f]=a>>>24,this[f+1]=a>>>16,this[f+2]=a>>>8,this[f+3]=a&255,f+4},u.prototype.writeBigInt64LE=tt(function(a,f=0){return Zi(this,a,f,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=tt(function(a,f=0){return qi(this,a,f,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Vi(a,f,c,h,d,v){if(c+h>a.length)throw new RangeError("Index out of range");if(c<0)throw new RangeError("Index out of range")}function Gi(a,f,c,h,d){return f=+f,c=c>>>0,d||Vi(a,f,c,4,34028234663852886e22,-34028234663852886e22),t.write(a,f,c,h,23,4),c+4}u.prototype.writeFloatLE=function(a,f,c){return Gi(this,a,f,!0,c)},u.prototype.writeFloatBE=function(a,f,c){return Gi(this,a,f,!1,c)};function Yi(a,f,c,h,d){return f=+f,c=c>>>0,d||Vi(a,f,c,8,17976931348623157e292,-17976931348623157e292),t.write(a,f,c,h,52,8),c+8}u.prototype.writeDoubleLE=function(a,f,c){return Yi(this,a,f,!0,c)},u.prototype.writeDoubleBE=function(a,f,c){return Yi(this,a,f,!1,c)},u.prototype.copy=function(a,f,c,h){if(!u.isBuffer(a))throw new TypeError("argument should be a Buffer");if(c||(c=0),!h&&h!==0&&(h=this.length),f>=a.length&&(f=a.length),f||(f=0),h>0&&h<c&&(h=c),h===c||a.length===0||this.length===0)return 0;if(f<0)throw new RangeError("targetStart out of bounds");if(c<0||c>=this.length)throw new RangeError("Index out of range");if(h<0)throw new RangeError("sourceEnd out of bounds");h>this.length&&(h=this.length),a.length-f<h-c&&(h=a.length-f+c);let d=h-c;return this===a&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(f,c,h):Uint8Array.prototype.set.call(a,this.subarray(c,h),f),d},u.prototype.fill=function(a,f,c,h){if(typeof a=="string"){if(typeof f=="string"?(h=f,f=0,c=this.length):typeof c=="string"&&(h=c,c=this.length),h!==void 0&&typeof h!="string")throw new TypeError("encoding must be a string");if(typeof h=="string"&&!u.isEncoding(h))throw new TypeError("Unknown encoding: "+h);if(a.length===1){let v=a.charCodeAt(0);(h==="utf8"&&v<128||h==="latin1")&&(a=v)}}else typeof a=="number"?a=a&255:typeof a=="boolean"&&(a=Number(a));if(f<0||this.length<f||this.length<c)throw new RangeError("Out of range index");if(c<=f)return this;f=f>>>0,c=c===void 0?this.length:c>>>0,a||(a=0);let d;if(typeof a=="number")for(d=f;d<c;++d)this[d]=a;else{let v=u.isBuffer(a)?a:u.from(a,h),b=v.length;if(b===0)throw new TypeError('The value "'+a+'" is invalid for argument "value"');for(d=0;d<c-f;++d)this[d+f]=v[d%b]}return this};var Wt={};function bn(a,f,c){Wt[a]=class extends c{constructor(){super(),Object.defineProperty(this,"message",{value:f.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${a}]`,this.stack,delete this.name}get code(){return a}set code(h){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:h,writable:!0})}toString(){return`${this.name} [${a}]: ${this.message}`}}}bn("ERR_BUFFER_OUT_OF_BOUNDS",function(a){return a?`${a} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),bn("ERR_INVALID_ARG_TYPE",function(a,f){return`The "${a}" argument must be of type number. Received type ${typeof f}`},TypeError),bn("ERR_OUT_OF_RANGE",function(a,f,c){let h=`The value of "${a}" is out of range.`,d=c;return Number.isInteger(c)&&Math.abs(c)>2**32?d=Hi(String(c)):typeof c=="bigint"&&(d=String(c),(c>BigInt(2)**BigInt(32)||c<-(BigInt(2)**BigInt(32)))&&(d=Hi(d)),d+="n"),h+=` It must be ${f}. Received ${d}`,h},RangeError);function Hi(a){let f="",c=a.length,h=a[0]==="-"?1:0;for(;c>=h+4;c-=3)f=`_${a.slice(c-3,c)}${f}`;return`${a.slice(0,c)}${f}`}function zs(a,f,c){$t(f,"offset"),(a[f]===void 0||a[f+c]===void 0)&&hr(f,a.length-(c+1))}function Ki(a,f,c,h,d,v){if(a>c||a<f){let b=typeof f=="bigint"?"n":"",V;throw v>3?f===0||f===BigInt(0)?V=`>= 0${b} and < 2${b} ** ${(v+1)*8}${b}`:V=`>= -(2${b} ** ${(v+1)*8-1}${b}) and < 2 ** ${(v+1)*8-1}${b}`:V=`>= ${f}${b} and <= ${c}${b}`,new Wt.ERR_OUT_OF_RANGE("value",V,a)}zs(h,d,v)}function $t(a,f){if(typeof a!="number")throw new Wt.ERR_INVALID_ARG_TYPE(f,"number",a)}function hr(a,f,c){throw Math.floor(a)!==a?($t(a,c),new Wt.ERR_OUT_OF_RANGE(c||"offset","an integer",a)):f<0?new Wt.ERR_BUFFER_OUT_OF_BOUNDS:new Wt.ERR_OUT_OF_RANGE(c||"offset",`>= ${c?1:0} and <= ${f}`,a)}var Zs=/[^+/0-9A-Za-z-_]/g;function qs(a){if(a=a.split("=")[0],a=a.trim().replace(Zs,""),a.length<2)return"";for(;a.length%4!==0;)a=a+"=";return a}function En(a,f){f=f||1/0;let c,h=a.length,d=null,v=[];for(let b=0;b<h;++b){if(c=a.charCodeAt(b),c>55295&&c<57344){if(!d){if(c>56319){(f-=3)>-1&&v.push(239,191,189);continue}else if(b+1===h){(f-=3)>-1&&v.push(239,191,189);continue}d=c;continue}if(c<56320){(f-=3)>-1&&v.push(239,191,189),d=c;continue}c=(d-55296<<10|c-56320)+65536}else d&&(f-=3)>-1&&v.push(239,191,189);if(d=null,c<128){if((f-=1)<0)break;v.push(c)}else if(c<2048){if((f-=2)<0)break;v.push(c>>6|192,c&63|128)}else if(c<65536){if((f-=3)<0)break;v.push(c>>12|224,c>>6&63|128,c&63|128)}else if(c<1114112){if((f-=4)<0)break;v.push(c>>18|240,c>>12&63|128,c>>6&63|128,c&63|128)}else throw new Error("Invalid code point")}return v}function Vs(a){let f=[];for(let c=0;c<a.length;++c)f.push(a.charCodeAt(c)&255);return f}function Gs(a,f){let c,h,d,v=[];for(let b=0;b<a.length&&!((f-=2)<0);++b)c=a.charCodeAt(b),h=c>>8,d=c%256,v.push(d),v.push(h);return v}function Xi(a){return e.toByteArray(qs(a))}function Lr(a,f,c,h){let d;for(d=0;d<h&&!(d+c>=f.length||d>=a.length);++d)f[d+c]=a[d];return d}function je(a,f){return a instanceof f||a!=null&&a.constructor!=null&&a.constructor.name!=null&&a.constructor.name===f.name}function An(a){return a!==a}var Ys=function(){let a="0123456789abcdef",f=new Array(256);for(let c=0;c<16;++c){let h=c*16;for(let d=0;d<16;++d)f[h+d]=a[c]+a[d]}return f}();function tt(a){return typeof BigInt>"u"?Hs:a}function Hs(){throw new Error("BigInt not supported")}}),Ip=et((r,e)=>{typeof window<"u"?(window.global=window,global.fetch=window.fetch,e.exports={Buffer:ji().Buffer,Crypto:window.crypto}):e.exports={Buffer:ji().Buffer,Crypto:crypto}}),Ss={};_p(Ss,{AVSCTap:()=>xn,ArweaveSigner:()=>Bs,DataItem:()=>vn,MAX_TAG_BYTES:()=>Di,MIN_BINARY_SIZE:()=>ks,SIG_CONFIG:()=>jr,SignatureConfig:()=>Fe,Signer:()=>Bp,createData:()=>Mp,deserializeTags:()=>Pi,indexToType:()=>Cs,serializeTags:()=>Os,tagsExceedLimit:()=>jp});var Bp=class{signer;publicKey;signatureType;signatureLength;ownerLength;pem;static verify(r,e,t,n){throw new Error("You must implement verify method on child")}},Cp=Mt(Mi(),1),Ue=Mt(As(),1);async function Ts(r){if(Array.isArray(r)){let i=(0,Ue.concatBuffers)([(0,Ue.stringToBuffer)("list"),(0,Ue.stringToBuffer)(r.length.toString())]);return await Is(r,await Qe().hash(i,"SHA-384"))}let e=r,t=(0,Ue.concatBuffers)([(0,Ue.stringToBuffer)("blob"),(0,Ue.stringToBuffer)(e.byteLength.toString())]),n=(0,Ue.concatBuffers)([await Qe().hash(t,"SHA-384"),await Qe().hash(e,"SHA-384")]);return await Qe().hash(n,"SHA-384")}async function Is(r,e){if(r.length<1)return e;let t=(0,Ue.concatBuffers)([e,await Ts(r[0])]),n=await Qe().hash(t,"SHA-384");return await Is(r.slice(1),n)}var Fi=Mt(Sp(),1),Op=Fi.default.default?Fi.default.default:Fi.default,kp=class extends Op{getPublicKey(r){throw new Error("Unimplemented")}},Rp;function Qe(){return Rp??=new kp}var Fe;(function(r){r[r.ARWEAVE=1]="ARWEAVE",r[r.ED25519=2]="ED25519",r[r.ETHEREUM=3]="ETHEREUM",r[r.SOLANA=4]="SOLANA",r[r.INJECTEDAPTOS=5]="INJECTEDAPTOS",r[r.MULTIAPTOS=6]="MULTIAPTOS",r[r.TYPEDETHEREUM=7]="TYPEDETHEREUM"})(Fe||(Fe={}));var jr={[Fe.ARWEAVE]:{sigLength:512,pubLength:512,sigName:"arweave"},[Fe.ED25519]:{sigLength:64,pubLength:32,sigName:"ed25519"},[Fe.ETHEREUM]:{sigLength:65,pubLength:65,sigName:"ethereum"},[Fe.SOLANA]:{sigLength:64,pubLength:32,sigName:"solana"},[Fe.INJECTEDAPTOS]:{sigLength:64,pubLength:32,sigName:"injectedAptos"},[Fe.MULTIAPTOS]:{sigLength:64*32+4,pubLength:32*32+1,sigName:"multiAptos"},[Fe.TYPEDETHEREUM]:{sigLength:65,pubLength:42,sigName:"typedEthereum"}},Bs=class{signatureType=1;ownerLength=jr[1].pubLength;signatureLength=jr[1].sigLength;jwk;pk;constructor(r){this.pk=r.n,this.jwk=r}get publicKey(){return Cp.default.toBuffer(this.pk)}sign(r){return Qe().sign(this.jwk,r)}static async verify(r,e,t){return await Qe().verify(r,e,t)}},Cs={1:Bs},ze=Mt(Mi(),1);async function Li(r){return Ts([(0,Ue.stringToBuffer)("dataitem"),(0,Ue.stringToBuffer)("1"),(0,Ue.stringToBuffer)(r.signatureType.toString()),r.rawOwner,r.rawTarget,r.rawAnchor,r.rawTags,r.rawData])}async function Up(r,e){let t=await Li(r),n=await e.sign(t),i=await Qe().hash(n);return{signature:Buffer.from(n),id:Buffer.from(i)}}async function Fp(r,e){let{signature:t,id:n}=await Up(r,e);return r.getRaw().set(t,2),n}var xn=class{buf;pos;constructor(r=Buffer.alloc(Di),e=0){this.buf=r,this.pos=e}writeTags(r){if(!Array.isArray(r))throw new Error("input must be array");let e=r.length,t;if(e)for(this.writeLong(e),t=0;t<e;t++){let n=r[t];if(n?.name===void 0||n?.value===void 0)throw new Error(`Invalid tag format for ${n}, expected {name:string, value: string}`);this.writeString(n.name),this.writeString(n.value)}this.writeLong(0)}toBuffer(){let r=Buffer.alloc(this.pos);if(this.pos>this.buf.length)throw new Error(`Too many tag bytes (${this.pos} > ${this.buf.length})`);return this.buf.copy(r,0,0,this.pos),r}tagsExceedLimit(){return this.pos>this.buf.length}writeLong(r){let e=this.buf,t,n;if(r>=-1073741824&&r<1073741824){n=r>=0?r<<1:~r<<1|1;do e[this.pos]=n&127,n>>=7;while(n&&(e[this.pos++]|=128))}else{t=r>=0?r*2:-r*2-1;do e[this.pos]=t&127,t/=128;while(t>=1&&(e[this.pos++]|=128))}this.pos++,this.buf=e}writeString(r){let e=Buffer.byteLength(r),t=this.buf;this.writeLong(e);let n=this.pos;if(this.pos+=e,!(this.pos>t.length)){if(e>64)this.buf.write(r,this.pos-e,e,"utf8");else{let i,o,s,u;for(i=0,o=e;i<o;i++)s=r.charCodeAt(i),s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&((u=r.charCodeAt(i+1))&64512)===56320?(s=65536+((s&1023)<<10)+(u&1023),i++,t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}this.buf=t}}readLong(){let r=0,e=0,t=this.buf,n,i,o,s;do n=t[this.pos++],i=n&128,r|=(n&127)<<e,e+=7;while(i&&e<28);if(i){o=r,s=268435456;do n=t[this.pos++],o+=(n&127)*s,s*=128;while(n&128);return(o%2?-(o+1):o)/2}return r>>1^-(r&1)}skipLong(){let r=this.buf;for(;r[this.pos++]&128;);}readTags(){let r=[],e;for(;e=this.readLong();)for(e<0&&(e=-e,this.skipLong());e--;){let t=this.readString(),n=this.readString();r.push({name:t,value:n})}return r}readString(){let r=this.readLong(),e=this.pos,t=this.buf;if(this.pos+=r,!(this.pos>t.length))return this.buf.slice(e,e+r).toString()}};function Os(r){let e=new xn;return e.writeTags(r),e.toBuffer()}function jp(r){let e=new xn;return e.writeTags(r),e.tagsExceedLimit()}function Pi(r){return new xn(r).readTags()}function ht(r){let e=0;for(let t=r.length-1;t>=0;t--)e=e*256+r[t];return e}function Lp(r){if(r>29)throw new Error("Short too long");let e=[0,0];for(let t=0;t<e.length;t++){let n=r&255;e[t]=n,r=(r-n)/256}return Uint8Array.from(e)}function bs(r){let e=[0,0,0,0,0,0,0,0];for(let t=0;t<e.length;t++){let n=r&255;e[t]=n,r=(r-n)/256}return Uint8Array.from(e)}var Pp=Mt(Ip(),1),lr=Mt(ji(),1),Di=4096,ks=80,vn=class{binary;_id;constructor(r){this.binary=r}static isDataItem(r){return r.binary!==void 0}get signatureType(){let r=ht(this.binary.subarray(0,2));if(Fe?.[r]!==void 0)return r;throw new Error("Unknown signature type: "+r)}async isValid(){return vn.verify(this.binary)}get id(){return(async()=>ze.default.encode(await this.rawId))()}set id(r){this._id=ze.default.toBuffer(r)}get rawId(){return(async()=>lr.Buffer.from(await Pp.Crypto.subtle.digest("SHA-256",this.rawSignature)))()}set rawId(r){this._id=r}get rawSignature(){return this.binary.subarray(2,2+this.signatureLength)}get signature(){return ze.default.encode(this.rawSignature)}set rawOwner(r){if(r.byteLength!=this.ownerLength)throw new Error(`Expected raw owner (pubkey) to be ${this.ownerLength} bytes, got ${r.byteLength} bytes.`);this.binary.set(r,2+this.signatureLength)}get rawOwner(){return this.binary.subarray(2+this.signatureLength,2+this.signatureLength+this.ownerLength)}get signatureLength(){return jr[this.signatureType].sigLength}get owner(){return ze.default.encode(this.rawOwner)}get ownerLength(){return jr[this.signatureType].pubLength}get rawTarget(){let r=this.getTargetStart();return this.binary[r]==1?this.binary.subarray(r+1,r+33):lr.Buffer.alloc(0)}get target(){return ze.default.encode(this.rawTarget)}get rawAnchor(){let r=this.getAnchorStart();return this.binary[r]==1?this.binary.subarray(r+1,r+33):lr.Buffer.alloc(0)}get anchor(){return this.rawAnchor.toString()}get rawTags(){let r=this.getTagsStart(),e=ht(this.binary.subarray(r+8,r+16));return this.binary.subarray(r+16,r+16+e)}get tags(){let r=this.getTagsStart();if(ht(this.binary.subarray(r,r+8))==0)return[];let e=ht(this.binary.subarray(r+8,r+16));return Pi(lr.Buffer.from(this.binary.subarray(r+16,r+16+e)))}get tagsB64Url(){return this.tags.map(r=>({name:ze.default.encode(r.name),value:ze.default.encode(r.value)}))}getStartOfData(){let r=this.getTagsStart(),e=this.binary.subarray(r+8,r+16),t=ht(e);return r+16+t}get rawData(){let r=this.getTagsStart(),e=this.binary.subarray(r+8,r+16),t=ht(e),n=r+16+t;return this.binary.subarray(n,this.binary.length)}get data(){return ze.default.encode(this.rawData)}getRaw(){return this.binary}async sign(r){return this._id=await Fp(this,r),this.rawId}async setSignature(r){this.binary.set(r,2),this._id=lr.Buffer.from(await Qe().hash(r))}isSigned(){return(this._id?.length??0)>0}toJSON(){return{signature:this.signature,owner:this.owner,target:this.target,tags:this.tags.map(r=>({name:ze.default.encode(r.name),value:ze.default.encode(r.value)})),data:this.data}}static async verify(r){if(r.byteLength<ks)return!1;let e=new vn(r),t=e.signatureType,n=e.getTagsStart(),i=ht(r.subarray(n,n+8)),o=r.subarray(n+8,n+16),s=ht(o);if(s>Di)return!1;if(i>0)try{if(Pi(lr.Buffer.from(r.subarray(n+16,n+16+s))).length!==i)return!1}catch{return!1}let u=Cs[t],l=await Li(e);return await u.verify(e.rawOwner,l,e.rawSignature)}async getSignatureData(){return Li(this)}getTagsStart(){let r=this.getTargetStart(),e=this.binary[r]==1,t=r+(e?33:1),n=this.binary[t]==1;return t+=n?33:1,t}getTargetStart(){return 2+this.signatureLength+this.ownerLength}getAnchorStart(){let r=this.getTargetStart()+1,e=this.binary[this.getTargetStart()]==1;return r+=e?32:0,r}},Np=Mt(Mi(),1);function Mp(r,e,t){let n=e.publicKey,i=t?.target?Np.default.toBuffer(t.target):null,o=1+(i?.byteLength??0),s=t?.anchor?Buffer.from(t.anchor):null,u=1+(s?.byteLength??0),l=(t?.tags?.length??0)>0?Os(t.tags):null,p=16+(l?l.byteLength:0),m=Buffer.from(r),y=m.byteLength,x=2+e.signatureLength+e.ownerLength+o+u+p+y,E=Buffer.alloc(x);if(E.set(Lp(e.signatureType),0),E.set(new Uint8Array(e.signatureLength).fill(0),2),n.byteLength!==e.ownerLength)throw new Error(`Owner must be ${e.ownerLength} bytes, but was incorrectly ${n.byteLength}`);E.set(n,2+e.signatureLength);let S=2+e.signatureLength+e.ownerLength;if(E[S]=i?1:0,i){if(i.byteLength!==32)throw new Error(`Target must be 32 bytes but was incorrectly ${i.byteLength}`);E.set(i,S+1)}let A=S+o,T=A+1;if(E[A]=s?1:0,s){if(T+=s.byteLength,s.byteLength!==32)throw new Error("Anchor must be 32 bytes");E.set(s,A+1)}E.set(bs(t?.tags?.length??0),T);let C=bs(l?.byteLength??0);E.set(C,T+8),l&&E.set(l,T+16);let M=T+p;return E.set(m,M),new vn(E)}var Rs={...Ss};globalThis.arbundles??=Rs;var Us=Rs;var{DataItem:Dp}=Us;globalThis.Buffer||(globalThis.Buffer=Wi.Buffer);function Wp(r){return async({data:t,tags:n,target:i,anchor:o,createDataItem:s=u=>new Dp(u)})=>{let u=await r.signDataItem({data:t,tags:n,target:i,anchor:o}),l=s(Wi.Buffer.from(u));return{id:await l.id,raw:await l.getRaw()}}}var $p=globalThis.GATEWAY_URL||void 0,zp=globalThis.MU_URL||void 0,Zp=globalThis.CU_URL||void 0,{result:Gx,results:Yx,message:Hx,spawn:Kx,monitor:Xx,unmonitor:Jx,dryrun:Qx}=es({GATEWAY_URL:$p,MU_URL:zp,CU_URL:Zp});var e_=_n.createDataItemSigner;export{es as connect,e_ as createDataItemSigner,Qx as dryrun,Hx as message,Xx as monitor,Gx as result,Yx as results,Kx as spawn,Jx as unmonitor};
/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

warp-arbundles/build/web/esm/bundle.js:
  (*! Bundled license information:
  
  ieee754/index.js:
    (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)
  
  buffer/index.js:
    (*!
     * The buffer module from node.js, for the browser.
     *
     * @author   Feross Aboukhadijeh <https://feross.org>
     * @license  MIT
     *)
  *)
*/
